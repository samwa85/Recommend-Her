import{c as _,r as o,j as e,B as l,Q as je,E as me,b as A,C as ee,X as se,t as u,u as pe,m as te}from"./index-DFWiVR3s.js";import{B as D}from"./badge-CHNks9Gx.js";import{I as C}from"./input-BRfSl6Ko.js";import{S as G,a as H,b as U,c as q,d}from"./select-CZ5lG6Ed.js";import{T as ve,a as fe,b as ae,c as B,d as Ne,e as E}from"./table-B3szQ2mI.js";import{D as ye,a as we,b as be,c as z,d as re}from"./dropdown-menu-BOXuGTFg.js";import{D as Ce,a as _e,b as ke,c as Se,d as Pe,e as De}from"./dialog-mWvL8XvD.js";import{A as le}from"./AdminLayout-BZSyr1bk.js";import{a as Fe}from"./LoadingSkeleton-C89YAwry.js";import{L as p}from"./label-DnMOE1GO.js";import{T as K}from"./textarea-Dqr-7fh_.js";import{c as ie,d as ne,u as Te,l as Me,e as Be,f as Ee,h as ze,i as Ie,j as Le,p as Ae}from"./blog-D0G-tr2H.js";import{L as Ve}from"./list-BKobYluX.js";import{S as ce}from"./save-BFwxx1C1.js";import{U as $e}from"./upload-CrsLz_NZ.js";import"./client-CrqYG681.js";import{S as Re}from"./search-B2QVa34Y.js";import{C as oe}from"./circle-x-DW2K9umr.js";import{P as J}from"./plus-CXLdNYAN.js";import{F as Y}from"./file-text-BQI-XE8w.js";import{C as Ge}from"./clock-iKpkAaQ6.js";import{E as He,T as Ue}from"./trash-2-C9rU121_.js";import{C as de}from"./circle-check-big-i2QELpmb.js";import{A as he}from"./archive-7cSUAsXV.js";import"./index-Cl4iP5m9.js";import"./index-CWO8BEd0.js";import"./index-CAsnp8AP.js";import"./tslib.es6-eMSY344_.js";import"./index-DJ6pmmvH.js";import"./index-DVAE1cjs.js";import"./chevron-down-CnxfN6eY.js";import"./index-DmaXBg08.js";import"./errors-B3_eVdCY.js";import"./users-DCngZZIb.js";import"./building-2-De9H6TkV.js";import"./message-square-Bcw3mLo6.js";import"./mail-zjxhTzbQ.js";import"./shield-CSwj9smG.js";import"./bell-FNheItAI.js";import"./skeleton-CoFZ2UGj.js";import"./card-DMwxKRzs.js";const qe=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Oe=_("bold",qe);const Qe=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]],We=_("heading-1",Qe);const Xe=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],Ke=_("heading-2",Xe);const Je=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],Ye=_("italic",Je);const Ze=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],es=_("link",Ze);const ss=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],ts=_("list-ordered",ss);const as=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],rs=_("pen",as);const ls=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],is=_("video",ls);function ns({post:c,onSave:V,onCancel:$}){const R=!!c,k=o.useRef(null),[O,S]=o.useState(!1),[j,f]=o.useState(!1),[I,w]=o.useState(!1),[F,N]=o.useState(""),[a,m]=o.useState({title:c?.title||"",slug:c?.slug||"",excerpt:c?.excerpt||"",content:c?.content||"",featured_image:c?.featured_image||"",video_url:c?.video_url||"",author_name:c?.author_name||"Recommend Her Team",author_title:c?.author_title||"",author_image:c?.author_image||"",category:c?.category||"General",tags:c?.tags||[],read_time:c?.read_time||"",status:c?.status||"draft",meta_title:c?.meta_title||"",meta_description:c?.meta_description||""}),h=(t,i)=>{m(n=>({...n,[t]:i})),t==="title"&&!R&&m(n=>({...n,slug:ie(i)})),t==="content"&&m(n=>({...n,read_time:ne(i)}))},Q=async t=>{const i=t.target.files?.[0];if(i){if(!i.type.startsWith("image/")){u.error("Please select an image file");return}if(i.size>5*1024*1024){u.error("Image must be less than 5MB");return}S(!0);try{const{url:n,error:g}=await Te(i);if(g)throw g;n&&(h("featured_image",n),u.success("Image uploaded successfully"))}catch(n){u.error("Failed to upload image"),console.error(n)}finally{S(!1)}}},b=()=>{F.trim()&&!a.tags?.includes(F.trim())&&(m(t=>({...t,tags:[...t.tags||[],F.trim()]})),N(""))},T=t=>{m(i=>({...i,tags:i.tags?.filter(n=>n!==t)||[]}))},x=(t,i="")=>{const n=document.getElementById("content");if(!n)return;const g=n.selectionStart,v=n.selectionEnd,P=a.content||"",L=P.substring(g,v),W=P.substring(0,g)+t+L+i+P.substring(v);h("content",W),setTimeout(()=>{n.focus(),n.setSelectionRange(g+t.length,g+t.length+L.length)},0)},M=async(t=!1)=>{if(!a.title||!a.content){u.error("Title and content are required");return}f(!0);try{const i={title:a.title,slug:a.slug||ie(a.title),excerpt:a.excerpt||a.content.substring(0,200)+"...",content:a.content,featured_image:a.featured_image||null,video_url:a.video_url||null,author_name:a.author_name||"Recommend Her Team",author_title:a.author_title||null,author_image:a.author_image||null,category:a.category||"General",tags:a.tags||[],read_time:a.read_time||ne(a.content),status:t?"published":a.status||"draft",meta_title:a.meta_title||a.title||null,meta_description:a.meta_description||a.excerpt?.substring(0,160)||null};c?.id&&(i.id=c.id),await V(i),u.success(t?"Post published!":"Draft saved!")}catch(i){u.error("Failed to save post"),console.error(i)}finally{f(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-3 border rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(l,{type:"button",variant:"ghost",size:"sm",onClick:()=>x("**","**"),children:e.jsx(Oe,{className:"w-4 h-4"})}),e.jsx(l,{type:"button",variant:"ghost",size:"sm",onClick:()=>x("*","*"),children:e.jsx(Ye,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"w-px h-6 bg-border"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(l,{type:"button",variant:"ghost",size:"sm",onClick:()=>x("# "),children:e.jsx(We,{className:"w-4 h-4"})}),e.jsx(l,{type:"button",variant:"ghost",size:"sm",onClick:()=>x("## "),children:e.jsx(Ke,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"w-px h-6 bg-border"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(l,{type:"button",variant:"ghost",size:"sm",onClick:()=>x("- "),children:e.jsx(Ve,{className:"w-4 h-4"})}),e.jsx(l,{type:"button",variant:"ghost",size:"sm",onClick:()=>x("1. "),children:e.jsx(ts,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"w-px h-6 bg-border"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(l,{type:"button",variant:"ghost",size:"sm",onClick:()=>x("> "),children:e.jsx(je,{className:"w-4 h-4"})}),e.jsx(l,{type:"button",variant:"ghost",size:"sm",onClick:()=>x("[","](url)"),children:e.jsx(es,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex-1"}),e.jsxs(l,{type:"button",variant:"outline",size:"sm",onClick:()=>w(!I),children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),I?"Edit":"Preview"]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"title",children:"Title *"}),e.jsx(C,{id:"title",placeholder:"Enter post title",value:a.title,onChange:t=>h("title",t.target.value),className:"text-lg"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"slug",children:"Slug (URL)"}),e.jsx(C,{id:"slug",placeholder:"url-friendly-slug",value:a.slug,onChange:t=>h("slug",t.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"excerpt",children:"Excerpt"}),e.jsx(K,{id:"excerpt",placeholder:"Brief summary of the post...",value:a.excerpt,onChange:t=>h("excerpt",t.target.value),rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"content",children:"Content *"}),I?e.jsx("div",{className:"min-h-[400px] p-4 border rounded-lg prose prose-sm max-w-none",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:(a.content||"").replace(/\n/g,"<br/>")}})}):e.jsx(K,{id:"content",placeholder:"Write your post content in Markdown...",value:a.content,onChange:t=>h("content",t.target.value),rows:20,className:"font-mono text-sm"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Status"}),e.jsxs(G,{value:a.status,onValueChange:t=>h("status",t),children:[e.jsx(H,{children:e.jsx(U,{})}),e.jsxs(q,{children:[e.jsx(d,{value:"draft",children:"Draft"}),e.jsx(d,{value:"published",children:"Published"}),e.jsx(d,{value:"archived",children:"Archived"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(l,{variant:"outline",className:"flex-1",onClick:()=>M(!1),disabled:j,children:[j?e.jsx(A,{className:"w-4 h-4 animate-spin"}):e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Save Draft"]}),e.jsxs(l,{className:"flex-1",onClick:()=>M(!0),disabled:j,children:[j?e.jsx(A,{className:"w-4 h-4 animate-spin"}):e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Publish"]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Featured Image"}),a.featured_image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:a.featured_image,alt:"Featured",className:"w-full h-40 object-cover rounded-lg"}),e.jsx(l,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>h("featured_image",""),children:e.jsx(se,{className:"w-4 h-4"})})]}):e.jsx("div",{className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>k.current?.click(),children:O?e.jsx(A,{className:"w-8 h-8 mx-auto animate-spin text-muted-foreground"}):e.jsxs(e.Fragment,{children:[e.jsx($e,{className:"w-8 h-8 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to upload image"})]})}),e.jsx("input",{ref:k,type:"file",accept:"image/*",className:"hidden",onChange:Q})]}),e.jsxs("div",{className:"p-4 border rounded-lg space-y-2",children:[e.jsxs(p,{htmlFor:"video_url",className:"flex items-center gap-2",children:[e.jsx(is,{className:"w-4 h-4"}),"Video URL"]}),e.jsx(C,{id:"video_url",placeholder:"https://youtube.com/watch?v=...",value:a.video_url||"",onChange:t=>h("video_url",t.target.value)})]}),e.jsxs("div",{className:"p-4 border rounded-lg space-y-2",children:[e.jsx(p,{htmlFor:"category",children:"Category"}),e.jsxs(G,{value:a.category,onValueChange:t=>h("category",t),children:[e.jsx(H,{children:e.jsx(U,{})}),e.jsxs(q,{children:[e.jsx(d,{value:"General",children:"General"}),e.jsx(d,{value:"Leadership",children:"Leadership"}),e.jsx(d,{value:"Success Stories",children:"Success Stories"}),e.jsx(d,{value:"Diversity & Inclusion",children:"Diversity & Inclusion"}),e.jsx(d,{value:"Career Growth",children:"Career Growth"}),e.jsx(d,{value:"News",children:"News"})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg space-y-2",children:[e.jsx(p,{children:"Tags"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{placeholder:"Add tag...",value:F,onChange:t=>N(t.target.value),onKeyDown:t=>{t.key==="Enter"&&(t.preventDefault(),b())}}),e.jsx(l,{type:"button",variant:"outline",onClick:b,children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:a.tags?.map(t=>e.jsxs(D,{variant:"secondary",className:"gap-1",children:[t,e.jsx("button",{type:"button",onClick:()=>T(t),className:"hover:text-destructive",children:e.jsx(se,{className:"w-3 h-3"})})]},t))})]}),e.jsxs("div",{className:"p-4 border rounded-lg space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Author"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"author_name",children:"Name"}),e.jsx(C,{id:"author_name",value:a.author_name,onChange:t=>h("author_name",t.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"author_title",children:"Title"}),e.jsx(C,{id:"author_title",value:a.author_title||"",onChange:t=>h("author_title",t.target.value)})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"SEO"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"meta_title",children:"Meta Title"}),e.jsx(C,{id:"meta_title",value:a.meta_title||"",onChange:t=>h("meta_title",t.target.value),placeholder:a.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"meta_description",children:"Meta Description"}),e.jsx(K,{id:"meta_description",value:a.meta_description||"",onChange:t=>h("meta_description",t.target.value),rows:2})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t",children:[e.jsx(l,{variant:"outline",onClick:$,children:"Cancel"}),e.jsxs(l,{variant:"outline",onClick:()=>M(!1),disabled:j,children:[j?e.jsx(A,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Save Draft"]}),e.jsxs(l,{onClick:()=>M(!0),disabled:j,children:[j?e.jsx(A,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(ee,{className:"w-4 h-4 mr-2"}),R?"Update & Publish":"Publish"]})]})]})}function Xs(){pe();const[c,V]=o.useState(!0),[$,R]=o.useState([]),[k,O]=o.useState(0),[S,j]=o.useState(null),[f,I]=o.useState(""),[w,F]=o.useState(""),[N,a]=o.useState(""),[m,h]=o.useState(1),[Q,b]=o.useState(!1),[T,x]=o.useState(null),[M,t]=o.useState(!1),[i,n]=o.useState(null),g=10,v=o.useCallback(async()=>{V(!0),j(null);try{const s={filters:{...w&&{status:w},...N&&{category:N},...f&&{search:f}},pagination:{page:m,perPage:g}},r=await Me(s);if(r.error)throw console.error("[BlogPage] Query error:",r.error),r.error;R(r.data),O(r.count)}catch(s){const r=s instanceof Error?s.message:"Failed to fetch blog posts";j(r),u.error(`Failed to fetch blog posts: ${r}`),console.error("[BlogPage] Fetch error:",s)}finally{V(!1)}},[w,N,f,m]);o.useMemo(()=>{v()},[v]);const P=()=>{x(null),b(!0)},L=s=>{x(s),b(!0)},W=async s=>{try{if(s.id){const r=await Be(s.id,s);if(r.error)throw console.error("[BlogPage] Update error:",r.error),new Error(r.error.message||"Failed to update post")}else{const r=await Ee(s);if(r.error)throw console.error("[BlogPage] Create error:",r.error),new Error(r.error.message||"Failed to create post")}b(!1),x(null),v()}catch(r){const y=r instanceof Error?r.message:"Failed to save post";throw u.error(`Failed to save post: ${y}`),r}},ue=async()=>{if(i)try{const s=await ze(i);if(s.error)throw s.error;u.success("Post deleted successfully"),v()}catch(s){u.error("Failed to delete post"),console.error(s)}finally{t(!1),n(null)}},X=async(s,r)=>{try{let y;switch(r){case"published":y=await Ae(s.id);break;case"draft":y=await Le(s.id);break;case"archived":y=await Ie(s.id);break}if(y?.error)throw y.error;u.success(`Post ${r==="published"?"published":r==="draft"?"unpublished":"archived"}`),v()}catch(y){u.error("Failed to update status"),console.error(y)}},xe=s=>{window.open(`/blog/${s.slug}`,"_blank")},ge=s=>{switch(s){case"published":return e.jsxs(D,{className:"bg-green-500",children:[e.jsx(de,{className:"w-3 h-3 mr-1"})," Published"]});case"draft":return e.jsxs(D,{variant:"secondary",children:[e.jsx(Y,{className:"w-3 h-3 mr-1"})," Draft"]});case"archived":return e.jsxs(D,{variant:"outline",children:[e.jsx(he,{className:"w-3 h-3 mr-1"})," Archived"]});default:return e.jsx(D,{variant:"secondary",children:s})}},Z=Math.ceil(k/g);return Q?e.jsx(le,{title:T?"Edit Blog Post":"Create Blog Post",subtitle:T?`Editing: ${T.title}`:"Write a new blog post",actions:e.jsx(l,{variant:"outline",onClick:()=>b(!1),children:"Back to Posts"}),children:e.jsx(ns,{post:T,onSave:W,onCancel:()=>b(!1)})}):e.jsxs(le,{title:"Blog",subtitle:`${k} total posts`,actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(l,{variant:"outline",size:"sm",onClick:v,children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Refresh"]}),e.jsxs(l,{size:"sm",onClick:P,children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"New Post"]})]}),children:[e.jsx("div",{className:"mb-6 space-y-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"relative flex-1 min-w-[300px] max-w-md",children:[e.jsx(Re,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(C,{placeholder:"Search posts...",value:f,onChange:s=>I(s.target.value),className:"pl-9"})]}),e.jsxs(G,{value:w||"all",onValueChange:s=>F(s==="all"?"":s),children:[e.jsx(H,{className:"w-[140px]",children:e.jsx(U,{placeholder:"All Status"})}),e.jsxs(q,{children:[e.jsx(d,{value:"all",children:"All Status"}),e.jsx(d,{value:"published",children:"Published"}),e.jsx(d,{value:"draft",children:"Draft"}),e.jsx(d,{value:"archived",children:"Archived"})]})]}),e.jsxs(G,{value:N||"all",onValueChange:s=>a(s==="all"?"":s),children:[e.jsx(H,{className:"w-[160px]",children:e.jsx(U,{placeholder:"All Categories"})}),e.jsxs(q,{children:[e.jsx(d,{value:"all",children:"All Categories"}),e.jsx(d,{value:"General",children:"General"}),e.jsx(d,{value:"Leadership",children:"Leadership"}),e.jsx(d,{value:"Success Stories",children:"Success Stories"}),e.jsx(d,{value:"Diversity & Inclusion",children:"Diversity & Inclusion"}),e.jsx(d,{value:"Career Growth",children:"Career Growth"}),e.jsx(d,{value:"News",children:"News"})]})]})]})}),c?e.jsx(Fe,{columns:6,rows:5}):S?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(oe,{className:"w-16 h-16 text-red-500/50 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"Failed to load blog posts"}),e.jsx("p",{className:"text-muted-foreground mt-1 max-w-md mx-auto",children:S.includes("blog_posts")&&S.includes("exist")?"The blog posts table does not exist. Please run the database migrations.":S}),e.jsxs("div",{className:"flex gap-2 justify-center mt-4",children:[e.jsxs(l,{variant:"outline",onClick:v,children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Try Again"]}),e.jsxs(l,{onClick:P,children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Create Post"]})]})]}):$.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(Y,{className:"w-16 h-16 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"No blog posts found"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:f||w||N?"Try adjusting your filters":"Get started by creating your first blog post"}),!f&&!w&&!N&&e.jsxs(l,{className:"mt-4",onClick:P,children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Create First Post"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(ve,{children:[e.jsx(fe,{children:e.jsxs(ae,{className:"bg-muted/50 hover:bg-muted/50",children:[e.jsx(B,{children:"Post"}),e.jsx(B,{children:"Author"}),e.jsx(B,{children:"Category"}),e.jsx(B,{children:"Status"}),e.jsx(B,{children:"Date"}),e.jsx(B,{className:"w-10"})]})}),e.jsx(Ne,{children:$.map(s=>e.jsxs(ae,{className:"group cursor-pointer",onClick:()=>L(s),children:[e.jsx(E,{children:e.jsxs("div",{className:"flex items-start gap-3",children:[s.featured_image?e.jsx("img",{src:s.featured_image,alt:s.title,className:"w-12 h-12 rounded-lg object-cover"}):e.jsx("div",{className:"w-12 h-12 rounded-lg bg-muted flex items-center justify-center",children:e.jsx(Y,{className:"w-5 h-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium line-clamp-1",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:s.excerpt}),s.tags&&s.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[s.tags.slice(0,3).map(r=>e.jsx(D,{variant:"outline",className:"text-[10px] px-1 py-0",children:r},r)),s.tags.length>3&&e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["+",s.tags.length-3]})]})]})]})}),e.jsx(E,{children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:s.author_name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.author_title})]})}),e.jsx(E,{children:e.jsx(D,{variant:"outline",children:s.category})}),e.jsx(E,{children:ge(s.status)}),e.jsxs(E,{children:[e.jsx("div",{className:"text-sm",children:s.status==="published"&&s.published_at?new Date(s.published_at).toLocaleDateString():new Date(s.created_at).toLocaleDateString()}),e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(Ge,{className:"w-3 h-3"}),s.read_time]})]}),e.jsx(E,{onClick:r=>r.stopPropagation(),children:e.jsxs(ye,{children:[e.jsx(we,{asChild:!0,children:e.jsx(l,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(He,{className:"w-4 h-4"})})}),e.jsxs(be,{align:"end",children:[e.jsxs(z,{onClick:()=>xe(s),children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"View on Site"]}),e.jsxs(z,{onClick:()=>L(s),children:[e.jsx(rs,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsx(re,{}),s.status!=="published"&&e.jsxs(z,{onClick:()=>X(s,"published"),children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),"Publish"]}),s.status!=="draft"&&e.jsxs(z,{onClick:()=>X(s,"draft"),children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Unpublish"]}),s.status!=="archived"&&e.jsxs(z,{onClick:()=>X(s,"archived"),children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Archive"]}),e.jsx(re,{}),e.jsxs(z,{className:"text-red-600",onClick:()=>{n(s.id),t(!0)},children:[e.jsx(Ue,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})]},s.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(m-1)*g+1," to"," ",Math.min(m*g,k)," of ",k," posts"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>h(s=>s-1),disabled:m===1,children:"Previous"}),e.jsxs("span",{className:"text-sm",children:["Page ",m," of ",Z]}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>h(s=>s+1),disabled:m>=Z,children:"Next"})]})]})]}),e.jsx(Ce,{open:M,onOpenChange:t,children:e.jsxs(_e,{children:[e.jsxs(ke,{children:[e.jsx(Se,{children:"Delete Blog Post"}),e.jsx(Pe,{children:"Are you sure you want to delete this blog post? This action cannot be undone."})]}),e.jsxs(De,{children:[e.jsx(l,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),e.jsx(l,{variant:"destructive",onClick:ue,children:"Delete"})]})]})})]})}export{Xs as default};
