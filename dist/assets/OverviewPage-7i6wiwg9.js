import{u as B,j as e,B as f,a as S}from"./index-qoOME8mY.js";import{C as y,a as b,b as v,c as w,d as N}from"./index-CsKqCIzL.js";import{B as K}from"./badge-DS90lYj3.js";import{S as $}from"./scroll-area-D5JBEXsZ.js";import{A as _,a as G}from"./alert-CY_hLXsn.js";import{u as z,a as E,b as H,c as W,A as p,S as X,f as Y}from"./LoadingSkeleton-BIuzlw0E.js";import{K as F,a as c,C as Q,b as C}from"./ChartCard-DSvMceUz.js";import{S as V}from"./StatusBadge-0beuKaZt.js";import{C as J}from"./circle-alert-CmZxWWpu.js";import{U as Z}from"./users-B7vsRM7J.js";import{B as h}from"./building-2-LyC4uWQT.js";import{M as T}from"./message-square-CE0bfcV6.js";import{M as g}from"./mail-hjAr2Bly.js";import{R as k,C as ee,X as se,Y as te,T as A,P as ae,a as re,b as ne}from"./PieChart-CR6W8Oks.js";import{A as ie,a as L,b as R}from"./AreaChart-BCla2QG8.js";import{U as O}from"./user-check-COeJ7n-1.js";import"./index-EHAx_rFm.js";import"./tslib.es6-ByNH4KU3.js";import"./index-C7Xr5Zjk.js";import"./input-COdB9PMO.js";import"./parseISO-Dkgfv3AF.js";import"./index-Bq8Hpwnx.js";import"./shield-CPwMl-BC.js";import"./search-BPQDrF8n.js";import"./bell-B4cYDKmo.js";import"./skeleton-Br7kL-uo.js";const n={primary:"#f43f5e",secondary:"#3b82f6",success:"#22c55e",warning:"#f59e0b",purple:"#a855f7"},m=[n.primary,n.secondary,n.success,n.warning,n.purple];function Pe(){const t=B(),{data:s,isLoading:i,error:o,lastUpdated:d,refresh:r}=z({autoRefresh:!0}),{data:j,isLoading:q}=E({limit:10}),{trend:D,isLoading:P}=H({days:30}),{counts:U,isLoading:I}=W("talent");if(i)return e.jsx(p,{children:e.jsx(X,{})});if(o)return e.jsx(p,{children:e.jsxs(_,{variant:"destructive",className:"mb-6",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsxs(G,{children:["Failed to load dashboard data."," ",e.jsx(f,{variant:"link",onClick:r,className:"p-0 h-auto",children:"Try again"})]})]})});const M=D?.slice(-7).map(a=>({date:new Date(a.date).toLocaleDateString("en-US",{weekday:"short"}),talent:a.talent_count,sponsors:a.sponsor_count}))||[],u=U.map(a=>({name:a.status.charAt(0).toUpperCase()+a.status.slice(1),value:a.count}));return e.jsxs(p,{isLoading:i,onRefresh:r,lastUpdated:d,children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Dashboard Overview"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Welcome back! Here's what's happening with your platform today."})]}),e.jsxs(F,{className:"mb-8",children:[e.jsx(c,{title:"Total Talent",value:s?.talent?.total||0,trend:s?.talent?.newThisWeek,trendLabel:"this week",subtitle:`${s?.talent?.newToday||0} new today`,icon:Z,color:"blue",onClick:()=>t("/admin/talent")}),e.jsx(c,{title:"Total Sponsors",value:s?.sponsors?.total||0,trend:s?.sponsors?.newThisMonth,trendLabel:"this month",subtitle:`${s?.sponsors?.active||0} active`,icon:h,color:"green",onClick:()=>t("/admin/sponsors")}),e.jsx(c,{title:"Open Requests",value:s?.requests?.open||0,trend:s?.requests?.inReview,trendLabel:"in review",subtitle:`${s?.requests?.urgent||0} urgent`,icon:T,color:"purple",onClick:()=>t("/admin/requests")}),e.jsx(c,{title:"Unread Messages",value:s?.messages?.unread||0,trend:s?.messages?.newToday,trendLabel:"new today",subtitle:`${s?.messages?.replied||0} replied`,icon:g,color:"yellow",onClick:()=>t("/admin/messages")})]}),e.jsxs(Q,{className:"mb-8",children:[e.jsx(C,{title:"Submissions Trend",description:"New talent and sponsors over the last 7 days",isLoading:P,height:280,children:e.jsx(k,{width:"100%",height:"100%",children:e.jsxs(ie,{data:M,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorTalent",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:n.primary,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:n.primary,stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorSponsors",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:n.secondary,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:n.secondary,stopOpacity:0})]})]}),e.jsx(ee,{strokeDasharray:"3 3",stroke:"#eee"}),e.jsx(se,{dataKey:"date",tick:{fontSize:12}}),e.jsx(te,{tick:{fontSize:12}}),e.jsx(A,{}),e.jsx(L,{type:"monotone",dataKey:"talent",name:"Talent",stroke:n.primary,fillOpacity:1,fill:"url(#colorTalent)"}),e.jsx(L,{type:"monotone",dataKey:"sponsors",name:"Sponsors",stroke:n.secondary,fillOpacity:1,fill:"url(#colorSponsors)"})]})})}),e.jsxs(C,{title:"Talent Status Distribution",description:"Current status breakdown",isLoading:I,height:280,children:[e.jsx(k,{width:"100%",height:"100%",children:e.jsxs(ae,{children:[e.jsx(re,{data:u,cx:"50%",cy:"50%",innerRadius:60,outerRadius:90,paddingAngle:5,dataKey:"value",children:u.map((a,l)=>e.jsx(ne,{fill:m[l%m.length]},`cell-${l}`))}),e.jsx(A,{})]})}),e.jsx("div",{className:"flex flex-wrap justify-center gap-3 mt-2",children:u.map((a,l)=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:m[l%m.length]}}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.name,": ",a.value]})]},a.name))})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs(y,{className:"lg:col-span-2",children:[e.jsxs(b,{className:"flex flex-row items-center justify-between pb-4",children:[e.jsxs("div",{children:[e.jsx(v,{children:"Pending Actions"}),e.jsx(w,{children:"Items requiring your attention"})]}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>t("/admin/talent?status=pending"),children:"View All"})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(x,{icon:O,title:"Pending Talent Reviews",count:s?.talent?.pending||0,color:"blue",onClick:()=>t("/admin/talent?status=pending")}),e.jsx(x,{icon:h,title:"Open Requests",count:s?.requests?.open||0,color:"purple",onClick:()=>t("/admin/requests")}),e.jsx(x,{icon:g,title:"Unread Messages",count:s?.messages?.unread||0,color:"yellow",onClick:()=>t("/admin/messages?status=unread")})]})})]}),e.jsxs(y,{children:[e.jsxs(b,{className:"pb-4",children:[e.jsx(v,{children:"Recent Activity"}),e.jsx(w,{children:"Latest platform events"})]}),e.jsx(N,{children:e.jsx($,{className:"h-[300px]",children:e.jsx("div",{className:"space-y-4",children:q?e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((a,l)=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted animate-pulse"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("div",{className:"h-4 w-3/4 bg-muted rounded animate-pulse"}),e.jsx("div",{className:"h-3 w-1/2 bg-muted rounded animate-pulse"})]})]},l))}):j.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(R,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No recent activity"})]}):j.map(a=>e.jsx(le,{log:a},a.id))})})})]})]})]})}function x({icon:t,title:s,count:i,color:o,onClick:d}){const r={blue:"bg-blue-50 text-blue-600 dark:bg-blue-950/30 dark:text-blue-400",green:"bg-green-50 text-green-600 dark:bg-green-950/30 dark:text-green-400",yellow:"bg-yellow-50 text-yellow-600 dark:bg-yellow-950/30 dark:text-yellow-400",purple:"bg-purple-50 text-purple-600 dark:bg-purple-950/30 dark:text-purple-400",red:"bg-red-50 text-red-600 dark:bg-red-950/30 dark:text-red-400"};return e.jsxs("button",{onClick:d,className:"w-full flex items-center justify-between p-4 rounded-lg border hover:bg-muted/50 transition-colors text-left",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:S("p-2.5 rounded-lg",r[o]),children:e.jsx(t,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i===0?"All caught up!":`${i} item${i===1?"":"s"} pending`})]})]}),i>0&&e.jsx(K,{variant:"secondary",className:"ml-4",children:i})]})}function le({log:t}){const s=r=>r==="talent"?O:r==="sponsor"?h:r==="message"?g:r==="request"?T:R,i=r=>r==="talent"?"text-blue-600 bg-blue-50":r==="sponsor"?"text-green-600 bg-green-50":r==="message"?"text-yellow-600 bg-yellow-50":r==="request"?"text-purple-600 bg-purple-50":"text-gray-600 bg-gray-50",o=s(t.type),d=i(t.type);return e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:S("w-8 h-8 rounded-full flex items-center justify-center shrink-0",d),children:e.jsx(o,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:t.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(V,{status:t.status,type:t.type}),e.jsx("span",{className:"text-xs text-muted-foreground",children:Y(t.created_at)})]})]})]})}export{Pe as default};
