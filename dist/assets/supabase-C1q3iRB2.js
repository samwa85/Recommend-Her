import{r as u,j as c,l as m,a as _}from"./index-BdCLm_2q.js";import"./tslib.es6-ywRZ5Esg.js";import{c as g}from"./index-2gvreq7C.js";var p=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],w=p.reduce((e,t)=>{const a=m(`Primitive.${t}`),r=u.forwardRef((n,o)=>{const{asChild:l,...i}=n,d=l?a:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(d,{...i,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),b="Label",f=u.forwardRef((e,t)=>c.jsx(w.label,{...e,ref:t,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));f.displayName=b;var y=f;function C({className:e,...t}){return c.jsx(y,{"code-path":"src/components/ui/label.tsx:13:5","data-slot":"label",className:_("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}const h="http://supabasekong-dcgko804wcgwow4s4ko40000.145.223.96.191.sslip.io",v="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJzdXBhYmFzZSIsImlhdCI6MTc3MDg5MTcyMCwiZXhwIjo0OTI2NTY1MzIwLCJyb2xlIjoiYW5vbiJ9.o3IrcUgo8uwNNWSshycVC6CgyxA7KExx_RR5DLwJRmE",s=g(h,v);async function q(){const{data:{user:e}}=await s.auth.getUser();if(!e)return null;const{data:t}=await s.from("profiles").select("*").eq("id",e.id).single();return t}async function I(){const{data:e}=await s.from("v_admin_dashboard_metrics").select("*").single();return e}async function P(){const{data:e}=await s.from("v_pending_talent_reviews").select("*").order("submitted_at",{ascending:!0});return e||[]}async function R(){const{data:e}=await s.from("v_pending_sponsor_approvals").select("*").order("created_at",{ascending:!0});return e||[]}async function D(e,t){const{data:a,error:r}=await s.rpc("admin_review_talent",{p_talent_id:e,p_decision:t.decision,p_feedback_to_talent:t.feedback_to_talent,p_internal_notes:t.internal_notes});return{data:a,error:r}}async function A(e,t){const{data:a,error:r}=await s.rpc("admin_review_sponsor",{p_sponsor_id:e,p_decision:t});return{data:a,error:r}}async function E(e){let t=s.from("talent_profiles").select(`
      *,
      profiles:profiles!left(full_name, email)
    `,{count:"exact"});e?.status&&(t=t.eq("status",e.status)),e?.limit&&(t=t.limit(e.limit)),e?.offset&&(t=t.range(e.offset,e.offset+(e.limit||10)-1));const{data:a,error:r,count:n}=await t.order("created_at",{ascending:!1});if(r&&console.error("getAllTalent error:",r),a&&a.length>0){const o=a.filter(i=>i.profiles!==null).length,l=a.filter(i=>i.profiles===null).length;console.log(`getAllTalent results: ${a.length} total (${o} with profile, ${l} without)`)}return{data:a,error:r,count:n}}async function M(){const{data:e,error:t}=await s.from("talent_profiles").select("*").limit(10),{data:a,error:r}=await s.rpc("get_talent_status_counts");return console.log("Raw talent_profiles sample:",e?.length,t),console.log("Status counts:",a,r),{rawTalent:e,rawError:t,statusCounts:a,countError:r}}async function N(){console.log("ðŸ§ª [Test] Testing database recording...");const{count:e}=await s.from("talent_profiles").select("*",{count:"exact",head:!0});console.log("ðŸ§ª [Test] Talent count before:",e);const t=`test-${Date.now()}`,{data:a,error:r}=await s.rpc("submit_talent_profile_anon",{p_full_name:"Test User",p_email:`test-${t}@example.com`,p_headline:"Test Headline",p_bio:"Test bio for debugging",p_years_experience:5,p_industry:"Technology",p_seniority_level:"Senior",p_functions:["Product"],p_skills:["Testing"],p_languages:["English"],p_linkedin_url:"",p_portfolio_url:"",p_cv_file_path:null});console.log("ðŸ§ª [Test] Insert result:",{data:a,error:r});const{count:n}=await s.from("talent_profiles").select("*",{count:"exact",head:!0});return console.log("ðŸ§ª [Test] Talent count after:",n),console.log("ðŸ§ª [Test] Difference:",(n||0)-(e||0)),{beforeCount:e,afterCount:n,difference:(n||0)-(e||0),insertData:a,insertError:r,success:!r&&(n||0)>(e||0)}}async function J(e){let t=s.from("sponsor_profiles").select(`
      *,
      profiles:profiles(full_name, email)
    `,{count:"exact"});e?.status&&(t=t.eq("status",e.status)),e?.limit&&(t=t.limit(e.limit)),e?.offset&&(t=t.range(e.offset,e.offset+(e.limit||10)-1));const{data:a,error:r,count:n}=await t.order("created_at",{ascending:!1});return{data:a,error:r,count:n}}async function j(e){let t=s.from("audit_logs").select(`
      *,
      actor:profiles(full_name, email)
    `,{count:"exact"});e?.action&&(t=t.eq("action",e.action)),e?.limit&&(t=t.limit(e.limit)),e?.offset&&(t=t.range(e.offset,e.offset+(e.limit||50)-1));const{data:a,error:r,count:n}=await t.order("created_at",{ascending:!1});return{data:a,error:r,count:n}}async function k(e){const{error:t}=await s.from("talent_profiles").delete().eq("id",e);return{error:t}}async function L(e){const{data:{user:t}}=await s.auth.getUser();if(!t)return{data:[],error:new Error("Not authenticated")};let a=s.from("v_recommendation_requests_detail").select("*");const{data:r,error:n}=await a.order("created_at",{ascending:!1});return{data:r,error:n}}async function $(e){let t=s.from("contact_submissions").select("*",{count:"exact"});e?.status&&(t=t.eq("status",e.status)),e?.limit&&(t=t.limit(e.limit)),e?.offset&&(t=t.range(e.offset,e.offset+(e.limit||10)-1));const{data:a,error:r,count:n}=await t.order("created_at",{ascending:!1});return{data:a,error:r,count:n}}async function O(e,t){const{data:a,error:r}=await s.from("contact_submissions").update({status:t,updated_at:new Date().toISOString()}).eq("id",e);return{data:a,error:r}}export{C as L,M as a,I as b,P as c,R as d,E as e,J as f,q as g,j as h,L as i,$ as j,A as k,D as l,k as m,s,N as t,O as u};
