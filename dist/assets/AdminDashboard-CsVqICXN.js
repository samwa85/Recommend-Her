import{c as F,u as ea,r,j as e,b as V,B as n,m as sa,U as aa,E as le,y as ta,i as ra,h as la,L as na,o as ia}from"./index-CTBFlb6B.js";import{I as fs}from"./input-CEcI5SlG.js";import{B as h}from"./badge-DXHBdx_O.js";import{T as vs,a as ca,b as H,c as oa}from"./tabs-DLB32Yrl.js";import{T as ys}from"./textarea-NQnwRCyO.js";import{D as xe,a as he,b as pe,c as ue,d as De,e as Me}from"./dialog-B58eJIqf.js";import{S as Re,a as Le,b as Ee,c as Pe,d as ae}from"./select-B4WlMphl.js";import{A as da,a as ma}from"./alert-hUIJQhRI.js";import{t as xa,e as Ms,n as ha,j as M,L as Ns,C as pa,p as G,D as bs,a as ws,b as Cs,c as te,d as ua}from"./dropdown-menu-0vdZ_YEl.js";import{C as v,a as S,b as T,c as re,d as _}from"./card-DD8-8ij6.js";import{S as ja}from"./separator-BCupOjuR.js";import{S as Ue}from"./scroll-area-iSDRfuRx.js";import{a as ga,b as fa,c as va,d as _s,e as ks,h as Fe,i as Ie,j as ya,k as Na,l as ba,u as wa,t as Ca,m as _a,n as ka,o as Sa,B as Ta,p as za}from"./storage-XMAzBQGK.js";import{T as We,I as Aa,a as Da,R as Ma,b as Ra}from"./database.types-C-zkObjv.js";import{L as Oe}from"./label-TGXBe99m.js";import{S as La}from"./shield-DqvVlmHg.js";import{C as Ea}from"./calendar-Dv8liY45.js";import{U as $e}from"./user-check-BkwTKYsv.js";import{B as Pa}from"./building-2-BA-C4eeT.js";import{M as Be}from"./message-square-Ke3EAdy9.js";import{M as Ve}from"./mail-BiYN70Cu.js";import{C as He}from"./circle-alert-CxUxc1K2.js";import{C as Ss}from"./clock-BnyVGg6r.js";import{U as Ua}from"./users-D8QL0r_i.js";import{B as qe}from"./briefcase-z6C_4lXU.js";import{D as Fa}from"./database--uoZZkBG.js";import{C as q}from"./circle-check-big-Bn8TQKMB.js";import{C as je}from"./circle-x-BDdjTIYP.js";import{b as Ia,A as Oa,a as $a}from"./AreaChart-cMfDTORA.js";import{S as Ba}from"./search-Asy_H7bk.js";import{F as Va}from"./funnel-64hG_8Sb.js";import{D as Ke}from"./download-DDQX9FxH.js";import{L as Ha}from"./list-DV3_HL7N.js";import{E as qa,T as Je}from"./trash-2-H-8tYrTi.js";import{R as Ge,C as Ts,X as zs,Y as As,T as Qe,P as Ka,a as Ga,b as Qa,B as Xa,p as Ya}from"./PieChart-Bv0uge5V.js";import{B as Wa}from"./BarChart-B4keygoB.js";import{F as Ds}from"./file-text-CpvjM4du.js";import{U as Ja}from"./user-CnULDG4j.js";import"./index-D84yse_B.js";import"./index-HXy_8xgq.js";import"./index-DM13BidT.js";import"./index-y-owRkm1.js";import"./tslib.es6-eMSY344_.js";import"./index-DWK1vnJA.js";import"./index-BAoQ5eb0.js";import"./chevron-down-DoU3MspT.js";const Za=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],et=F("building",Za);const st=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],at=F("file-spreadsheet",st);const tt=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],rt=F("grid-3x3",tt);const lt=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],nt=F("pen-line",lt);const it=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],ct=F("printer",it);const ot=[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],dt=F("search-x",ot);const mt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],xt=F("target",mt);function ht(l,c,d){const o=xa(l,d?.in);return isNaN(c)?Ms(l,NaN):(c&&o.setDate(o.getDate()+c),o)}function pt(l,c){const[d,o]=ha(l,c.start,c.end);return{start:d,end:o}}function ut(l,c){const{start:d,end:o}=pt(c?.in,l);let z=+d>+o;const g=z?+d:+o,N=z?o:d;N.setHours(0,0,0,0);let w=1;const I=[];for(;+N<=g;)I.push(Ms(d,N)),N.setDate(N.getDate()+w),N.setHours(0,0,0,0);return z?I.reverse():I}function jt(l,c,d){return ht(l,-c,d)}const Xe=[{label:"7 Days",days:7},{label:"30 Days",days:30},{label:"90 Days",days:90},{label:"All Time",days:365*10}],R={primary:"#f97066",secondary:"#3b82f6",success:"#22c55e",warning:"#f59e0b",purple:"#a855f7"},ge=[R.primary,R.secondary,R.success,R.warning,R.purple],K=({value:l,icon:c,label:d,badge:o})=>e.jsxs(oa,{value:l,className:"gap-2 px-6 py-3 data-[state=active]:bg-white data-[state=active]:shadow-sm rounded-t-lg rounded-b-none border-b-2 data-[state=active]:border-[hsl(var(--primary))] border-transparent transition-all",children:[e.jsx(c,{size:18}),e.jsx("span",{className:"font-semibold",children:d}),o?e.jsx(h,{variant:"destructive",className:"ml-1 px-1.5 h-5 min-w-5 flex items-center justify-center",children:o}):null]}),dr=()=>{ea();const[l,c]=r.useState("overview"),[d,o]=r.useState(!1),[z,g]=r.useState(!0),[N,w]=r.useState(null),[I,Rs]=r.useState(""),Ls="admin123",[p,Es]=r.useState(null),[ne,Ps]=r.useState([]),[ie,Us]=r.useState([]),[C,Ze]=r.useState([]),[ve,es]=r.useState([]),[Fs,Is]=r.useState([]),[ss]=r.useState([]),[X,Os]=r.useState([]);r.useEffect(()=>{if(N){const s=setTimeout(()=>w(null),8e3);return()=>clearTimeout(s)}},[N]);const[y,P]=r.useState(null),[as,ts]=r.useState(null),[m,Y]=r.useState(null),[rs,$s]=r.useState("approved"),[ls,ns]=r.useState(""),[is,cs]=r.useState(""),[W,J]=r.useState(null),[ce,Bs]=r.useState(Xe[1]),[ye,os]=r.useState("list"),[Ne,A]=r.useState(!1),[u,oe]=r.useState(null),[ds,ms]=r.useState(!1),[k,L]=r.useState({pendingTalent:[],pendingSponsors:[],approvedTalent:[],activeSponsors:[]}),[O,Vs]=r.useState({rawTalentCount:0,statusBreakdown:{},lastCheck:null}),[U,be]=r.useState({running:!1,result:null}),Hs=async()=>{be({running:!0,result:null});try{const s=await Ca();be({running:!1,result:{success:s.success,beforeCount:s.beforeCount||0,afterCount:s.afterCount||0,error:s.insertError?.message}})}catch(s){be({running:!1,result:{success:!1,error:s instanceof Error?s.message:"Unknown error"}})}},[E,we]=r.useState(""),[Z,Ce]=r.useState("all"),[ee,_e]=r.useState("all"),[se,xs]=r.useState(1),ke=10,hs=r.useCallback(async()=>{try{const s=await ga();console.log("Auth check - profile:",s?.id,"role:",s?.role),s?.role==="admin"?o(!0):o(!1)}catch(s){console.error("Auth check error:",s),o(!1)}finally{g(!1)}},[]),ps=r.useCallback(async()=>{try{console.log("=== Running data health check ===");const s=await fa();let a={},t=0;s.statusCounts&&Array.isArray(s.statusCounts)?s.statusCounts.forEach(i=>{a[i.status]=i.count,t+=i.count}):s.rawTalent&&(a=s.rawTalent.reduce((i,f)=>(i[f.status]=(i[f.status]||0)+1,i),{}),t=s.rawTalent.length),Vs({rawTalentCount:t,statusBreakdown:a,lastCheck:new Date}),console.log("Data health check updated:",{totalRawCount:t,statusBreakdown:a})}catch(s){console.error("Data health check failed:",s)}},[]),D=r.useCallback(async()=>{g(!0),w(null);try{console.log("=== Loading all dashboard data ==="),ps();const[s,a,t,i,f,b,js,j]=await Promise.allSettled([va(),_s(),ks(),Fe({limit:500}),Ie({limit:500}),ya({limit:50}),Na(),ba({limit:100})]);if(s.status==="fulfilled"?(console.log("✓ Metrics:",s.value),Es(s.value)):console.error("✗ Metrics error:",s.reason),a.status==="fulfilled"?(console.log("✓ Pending talent:",a.value?.length),Ps(a.value)):console.error("✗ Pending talent error:",a.reason),t.status==="fulfilled"?(console.log("✓ Pending sponsors:",t.value?.length),Us(t.value)):console.error("✗ Pending sponsors error:",t.reason),i.status==="fulfilled"){const{data:x,error:B,count:Js}=i.value;if(console.log("✓ All talent:",{count:Js,dataLength:x?.length,error:B}),B&&console.error("All talent Supabase error:",B),x&&x.length>0){const ze=x[0];console.log("  Sample talent:",{id:ze.id,status:ze.status,profile:ze.profiles});const Zs=x.reduce((Ae,gs)=>(Ae[gs.status]=(Ae[gs.status]||0)+1,Ae),{});console.log("  Status breakdown:",Zs)}Ze(x||[])}else console.error("✗ All talent promise rejected:",i.reason);if(f.status==="fulfilled"){const{data:x,error:B}=f.value;console.log("✓ All sponsors:",x?.length,B),es(x||[])}else console.error("✗ All sponsors error:",f.reason);b.status==="fulfilled"?(console.log("✓ Audit logs:",b.value?.data?.length),Is(b.value.data||[])):console.error("✗ Audit logs error:",b.reason),j.status==="fulfilled"?(console.log("✓ Contact submissions:",j.value?.data?.length),Os(j.value.data||[])):console.error("✗ Contact submissions error:",j.reason);const Ys=[s,a,t,i,f,b,js,j].filter(x=>x.status==="rejected").map(x=>x.reason),Ws=[i,f,b,j].filter(x=>x.status==="fulfilled"&&x.value&&typeof x.value=="object"&&"error"in x.value&&x.value.error).map(x=>x.value.error?.message).filter(x=>!!x),Te=[...Ys,...Ws];Te.length>0&&(console.error("Data loading errors:",Te),w(`Failed to load some data: ${Te.join(", ")}`))}catch(s){console.error("Critical error loading data:",s),w("Failed to load dashboard data. Please try again.")}finally{g(!1)}},[ps]);r.useEffect(()=>{hs()},[hs]),r.useEffect(()=>{d&&D()},[d,D,ce]);const $=r.useMemo(()=>C.filter(s=>{const a=!E||s.profiles?.full_name?.toLowerCase().includes(E.toLowerCase())||s.profiles?.email?.toLowerCase().includes(E.toLowerCase())||s.headline?.toLowerCase().includes(E.toLowerCase())||s.industry?.toLowerCase().includes(E.toLowerCase()),t=Z==="all"||s.status===Z,i=ee==="all"||s.industry===ee;return a&&t&&i}),[C,E,Z,ee]),de=r.useMemo(()=>{const s=(se-1)*ke;return $.slice(s,s+ke)},[$,se]),me=Math.ceil($.length/ke),Se=r.useMemo(()=>{const s={};return C.forEach(a=>{s[a.status]=(s[a.status]||0)+1}),Object.entries(s).map(([a,t])=>({name:We[a]||a,value:t,status:a}))},[C]),qs=r.useMemo(()=>{const s={};return C.filter(a=>a.status==="approved").forEach(a=>{s[a.industry||"Unknown"]=(s[a.industry||"Unknown"]||0)+1}),Object.entries(s).sort((a,t)=>t[1]-a[1]).slice(0,8).map(([a,t])=>({name:a,value:t}))},[C]),Ks=r.useMemo(()=>ut({start:jt(new Date,ce.days),end:new Date}).map(a=>{const t=M(a,"yyyy-MM-dd"),i=C.filter(f=>f.created_at&&f.created_at.startsWith(t)).length;return{name:M(a,"MMM dd"),value:i,fullDate:t}}),[C,ce]);r.useEffect(()=>{if(!Ne||!u)return;(async()=>{ms(!0);try{if(u==="pending_reviews"){const a=await _s();L(t=>({...t,pendingTalent:a}))}else if(u==="pending_sponsors"){const a=await ks();L(t=>({...t,pendingSponsors:a}))}else if(u==="approved_talent"){const a=C.filter(t=>t.status==="approved");if(console.log("Approved talent from cache:",a.length,"items"),a.length===0&&(p?.approved_talent||0)>0){console.log("Cache miss for approved talent, fetching fresh data...");const{data:t}=await Fe({status:"approved",limit:500});L(i=>({...i,approvedTalent:t||[]})),t&&t.length>0&&(Ze(i=>[...i.filter(b=>b.status!=="approved"),...t]),console.log("Updated allTalent state with fresh approved talent:",t.length,"items"))}else L(t=>({...t,approvedTalent:a}))}else if(u==="active_sponsors"){const a=ve.filter(t=>t.status==="approved");if(console.log("Approved sponsors from cache:",a.length,"items"),a.length===0&&(p?.approved_sponsors||0)>0){console.log("Cache miss for approved sponsors, fetching fresh data...");const{data:t}=await Ie({status:"approved",limit:500});L(i=>({...i,activeSponsors:t||[]})),t&&t.length>0&&(es(i=>[...i.filter(b=>b.status!=="approved"),...t]),console.log("Updated allSponsors state with fresh approved sponsors:",t.length,"items"))}else L(t=>({...t,activeSponsors:a}))}}catch(a){console.error("Error fetching stat listing data:",a)}finally{ms(!1)}})()},[Ne,u,C,ve,p]);const Gs=async()=>{if(y){g(!0);try{const{error:s}=await ka(y.id,{decision:rs,feedback_to_talent:ls||void 0,internal_notes:is||void 0});if(s)throw s;await D(),P(null),ns(""),cs("")}catch(s){w(s instanceof Error?s.message:"Failed to submit review")}finally{g(!1)}}},us=async s=>{if(as){g(!0);try{const{error:a}=await _a(as.id,s);if(a)throw a;await D(),ts(null)}catch(a){w(a instanceof Error?a.message:"Failed to review sponsor")}finally{g(!1)}}},Qs=async()=>{if(W){g(!0);try{const s=C.find(t=>t.id===W.id);s?.cv_file_path&&await Sa(Ta.TALENT_CV,s.cv_file_path);const{error:a}=await za(W.id);if(a)throw a;await D(),J(null)}catch(s){w(s instanceof Error?s.message:"Failed to delete profile")}finally{g(!1)}}},Xs=s=>{let a="",t="";a=[["ID","Name","Email","Headline","Industry","Seniority","Experience","Status","Submitted At","LinkedIn"].join(","),...$.map(j=>[j.id,`"${j.profiles?.full_name||""}"`,`"${j.profiles?.email||""}"`,`"${j.headline||""}"`,`"${j.industry||""}"`,`"${j.seniority_level||""}"`,j.years_experience,j.status,j.submitted_at,`"${j.linkedin_url||""}"`].join(","))].join(`
`),t=`talent-export-${M(new Date,"yyyy-MM-dd")}.csv`;const i=new Blob([a],{type:"text/csv"}),f=window.URL.createObjectURL(i),b=document.createElement("a");b.href=f,b.download=t,b.click(),window.URL.revokeObjectURL(f)};return z&&!d?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(V,{className:"animate-spin",size:32,style:{color:"hsl(var(--primary))"}})}):d?e.jsxs("div",{className:"min-h-screen pt-24 sm:pt-[112px]",style:{backgroundColor:"hsl(var(--background))"},children:[e.jsx("div",{className:"sticky top-24 sm:top-[112px] z-40 bg-white/90 backdrop-blur-md border-b border-gray-100 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-6 pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center shadow-sm",style:{backgroundColor:"hsl(var(--primary))"},children:e.jsx(Ns,{className:"text-white",size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-serif text-2xl font-bold tracking-tight",style:{color:"hsl(var(--foreground))"},children:"Admin Dashboard"}),e.jsx("p",{className:"text-xs uppercase tracking-wider font-semibold opacity-60",style:{color:"hsl(var(--muted-foreground))"},children:"RecommendHer Management"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Re,{value:ce.label,onValueChange:s=>{const a=Xe.find(t=>t.label===s);a&&Bs(a)},children:[e.jsxs(Le,{className:"w-40 bg-white/50 border-gray-200",children:[e.jsx(Ea,{size:16,className:"mr-2 opacity-50"}),e.jsx(Ee,{})]}),e.jsx(Pe,{children:Xe.map(s=>e.jsx(ae,{value:s.label,children:s.label},s.label))})]}),e.jsx(n,{variant:"outline",size:"icon",onClick:D,className:"bg-white/50 border-gray-200",children:e.jsx(sa,{size:18,className:z?"animate-spin":""})})]})]}),e.jsx(vs,{value:l,onValueChange:c,className:"w-full",children:e.jsxs(ca,{className:"bg-transparent h-auto p-0 flex flex-wrap gap-1 border-none justify-start",children:[e.jsx(K,{value:"overview",icon:Ns,label:"Overview"}),e.jsx(K,{value:"talent",icon:$e,label:"Talent",badge:p?.pending_talent_reviews}),e.jsx(K,{value:"sponsors",icon:Pa,label:"Sponsors",badge:p?.pending_sponsor_approvals}),e.jsx(K,{value:"requests",icon:Be,label:"Requests"}),e.jsx(K,{value:"messages",icon:Ve,label:"Messages",badge:X.filter(s=>s.status==="new").length||void 0}),e.jsx(K,{value:"analytics",icon:pa,label:"Analytics"})]})})]})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[N&&e.jsxs(da,{variant:"destructive",className:"mb-6 animate-in slide-in-from-top-2 duration-300",children:[e.jsx(He,{className:"h-4 w-4"}),e.jsx(ma,{children:N})]}),e.jsxs(vs,{value:l,className:"space-y-6 mt-4",children:[e.jsxs(H,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(fe,{icon:Ss,label:"Pending Reviews",value:p?.pending_talent_reviews||0,trend:p&&(p.pending_talent_reviews??0)>5?"up":"neutral",color:"orange",onClick:()=>{oe("pending_reviews"),A(!0)}}),e.jsx(fe,{icon:$e,label:"Pending Sponsors",value:p?.pending_sponsor_approvals||0,trend:"neutral",color:"blue",onClick:()=>{oe("pending_sponsors"),A(!0)}}),e.jsx(fe,{icon:Ua,label:"Approved Talent",value:p?.approved_talent||0,trend:"up",color:"green",onClick:()=>{oe("approved_talent"),A(!0)}}),e.jsx(fe,{icon:qe,label:"Active Sponsors",value:p?.approved_sponsors||0,trend:"up",color:"purple",onClick:()=>{oe("active_sponsors"),A(!0)}})]}),O.lastCheck&&e.jsxs(v,{className:"bg-amber-50 border-amber-200",children:[e.jsx(S,{className:"pb-3",children:e.jsxs(T,{className:"text-sm font-medium text-amber-800 flex items-center gap-2",children:[e.jsx(He,{size:16}),"Data Health Check"]})}),e.jsx(_,{children:e.jsxs("div",{className:"text-sm text-amber-700 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total talent profiles (raw):"}),e.jsx("span",{className:"font-medium",children:O.rawTalentCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status breakdown:"}),e.jsx("span",{className:"font-medium",children:Object.entries(O.statusBreakdown).map(([s,a])=>`${s}: ${a}`).join(", ")||"None"})]}),(p?.approved_talent||0)!==(O.statusBreakdown.approved||0)&&e.jsxs("div",{className:"text-red-600 font-medium mt-2",children:["⚠️ Inconsistency detected: Metrics shows ",p?.approved_talent," approved, but raw data shows ",O.statusBreakdown.approved||0," approved"]}),e.jsxs("div",{className:"text-xs text-amber-600 mt-2",children:["Last checked: ",O.lastCheck.toLocaleTimeString()]}),e.jsxs("div",{className:"pt-4 border-t border-amber-200 mt-4",children:[e.jsx("p",{className:"font-medium mb-2",children:"Database Recording Test:"}),U.result?e.jsx("div",{className:"space-y-1",children:U.result.success?e.jsxs("div",{className:"text-green-600",children:["✅ Test PASSED: Database is recording data",e.jsx("br",{}),"Count: ",U.result.beforeCount," → ",U.result.afterCount]}):e.jsxs("div",{className:"text-red-600",children:["❌ Test FAILED: ",U.result.error||"Unknown error"]})}):e.jsx("p",{className:"text-amber-600 text-xs",children:"Click button to test if database records data"}),e.jsx(n,{variant:"outline",size:"sm",className:"mt-2",onClick:Hs,disabled:U.running,children:U.running?e.jsxs(e.Fragment,{children:[e.jsx(V,{size:14,className:"mr-2 animate-spin"})," Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Fa,{size:14,className:"mr-2"})," Test DB Recording"]})})]})]})})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs(v,{className:"lg:col-span-2",children:[e.jsxs(S,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(T,{className:"font-serif text-lg",children:"Pending Reviews"}),e.jsx(re,{children:"Talent awaiting approval"})]}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>c("talent"),children:"View All"})]}),e.jsx(_,{children:e.jsx(Ue,{className:"h-80",children:e.jsxs("div",{className:"space-y-3",children:[ne.slice(0,10).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border hover:bg-gray-50 transition-colors",style:{borderColor:"hsl(var(--border))"},children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:"hsl(var(--primary))"},children:e.jsx("span",{className:"text-white font-medium",children:s.full_name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.full_name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.headline||"No headline"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(h,{variant:"secondary",className:"text-xs",children:s.industry}),e.jsx("span",{className:"text-xs text-gray-400",children:s.submitted_at&&M(G(s.submitted_at),"MMM dd")})]})]})]}),e.jsx(n,{size:"sm",onClick:()=>P(s),children:"Review"})]},s.id)),ne.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(q,{className:"mx-auto mb-4",size:48,style:{color:"hsl(var(--muted-foreground))"}}),e.jsx("p",{style:{color:"hsl(var(--muted-foreground))"},children:"No pending reviews"})]})]})})})]}),e.jsxs(v,{children:[e.jsxs(S,{children:[e.jsx(T,{className:"font-serif text-lg",children:"Recent Activity"}),e.jsx(re,{children:"Latest platform events"})]}),e.jsx(_,{children:e.jsx(Ue,{className:"h-80",children:e.jsx("div",{className:"space-y-4",children:Fs.slice(0,15).map(s=>e.jsxs("div",{className:"flex gap-3 text-sm",children:[e.jsx("div",{className:"mt-1",children:s.action.includes("APPROVE")?e.jsx(q,{size:16,className:"text-green-500"}):s.action.includes("REJECT")?e.jsx(je,{size:16,className:"text-red-500"}):e.jsx(Ia,{size:16,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.action.replace(/_/g," ")}),e.jsx("p",{className:"text-xs text-gray-500",children:s.entity_type}),e.jsx("p",{className:"text-xs text-gray-400",children:M(G(s.created_at),"MMM dd, HH:mm")})]})]},s.id))})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(Ye,{icon:aa,label:"New This Week",value:p?.talent_last_7_days||0}),e.jsx(Ye,{icon:Be,label:"Requests (30d)",value:p?.requests_last_30_days||0}),e.jsx(Ye,{icon:xt,label:"Pending Requests",value:p?.pending_requests||0})]})]}),e.jsxs(H,{value:"talent",className:"space-y-6",children:[e.jsx(v,{children:e.jsx(_,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ba,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx(fs,{placeholder:"Search by name, email, headline...",value:E,onChange:s=>we(s.target.value),className:"pl-10"})]}),e.jsxs(Re,{value:Z,onValueChange:Ce,children:[e.jsxs(Le,{className:"w-40",children:[e.jsx(Va,{size:16,className:"mr-2"}),e.jsx(Ee,{placeholder:"Status"})]}),e.jsxs(Pe,{children:[e.jsx(ae,{value:"all",children:"All Statuses"}),Object.entries(We).map(([s,a])=>e.jsx(ae,{value:s,children:a},s))]})]}),e.jsxs(Re,{value:ee,onValueChange:_e,children:[e.jsxs(Le,{className:"w-40",children:[e.jsx(et,{size:16,className:"mr-2"}),e.jsx(Ee,{placeholder:"Industry"})]}),e.jsxs(Pe,{children:[e.jsx(ae,{value:"all",children:"All Industries"}),Aa.map(s=>e.jsx(ae,{value:s,children:s},s))]})]}),e.jsxs(bs,{children:[e.jsx(ws,{asChild:!0,children:e.jsxs(n,{variant:"outline",children:[e.jsx(Ke,{size:16,className:"mr-2"}),"Export"]})}),e.jsxs(Cs,{children:[e.jsxs(te,{onClick:()=>Xs(),children:[e.jsx(at,{size:16,className:"mr-2"}),"Export to CSV"]}),e.jsxs(te,{onClick:()=>window.print(),children:[e.jsx(ct,{size:16,className:"mr-2"}),"Print"]})]})]}),e.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[e.jsx(n,{variant:ye==="list"?"default":"ghost",size:"sm",onClick:()=>os("list"),className:"rounded-none",children:e.jsx(Ha,{size:16})}),e.jsx(n,{variant:ye==="grid"?"default":"ghost",size:"sm",onClick:()=>os("grid"),className:"rounded-none",children:e.jsx(rt,{size:16})})]})]})})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-gray-500",children:C.length===0?"No talent data loaded":`Showing ${de.length} of ${$.length} results`}),(E||Z!=="all"||ee!=="all")&&e.jsxs(n,{variant:"ghost",size:"sm",onClick:()=>{we(""),Ce("all"),_e("all")},children:[e.jsx(je,{size:16,className:"mr-2"}),"Clear Filters"]})]}),ye==="list"?e.jsxs(v,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-50/50",children:[e.jsx("th",{className:"text-left p-4 font-medium text-sm",children:"Talent"}),e.jsx("th",{className:"text-left p-4 font-medium text-sm",children:"Headline"}),e.jsx("th",{className:"text-left p-4 font-medium text-sm",children:"Industry"}),e.jsx("th",{className:"text-left p-4 font-medium text-sm",children:"Seniority"}),e.jsx("th",{className:"text-left p-4 font-medium text-sm",children:"Status"}),e.jsx("th",{className:"text-left p-4 font-medium text-sm",children:"Submitted"}),e.jsx("th",{className:"text-right p-4 font-medium text-sm",children:"Actions"})]})}),e.jsx("tbody",{children:de.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50/50",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-gradient-to-br from-pink-500 to-orange-400 text-white font-medium",children:(s.profiles?.full_name||s.headline)?.charAt(0).toUpperCase()||"?"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.profiles?.full_name||s.headline||"Anonymous"}),e.jsx("p",{className:"text-sm text-gray-500",children:s.profiles?.email||"No email"})]})]})}),e.jsx("td",{className:"p-4 max-w-xs truncate",children:s.headline||"-"}),e.jsx("td",{className:"p-4",children:e.jsx(h,{variant:"outline",children:s.industry||"-"})}),e.jsx("td",{className:"p-4",children:s.seniority_level||"-"}),e.jsx("td",{className:"p-4",children:e.jsx(Q,{status:s.status,type:"talent"})}),e.jsx("td",{className:"p-4 text-sm text-gray-500",children:s.submitted_at?M(G(s.submitted_at),"MMM dd, yyyy"):"-"}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>Y(s),children:e.jsx(le,{size:16})}),s.status==="submitted"&&e.jsx(n,{size:"sm",onClick:()=>{const a=ne.find(t=>t.id===s.id);a&&P(a)},children:"Review"}),e.jsxs(bs,{children:[e.jsx(ws,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"sm",children:e.jsx(qa,{size:16})})}),e.jsxs(Cs,{align:"end",children:[e.jsxs(te,{onClick:()=>Y(s),children:[e.jsx(le,{size:16,className:"mr-2"}),"View Details"]}),s.cv_file_path&&e.jsx(te,{asChild:!0,children:e.jsxs("a",{href:`https://aku8v88g.us-east.insforge.app/storage/v1/object/public/talent-cvs/${s.cv_file_path}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Ke,{size:16,className:"mr-2"}),"Download CV"]})}),e.jsx(ua,{}),e.jsxs(te,{className:"text-red-600",onClick:()=>J({id:s.id,name:s.profiles?.full_name||"Unknown"}),children:[e.jsx(Je,{size:16,className:"mr-2"}),"Delete"]})]})]})]})})]},s.id))})]})}),de.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(dt,{size:48,className:"mx-auto mb-4 text-gray-300"}),C.length===0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"No talent data available"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Check database connection or RLS policies"})]}):$.length===0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"No talent found matching your criteria"}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>{we(""),Ce("all"),_e("all")},children:"Clear Filters"})]}):null]})]}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:de.map(s=>e.jsx(gt,{talent:s,onView:()=>Y(s),onReview:()=>{const a=ne.find(t=>t.id===s.id);a&&P(a)},onDelete:()=>J({id:s.id,name:s.profiles?.full_name||"Unknown"})},s.id))}),me>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(n,{variant:"outline",onClick:()=>xs(s=>Math.max(1,s-1)),disabled:se===1,children:[e.jsx(ta,{size:16,className:"mr-2"}),"Previous"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Page ",se," of ",me]}),e.jsxs(n,{variant:"outline",onClick:()=>xs(s=>Math.min(me,s+1)),disabled:se===me,children:["Next",e.jsx(ra,{size:16,className:"ml-2"})]})]})]}),e.jsx(H,{value:"sponsors",className:"space-y-6",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(v,{children:[e.jsx(S,{children:e.jsxs(T,{className:"font-serif text-lg flex items-center gap-2",children:[e.jsx(Ss,{size:20,className:"text-orange-500"}),"Pending Approvals",ie.length>0&&e.jsx(h,{variant:"destructive",children:ie.length})]})}),e.jsx(_,{children:e.jsxs("div",{className:"space-y-4",children:[ie.map(s=>e.jsxs("div",{className:"p-4 rounded-lg border hover:shadow-md transition-shadow",style:{borderColor:"hsl(var(--border))"},children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-500 text-white font-bold text-lg",children:(s.full_name??"").charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.full_name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email}),e.jsxs("p",{className:"text-sm",children:[s.title," at ",s.org_name]}),s.sponsor_type&&e.jsx(h,{variant:"secondary",className:"mt-1",children:Da.find(a=>a.value===s.sponsor_type)?.label})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{size:"sm",variant:"outline",onClick:()=>us("rejected"),children:[e.jsx(je,{size:16,className:"mr-1"}),"Reject"]}),e.jsxs(n,{size:"sm",onClick:()=>us("approved"),children:[e.jsx(q,{size:16,className:"mr-1"}),"Approve"]})]})]}),s.commitment_note&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded text-sm italic",children:['"',s.commitment_note,'"']})]},s.id)),ie.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(q,{className:"mx-auto mb-4 text-green-500",size:48}),e.jsx("p",{className:"text-gray-500",children:"No pending sponsor approvals"})]})]})})]}),e.jsxs(v,{children:[e.jsx(S,{children:e.jsx(T,{className:"font-serif text-lg",children:"All Sponsors"})}),e.jsx(_,{children:e.jsx(Ue,{className:"h-96",children:e.jsx("div",{className:"space-y-3",children:ve.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",style:{borderColor:"hsl(var(--border))"},children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.profiles?.full_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.org_name," • ",s.title]})]}),e.jsx(Q,{status:s.status,type:"sponsor"})]},s.id))})})})]})]})}),e.jsx(H,{value:"requests",className:"space-y-6",children:e.jsxs(v,{children:[e.jsxs(S,{children:[e.jsx(T,{className:"font-serif text-lg",children:"Recommendation Requests"}),e.jsx(re,{children:"Track sponsor requests to talent"})]}),e.jsx(_,{children:e.jsxs("div",{className:"space-y-4",children:[ss.map(s=>e.jsxs("div",{className:"p-4 rounded-lg border hover:shadow-md transition-shadow",style:{borderColor:"hsl(var(--border))"},children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mb-1",children:e.jsx(qe,{size:18,className:"text-blue-600"})}),e.jsx("p",{className:"text-xs text-gray-500",children:s.sponsor_name?.split(" ")[0]})]}),e.jsx(la,{className:"text-gray-300"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-pink-100 flex items-center justify-center mb-1",children:e.jsx($e,{size:18,className:"text-pink-600"})}),e.jsx("p",{className:"text-xs text-gray-500",children:s.talent_name?.split(" ")[0]})]})]}),e.jsx(Q,{status:s.status,type:"request"})]}),e.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:e.jsxs("p",{className:"text-sm italic",children:['"',s.message,'"']})}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500",children:[e.jsx("span",{children:M(G(s.created_at),"MMM dd, yyyy HH:mm")}),e.jsx("span",{children:s.sponsor_org})]})]},s.id)),ss.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Be,{className:"mx-auto mb-4 text-gray-300",size:48}),e.jsx("p",{className:"text-gray-500",children:"No recommendation requests yet"})]})]})})]})}),e.jsx(H,{value:"messages",className:"space-y-6",children:e.jsxs(v,{children:[e.jsxs(S,{children:[e.jsxs(T,{className:"font-serif text-lg flex items-center gap-2",children:[e.jsx(Ve,{size:20}),"Contact Submissions",X.filter(s=>s.status==="new").length>0&&e.jsxs(h,{variant:"destructive",children:[X.filter(s=>s.status==="new").length," new"]})]}),e.jsx(re,{children:"Messages from the contact form"})]}),e.jsx(_,{children:e.jsx("div",{className:"space-y-4",children:X.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ve,{className:"mx-auto mb-4 text-gray-300",size:48}),e.jsx("p",{className:"text-gray-500",children:"No contact submissions yet"})]}):X.map(s=>e.jsxs("div",{className:"p-4 rounded-lg border hover:shadow-md transition-shadow",style:{borderColor:"hsl(var(--border))"},children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-gradient-to-br from-green-500 to-teal-400 text-white font-bold",children:(s.full_name??"").charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.full_name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(h,{variant:"outline",children:s.inquiry_type}),s.organization&&e.jsxs("span",{className:"text-xs text-gray-400",children:["@ ",s.organization]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{status:s.status,type:"contact"}),s.status==="new"&&e.jsxs(n,{size:"sm",variant:"outline",onClick:async()=>{await wa(s.id,"read"),await D()},children:[e.jsx(q,{size:16,className:"mr-1"}),"Mark Read"]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.message})}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Received ",M(G(s.created_at),"MMM dd, yyyy HH:mm")]}),e.jsx("a",{href:`mailto:${s.email}?subject=Re: ${s.inquiry_type}`,className:"text-blue-600 hover:underline",children:"Reply via Email"})]})]},s.id))})})]})}),e.jsx(H,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(v,{children:[e.jsx(S,{children:e.jsx(T,{className:"font-serif text-lg",children:"Submissions Over Time"})}),e.jsx(_,{children:e.jsx("div",{className:"h-80",children:e.jsx(Ge,{width:"100%",height:"100%",children:e.jsxs(Oa,{data:Ks,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorSubmissions",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:R.primary,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:R.primary,stopOpacity:0})]})}),e.jsx(Ts,{strokeDasharray:"3 3",stroke:"#eee"}),e.jsx(zs,{dataKey:"name",tick:{fontSize:12}}),e.jsx(As,{tick:{fontSize:12}}),e.jsx(Qe,{}),e.jsx($a,{type:"monotone",dataKey:"value",stroke:R.primary,fillOpacity:1,fill:"url(#colorSubmissions)"})]})})})})]}),e.jsxs(v,{children:[e.jsx(S,{children:e.jsx(T,{className:"font-serif text-lg",children:"Talent by Status"})}),e.jsxs(_,{children:[e.jsx("div",{className:"h-80",children:e.jsx(Ge,{width:"100%",height:"100%",children:e.jsxs(Ka,{children:[e.jsx(Ga,{data:Se,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:Se.map((s,a)=>e.jsx(Qa,{fill:ge[a%ge.length]},`cell-${a}`))}),e.jsx(Qe,{})]})})}),e.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:Se.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ge[a%ge.length]}}),e.jsxs("span",{className:"text-sm",children:[s.name,": ",s.value]})]},s.name))})]})]}),e.jsxs(v,{className:"lg:col-span-2",children:[e.jsx(S,{children:e.jsx(T,{className:"font-serif text-lg",children:"Approved Talent by Industry"})}),e.jsx(_,{children:e.jsx("div",{className:"h-80",children:e.jsx(Ge,{width:"100%",height:"100%",children:e.jsxs(Wa,{data:qs,layout:"vertical",children:[e.jsx(Ts,{strokeDasharray:"3 3",stroke:"#eee"}),e.jsx(zs,{type:"number",tick:{fontSize:12}}),e.jsx(As,{dataKey:"name",type:"category",width:120,tick:{fontSize:12}}),e.jsx(Qe,{}),e.jsx(Xa,{dataKey:"value",fill:R.primary,radius:[0,4,4,0]})]})})})})]})]})})]})]}),e.jsx(xe,{open:!!y,onOpenChange:()=>P(null),children:e.jsxs(he,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(pe,{children:[e.jsx(ue,{className:"font-serif text-2xl",children:"Review Talent Profile"}),e.jsx(De,{children:"Review and approve or reject this talent submission"})]}),y&&e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsx("div",{className:"p-6 rounded-xl bg-gradient-to-br from-gray-50 to-white border",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center text-white font-bold text-2xl bg-gradient-to-br from-pink-500 to-orange-400",children:y.full_name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold",children:y.full_name}),e.jsx("p",{className:"text-gray-500",children:y.email}),e.jsx("p",{className:"mt-2 text-lg",children:y.headline}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[e.jsx(h,{children:y.industry}),e.jsx(h,{variant:"outline",children:y.seniority_level}),e.jsxs(h,{variant:"secondary",children:[y.years_experience," years exp"]})]})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[y.linkedin_url&&e.jsx(n,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:y.linkedin_url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(na,{size:18,className:"mr-2"}),"LinkedIn"]})}),y.cv_file_path&&e.jsx(n,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:`https://aku8v88g.us-east.insforge.app/storage/v1/object/public/talent-cvs/${y.cv_file_path}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Ds,{size:18,className:"mr-2"}),"View CV"]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Oe,{className:"text-base font-medium",children:"Decision"}),e.jsx("div",{className:"grid grid-cols-3 gap-3 mt-2",children:["approved","needs_changes","rejected"].map(s=>e.jsxs("button",{type:"button",onClick:()=>$s(s),className:`p-4 rounded-lg border-2 text-center transition-all ${rs===s?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,children:[s==="approved"&&e.jsx(q,{className:"mx-auto mb-2 text-green-500",size:24}),s==="needs_changes"&&e.jsx(nt,{className:"mx-auto mb-2 text-orange-500",size:24}),s==="rejected"&&e.jsx(je,{className:"mx-auto mb-2 text-red-500",size:24}),e.jsx("span",{className:"font-medium capitalize",children:s.replace("_"," ")})]},s))})]}),e.jsxs("div",{children:[e.jsx(Oe,{htmlFor:"feedback",children:"Feedback to Talent"}),e.jsx(ys,{id:"feedback",value:ls,onChange:s=>ns(s.target.value),placeholder:"This will be visible to the talent...",rows:3,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(Oe,{htmlFor:"internal",children:"Internal Notes (Admin Only)"}),e.jsx(ys,{id:"internal",value:is,onChange:s=>cs(s.target.value),placeholder:"Private notes for admin team...",rows:2,className:"mt-2"})]})]})]}),e.jsxs(Me,{children:[e.jsx(n,{variant:"outline",onClick:()=>P(null),children:"Cancel"}),e.jsx(n,{onClick:Gs,style:{backgroundColor:"hsl(var(--primary))"},children:"Submit Review"})]})]})}),e.jsx(xe,{open:!!m,onOpenChange:()=>Y(null),children:e.jsxs(he,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(pe,{children:e.jsx(ue,{className:"font-serif text-2xl",children:"Talent Profile Details"})}),m&&e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl bg-gradient-to-br from-pink-500 to-orange-400",children:m.profiles?.full_name?.charAt(0).toUpperCase()||"?"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold",children:m.profiles?.full_name}),e.jsx("p",{className:"text-lg text-gray-600",children:m.headline}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[e.jsx(Q,{status:m.status,type:"talent"}),e.jsx(h,{variant:"outline",children:m.industry}),e.jsx(h,{variant:"secondary",children:m.seniority_level})]})]})]}),e.jsx(ja,{}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(Ja,{size:18})," Contact"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Email:"})," ",m.profiles?.email]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"LinkedIn:"})," ",e.jsx("a",{href:m.linkedin_url??void 0,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"View Profile"})]}),m.portfolio_url&&e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Portfolio:"})," ",e.jsx("a",{href:m.portfolio_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"View"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(qe,{size:18})," Experience"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Years:"})," ",m.years_experience]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Industry:"})," ",m.industry]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Seniority:"})," ",m.seniority_level]})]})]})]}),m.bio&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Bio"}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:m.bio})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[m.functions&&m.functions.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Functions"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.functions.map(s=>e.jsx(h,{variant:"outline",children:s},s))})]}),m.skills&&m.skills.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.skills.map(s=>e.jsx(h,{variant:"secondary",children:s},s))})]})]}),m.cv_file_path&&e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ds,{size:24,className:"text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"CV/Resume"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Uploaded"})]})]}),e.jsx(n,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:`https://aku8v88g.us-east.insforge.app/storage/v1/object/public/talent-cvs/${m.cv_file_path}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Ke,{size:16,className:"mr-2"}),"Download"]})})]})]})]})}),e.jsx(xe,{open:!!W,onOpenChange:()=>J(null),children:e.jsxs(he,{className:"max-w-md",children:[e.jsxs(pe,{children:[e.jsxs(ue,{className:"font-serif text-xl text-red-600 flex items-center gap-2",children:[e.jsx(He,{size:24}),"Delete Profile?"]}),e.jsxs(De,{children:["This will permanently delete ",e.jsx("strong",{children:W?.name}),"'s profile and all associated data. This action cannot be undone."]})]}),e.jsxs(Me,{className:"gap-2",children:[e.jsx(n,{variant:"outline",onClick:()=>J(null),children:"Cancel"}),e.jsxs(n,{variant:"destructive",onClick:Qs,children:[e.jsx(Je,{size:16,className:"mr-2"}),"Delete Permanently"]})]})]})}),e.jsx(xe,{open:Ne,onOpenChange:A,children:e.jsxs(he,{className:"max-w-3xl max-h-[85vh] overflow-y-auto",children:[e.jsxs(pe,{children:[e.jsxs(ue,{className:"font-serif text-2xl",children:[u==="pending_reviews"&&"Pending Reviews",u==="pending_sponsors"&&"Pending Sponsors",u==="approved_talent"&&"Approved Talent",u==="active_sponsors"&&"Active Sponsors"]}),e.jsx(De,{children:ds?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(V,{size:16,className:"animate-spin"}),"Loading data..."]}):e.jsxs(e.Fragment,{children:[u==="pending_reviews"&&e.jsxs("span",{children:[k.pendingTalent.length," talent awaiting approval"]}),u==="pending_sponsors"&&e.jsxs("span",{children:[k.pendingSponsors.length," sponsors awaiting approval"]}),u==="approved_talent"&&e.jsxs("span",{children:[k.approvedTalent.length," approved talent profiles"]}),u==="active_sponsors"&&e.jsxs("span",{children:[k.activeSponsors.length," active sponsor profiles"]})]})})]}),e.jsx("div",{className:"space-y-3 py-4",children:ds?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(V,{size:32,className:"animate-spin text-primary"})}):e.jsxs(e.Fragment,{children:[u==="pending_reviews"&&(k.pendingTalent.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No pending reviews"}):k.pendingTalent.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-orange-400 text-white flex items-center justify-center font-medium",children:s.full_name?.charAt(0).toUpperCase()||"?"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.full_name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email}),e.jsx("p",{className:"text-xs text-gray-400 truncate max-w-md",children:s.headline})]})]}),e.jsx(n,{size:"sm",onClick:()=>{P(s),A(!1)},children:"Review"})]},s.id))),u==="pending_sponsors"&&(k.pendingSponsors.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No pending sponsors"}):k.pendingSponsors.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-400 text-white flex items-center justify-center font-medium",children:s.company_name?.charAt(0).toUpperCase()||"?"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.company_name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.contact_email}),e.jsx("p",{className:"text-xs text-gray-400",children:s.industry})]})]}),e.jsx(n,{size:"sm",onClick:()=>{ts(s),A(!1)},children:"Review"})]},s.id))),u==="approved_talent"&&(k.approvedTalent.length===0?e.jsxs("div",{className:"text-center py-8 space-y-4",children:[e.jsx("p",{className:"text-gray-500",children:"No approved talent found"}),(p?.approved_talent||0)>0&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm text-amber-600",children:["Note: Metrics show ",p?.approved_talent," approved talent, but none loaded."]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{D(),Fe({status:"approved",limit:500}).then(({data:s})=>{L(a=>({...a,approvedTalent:s||[]}))})},children:[e.jsx(V,{size:14,className:"mr-2"}),"Refresh Data"]})]})]}):k.approvedTalent.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-teal-400 text-white flex items-center justify-center font-medium",children:s.profiles?.full_name?.charAt(0).toUpperCase()||"?"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.profiles?.full_name}),e.jsx("p",{className:"text-sm text-gray-500 truncate max-w-md",children:s.headline}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(h,{variant:"outline",className:"text-xs",children:s.industry}),e.jsx(h,{variant:"secondary",className:"text-xs",children:s.seniority_level})]})]})]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{Y(s),A(!1)},children:[e.jsx(le,{size:16,className:"mr-1"}),"View"]})]},s.id))),u==="active_sponsors"&&(k.activeSponsors.length===0?e.jsxs("div",{className:"text-center py-8 space-y-4",children:[e.jsx("p",{className:"text-gray-500",children:"No active sponsors found"}),(p?.approved_sponsors||0)>0&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm text-amber-600",children:["Note: Metrics show ",p?.approved_sponsors," approved sponsors, but none loaded."]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{D(),Ie({status:"approved",limit:500}).then(({data:s})=>{L(a=>({...a,activeSponsors:s||[]}))})},children:[e.jsx(V,{size:14,className:"mr-2"}),"Refresh Data"]})]})]}):k.activeSponsors.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-400 text-white flex items-center justify-center font-medium",children:s.company_name?.charAt(0).toUpperCase()||"?"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.company_name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.contact_email}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(h,{variant:"outline",className:"text-xs",children:s.industry}),e.jsx(h,{variant:"secondary",className:"text-xs",children:s.company_size})]})]})]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>c("sponsors"),children:[e.jsx(le,{size:16,className:"mr-1"}),"View"]})]},s.id)))]})}),e.jsxs(Me,{children:[e.jsx(n,{variant:"outline",onClick:()=>A(!1),children:"Close"}),e.jsx(n,{onClick:()=>{c(u==="pending_reviews"||u==="approved_talent"?"talent":"sponsors"),A(!1)},children:"View Full Page"})]})]})})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{backgroundColor:"hsl(var(--background))"},children:e.jsxs(v,{className:"w-full max-w-md",children:[e.jsxs(S,{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:"hsl(var(--primary))"},children:e.jsx(La,{className:"text-white",size:32})}),e.jsx(T,{className:"font-serif text-2xl",children:"Admin Login"}),e.jsx(re,{children:"Enter password to access admin dashboard"})]}),e.jsxs(_,{children:[e.jsxs("form",{onSubmit:s=>{s.preventDefault(),I===Ls?o(!0):w("Incorrect password")},className:"space-y-4",children:[e.jsx(fs,{type:"password",placeholder:"Enter admin password",value:I,onChange:s=>Rs(s.target.value),className:"h-12"}),e.jsx(n,{type:"submit",className:"w-full h-12",style:{backgroundColor:"hsl(var(--primary))"},children:"Login"})]}),N&&e.jsx("p",{className:"text-center mt-4 text-sm text-red-500",children:N}),e.jsxs("p",{className:"text-center mt-4 text-xs text-gray-500",children:["Default: ",e.jsx("code",{children:"admin123"})]})]})]})})},fe=({icon:l,label:c,value:d,trend:o,color:z,onClick:g})=>{const w={orange:{bg:"bg-orange-100",text:"text-orange-600",icon:"text-orange-500"},blue:{bg:"bg-blue-100",text:"text-blue-600",icon:"text-blue-500"},green:{bg:"bg-green-100",text:"text-green-600",icon:"text-green-500"},purple:{bg:"bg-purple-100",text:"text-purple-600",icon:"text-purple-500"}}[z];return e.jsx(v,{className:`${g?"cursor-pointer hover:shadow-md hover:border-primary/50 transition-all":""}`,onClick:g,children:e.jsxs(_,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`p-3 rounded-lg ${w.bg}`,children:e.jsx(l,{className:w.icon,size:24})}),o!=="neutral"&&e.jsx("div",{className:`flex items-center gap-1 text-sm ${o==="up"?"text-green-600":"text-red-600"}`,children:o==="up"?e.jsx(ia,{size:16}):e.jsx(Ya,{size:16})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-3xl font-bold",children:d}),e.jsx("p",{className:"text-sm text-gray-500",children:c})]})]})})},Ye=({icon:l,label:c,value:d})=>e.jsxs(v,{className:"flex items-center gap-4 p-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-100",children:e.jsx(l,{className:"text-gray-600",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:d}),e.jsx("p",{className:"text-sm text-gray-500",children:c})]})]}),Q=({status:l})=>{const c={approved:"default",rejected:"destructive",submitted:"secondary",vetted:"outline",draft:"outline",pending:"outline",requested:"secondary",accepted:"default",declined:"destructive",intro_sent:"secondary",closed:"outline",new:"destructive",read:"secondary",replied:"default",archived:"outline"},d={approved:"bg-green-100 text-green-700 hover:bg-green-100",submitted:"bg-orange-100 text-orange-700 hover:bg-orange-100",vetted:"bg-blue-100 text-blue-700 hover:bg-blue-100",pending:"bg-yellow-100 text-yellow-700 hover:bg-yellow-100",requested:"bg-purple-100 text-purple-700 hover:bg-purple-100",accepted:"bg-green-100 text-green-700 hover:bg-green-100",intro_sent:"bg-blue-100 text-blue-700 hover:bg-blue-100",read:"bg-blue-100 text-blue-700 hover:bg-blue-100",replied:"bg-green-100 text-green-700 hover:bg-green-100"},o=c[l]||"outline",z=d[l]||"",g={...We,...Ra,...Ma,new:"New",read:"Read",replied:"Replied",archived:"Archived"};return e.jsx(h,{variant:o,className:z,children:g[l]||l})},gt=({talent:l,onView:c,onReview:d,onDelete:o})=>e.jsx(v,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-lg bg-gradient-to-br from-pink-500 to-orange-400",children:(l.profiles?.full_name||l.headline)?.charAt(0).toUpperCase()||"?"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:l.profiles?.full_name||l.headline||"Anonymous"}),e.jsx("p",{className:"text-sm text-gray-500",children:l.profiles?.email||"No email"})]})]}),e.jsx(Q,{status:l.status,type:"talent"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm line-clamp-2",children:l.headline||"No headline"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[l.industry&&e.jsx(h,{variant:"outline",children:l.industry}),l.seniority_level&&e.jsx(h,{variant:"secondary",children:l.seniority_level})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[e.jsx("span",{className:"text-xs text-gray-500",children:l.submitted_at?M(G(l.submitted_at),"MMM dd, yyyy"):"Not submitted"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:c,children:e.jsx(le,{size:16})}),l.status==="submitted"&&e.jsx(n,{size:"sm",onClick:d,children:"Review"}),e.jsx(n,{variant:"ghost",size:"sm",onClick:o,className:"text-red-600 hover:text-red-700",children:e.jsx(Je,{size:16})})]})]})]})});export{dr as default};
