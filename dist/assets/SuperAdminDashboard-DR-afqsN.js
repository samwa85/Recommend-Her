import{c as es,r as t,i as Be,j as e,a as ke,h as Le,B as c,E as ce}from"./index-qoOME8mY.js";import{I as ie}from"./input-COdB9PMO.js";import{B as R}from"./badge-DS90lYj3.js";import{C,a as q,b as $,d as X}from"./index-CsKqCIzL.js";import{T as ss,a as ts,c as oe,b as de}from"./tabs-vgetrDNz.js";import{D as me,a as xe,b as he,c as ue}from"./dialog-au1fJFZW.js";import{A as as,a as ls}from"./alert-CY_hLXsn.js";import{u as rs,S as pe,a as je,b as fe,c as ge,d}from"./select-D7YwqkvP.js";import{u as ns,c as cs,a as Ie,b as is}from"./index-EHAx_rFm.js";import{u as os}from"./index-C7Xr5Zjk.js";import{s as U,g as ds,f as ms,h as xs,a as hs,L as _e,m as Ae,l as Te}from"./supabase-BKB3e8Ya.js";import{a as us,B as ps}from"./storage-BYjA6cKK.js";import{B as js}from"./bell-B4cYDKmo.js";import{C as fs}from"./circle-alert-CmZxWWpu.js";import{U as gs}from"./users-B7vsRM7J.js";import{B as Ns}from"./building-2-LyC4uWQT.js";import{M as Re}from"./mail-hjAr2Bly.js";import{S as Ne}from"./search-BPQDrF8n.js";import{F as be}from"./funnel-UMXFXVhw.js";import{D as K}from"./download-DlB-a-Lp.js";import{C as W}from"./circle-check-big-BDlXIym8.js";import{C as Ee}from"./circle-x-CQU312bK.js";import"./tslib.es6-ByNH4KU3.js";import"./index-Bq8Hpwnx.js";const bs=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],vs=es("bell-ring",bs);var G="Switch",[ws]=cs(G),[ys,Ss]=ws(G),Fe=t.forwardRef((i,m)=>{const{__scopeSwitch:x,name:v,checked:g,defaultChecked:N,required:u,disabled:y,value:p="on",onCheckedChange:E,form:j,...D}=i,[f,k]=t.useState(null),b=Be(m,_=>k(_)),B=t.useRef(!1),w=f?j||!!f.closest("form"):!0,[L,I]=ns({prop:g,defaultProp:N??!1,onChange:E,caller:G});return e.jsxs(ys,{scope:x,checked:L,disabled:y,children:[e.jsx(Ie.button,{type:"button",role:"switch","aria-checked":L,"aria-required":u,"data-state":Me(L),"data-disabled":y?"":void 0,disabled:y,value:p,...D,ref:b,onClick:is(i.onClick,_=>{I(F=>!F),w&&(B.current=_.isPropagationStopped(),B.current||_.stopPropagation())})}),w&&e.jsx(Ue,{control:f,bubbles:!B.current,name:v,value:p,checked:L,required:u,disabled:y,form:j,style:{transform:"translateX(-100%)"}})]})});Fe.displayName=G;var Pe="SwitchThumb",ze=t.forwardRef((i,m)=>{const{__scopeSwitch:x,...v}=i,g=Ss(Pe,x);return e.jsx(Ie.span,{"data-state":Me(g.checked),"data-disabled":g.disabled?"":void 0,...v,ref:m})});ze.displayName=Pe;var Cs="SwitchBubbleInput",Ue=t.forwardRef(({__scopeSwitch:i,control:m,checked:x,bubbles:v=!0,...g},N)=>{const u=t.useRef(null),y=Be(u,N),p=rs(x),E=os(m);return t.useEffect(()=>{const j=u.current;if(!j)return;const D=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(D,"checked").set;if(p!==x&&k){const b=new Event("click",{bubbles:v});k.call(j,x),j.dispatchEvent(b)}},[p,x,v]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:x,...g,tabIndex:-1,ref:y,style:{...g.style,...E,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Ue.displayName=Cs;function Me(i){return i?"checked":"unchecked"}var ks=Fe,Ls=ze;function De({className:i,...m}){return e.jsx(ks,{"data-slot":"switch",className:ke("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",i),...m,children:e.jsx(Ls,{"data-slot":"switch-thumb",className:ke("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function Ys(){const[i,m]=t.useState(!0),[x,v]=t.useState(!1),[g,N]=t.useState(null),[u,y]=t.useState([]),[p,E]=t.useState([]),[j,D]=t.useState([]),[f,k]=t.useState(""),[b,B]=t.useState(""),[w,L]=t.useState(""),[I,_]=t.useState("all"),[F,Oe]=t.useState("all"),[J,Ve]=t.useState("all"),[r,M]=t.useState(null),[h,O]=t.useState(null),[o,V]=t.useState(null),[Q,He]=t.useState(!0),[Y,qe]=t.useState(!0),[P,$e]=t.useState([]),[Xe,ve]=t.useState(!1),[Ke,we]=t.useState(new Date),S=t.useRef(null),z=t.useRef([]);t.useEffect(()=>(We(),()=>{S.current&&clearInterval(S.current),z.current.forEach(s=>s.unsubscribe())}),[]),t.useEffect(()=>(Q?S.current=setInterval(()=>{H()},3e4):S.current&&(clearInterval(S.current),S.current=null),()=>{S.current&&clearInterval(S.current)}),[Q]),t.useEffect(()=>{if(!Y){z.current.forEach(n=>n.unsubscribe()),z.current=[];return}const s=U.channel("talent-changes").on("postgres_changes",{event:"*",schema:"public",table:"talent_profiles"},n=>{console.log("[Realtime] Talent change:",n),Z("talent_profiles",n.eventType),H()}).subscribe(),a=U.channel("sponsor-changes").on("postgres_changes",{event:"*",schema:"public",table:"sponsor_profiles"},n=>{console.log("[Realtime] Sponsor change:",n),Z("sponsor_profiles",n.eventType),H()}).subscribe(),l=U.channel("contact-changes").on("postgres_changes",{event:"*",schema:"public",table:"contact_submissions"},n=>{console.log("[Realtime] Contact change:",n),Z("contact_submissions",n.eventType),H()}).subscribe();return z.current=[{unsubscribe:()=>s.unsubscribe()},{unsubscribe:()=>a.unsubscribe()},{unsubscribe:()=>l.unsubscribe()}],()=>{z.current.forEach(n=>n.unsubscribe())}},[Y]);const Z=t.useCallback((s,a)=>{const l={table:s,type:a,timestamp:new Date};$e(n=>[l,...n].slice(0,5)),ve(!0),setTimeout(()=>ve(!1),3e3)},[]),We=async()=>{try{(await ds())?.role==="admin"?A():(N("Access denied. Admin privileges required."),m(!1))}catch{N("Authentication error. Please log in."),m(!1)}},A=async()=>{m(!0),N(null);try{await ye(),we(new Date)}catch(s){console.error("[SuperAdmin] Load error:",s),N("Failed to load data: "+(s instanceof Error?s.message:"Unknown error"))}finally{m(!1)}},H=async()=>{if(!x){v(!0);try{await ye(),we(new Date)}catch(s){console.error("[SuperAdmin] Silent refresh error:",s)}finally{v(!1)}}},ye=async()=>{console.log("[SuperAdmin] Fetching fresh data...");const[s,a,l]=await Promise.all([ms({limit:1e3}),xs({limit:1e3}),U.from("v_contact_submissions").select("*").order("created_at",{ascending:!1})]);s.data&&y(s.data),a.data&&E(a.data),l.data&&D(l.data),s.error&&console.error("[SuperAdmin] Talent error:",s.error),a.error&&console.error("[SuperAdmin] Sponsor error:",a.error),l.error&&console.error("[SuperAdmin] Contact error:",l.error)},ee=async(s,a)=>{try{const{error:l}=await U.from("contact_submissions").update({status:a}).eq("id",s);if(l)throw l}catch(l){console.error("Failed to update contact status:",l),N("Failed to update contact status")}},se=u.filter(s=>{const a=!f||s.headline?.toLowerCase().includes(f.toLowerCase())||s.industry?.toLowerCase().includes(f.toLowerCase())||s.profiles?.full_name?.toLowerCase().includes(f.toLowerCase())||s.profiles?.email?.toLowerCase().includes(f.toLowerCase()),l=I==="all"||s.status===I;return a&&l}),te=p.filter(s=>{const a=!b||s.org_name?.toLowerCase().includes(b.toLowerCase())||s.industry?.toLowerCase().includes(b.toLowerCase())||s.profiles?.full_name?.toLowerCase().includes(b.toLowerCase())||s.profiles?.email?.toLowerCase().includes(b.toLowerCase()),l=F==="all"||s.status===F;return a&&l}),ae=j.filter(s=>{const a=!w||s.full_name?.toLowerCase().includes(w.toLowerCase())||s.email?.toLowerCase().includes(w.toLowerCase())||s.inquiry_type?.toLowerCase().includes(w.toLowerCase())||s.message?.toLowerCase().includes(w.toLowerCase()),l=J==="all"||s.status===J;return a&&l}),T=s=>({approved:"bg-green-100 text-green-700",rejected:"bg-red-100 text-red-700",pending:"bg-yellow-100 text-yellow-700",submitted:"bg-blue-100 text-blue-700",new:"bg-blue-100 text-blue-700",read:"bg-gray-100 text-gray-700",replied:"bg-green-100 text-green-700",archived:"bg-gray-100 text-gray-700"})[s]||"bg-gray-100 text-gray-700",Ge=async s=>{if(s)try{const a=await us(ps.TALENT_CV,s,300);a&&window.open(a,"_blank")}catch(a){console.error("Failed to get download URL:",a),N("Failed to generate download link")}},le=(s,a)=>{if(s.length===0)return;const l=Object.keys(s[0]).join(","),n=s.map(Ze=>Object.values(Ze).map(ne=>typeof ne=="string"?`"${ne.replace(/"/g,'""')}"`:ne).join(",")),Qe=[l,...n].join(`
`),Ye=new Blob([Qe],{type:"text/csv"}),Ce=window.URL.createObjectURL(Ye),re=document.createElement("a");re.href=Ce,re.download=`${a}-${new Date().toISOString().split("T")[0]}.csv`,re.click(),window.URL.revokeObjectURL(Ce)},Se=s=>({talent_profiles:"Talent",sponsor_profiles:"Sponsor",contact_submissions:"Contact"})[s]||s,Je=s=>{switch(s){case"INSERT":return"+";case"UPDATE":return"â†»";case"DELETE":return"-"}};return i?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(hs,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[Xe&&P.length>0&&e.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-top-2",children:e.jsxs("div",{className:"bg-green-600 text-white px-4 py-3 rounded-lg shadow-lg flex items-center gap-2",children:[e.jsx(vs,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"New data received!"}),e.jsxs("p",{className:"text-sm text-green-100",children:[Se(P[0].table)," ",P[0].type.toLowerCase(),"ed"]})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Super Admin Dashboard"}),e.jsx("p",{className:"text-gray-500",children:"Manage all talent and sponsors"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-2 rounded-lg border",children:[e.jsx(De,{id:"auto-refresh",checked:Q,onCheckedChange:He}),e.jsx(_e,{htmlFor:"auto-refresh",className:"text-sm cursor-pointer",children:"Auto-refresh (30s)"}),x&&e.jsx(Le,{className:"w-4 h-4 animate-spin text-primary"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-2 rounded-lg border",children:[e.jsx(De,{id:"realtime",checked:Y,onCheckedChange:qe}),e.jsxs(_e,{htmlFor:"realtime",className:"text-sm cursor-pointer flex items-center gap-1",children:[e.jsx(js,{className:"w-3 h-3"}),"Realtime"]})]}),e.jsxs(c,{variant:"outline",onClick:A,disabled:i,children:[e.jsx(Le,{className:`w-4 h-4 mr-2 ${i?"animate-spin":""}`}),"Refresh"]})]})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Last updated: ",Ke.toLocaleTimeString(),P.length>0&&e.jsxs("span",{className:"ml-4 text-xs",children:["Recent changes:",P.slice(0,3).map((s,a)=>e.jsxs("span",{className:"ml-2 inline-flex items-center gap-1 bg-gray-100 px-2 py-0.5 rounded",children:[e.jsx("span",{className:"font-bold",children:Je(s.type)}),Se(s.table)]},a))]})]}),g&&e.jsxs(as,{variant:"destructive",children:[e.jsx(fs,{className:"w-4 h-4"}),e.jsx(ls,{children:g})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(C,{children:[e.jsx(q,{className:"pb-2",children:e.jsx($,{className:"text-sm font-medium text-gray-500",children:"Total Talent"})}),e.jsxs(X,{children:[e.jsx("div",{className:"text-3xl font-bold",children:u.length}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[u.filter(s=>s.status==="submitted"||s.status==="vetted").length," pending review"]})]})]}),e.jsxs(C,{children:[e.jsx(q,{className:"pb-2",children:e.jsx($,{className:"text-sm font-medium text-gray-500",children:"Total Sponsors"})}),e.jsxs(X,{children:[e.jsx("div",{className:"text-3xl font-bold",children:p.length}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[p.filter(s=>s.status==="pending").length," pending approval"]})]})]}),e.jsxs(C,{children:[e.jsx(q,{className:"pb-2",children:e.jsx($,{className:"text-sm font-medium text-gray-500",children:"New Contacts"})}),e.jsxs(X,{children:[e.jsx("div",{className:"text-3xl font-bold",children:j.filter(s=>s.status==="new").length}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["of ",j.length," total submissions"]})]})]}),e.jsxs(C,{children:[e.jsx(q,{className:"pb-2",children:e.jsx($,{className:"text-sm font-medium text-gray-500",children:"Approved"})}),e.jsxs(X,{children:[e.jsx("div",{className:"text-3xl font-bold",children:u.filter(s=>s.status==="approved").length+p.filter(s=>s.status==="approved").length}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total approved profiles"})]})]})]}),e.jsxs(ss,{defaultValue:"talent",className:"space-y-4",children:[e.jsxs(ts,{className:"grid w-full grid-cols-3 lg:w-auto",children:[e.jsxs(oe,{value:"talent",className:"flex items-center gap-2",children:[e.jsx(gs,{className:"w-4 h-4"}),"Talent (",se.length,")"]}),e.jsxs(oe,{value:"sponsors",className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"w-4 h-4"}),"Sponsors (",te.length,")"]}),e.jsxs(oe,{value:"contacts",className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4"}),"Contacts (",ae.length,")"]})]}),e.jsxs(de,{value:"talent",className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(ie,{placeholder:"Search talent...",value:f,onChange:s=>k(s.target.value),className:"pl-10"})]}),e.jsxs(pe,{value:I,onValueChange:_,children:[e.jsxs(je,{className:"w-[180px]",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),e.jsx(fe,{placeholder:"Filter by status"})]}),e.jsxs(ge,{children:[e.jsx(d,{value:"all",children:"All Status"}),e.jsx(d,{value:"pending",children:"Pending"}),e.jsx(d,{value:"approved",children:"Approved"}),e.jsx(d,{value:"rejected",children:"Rejected"})]})]}),e.jsxs(c,{variant:"outline",onClick:()=>le(u,"talent"),children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Export"]})]}),e.jsx(C,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 font-medium",children:"Name/Email"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Headline"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Industry"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Status"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Date"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:se.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-8 text-center text-gray-500",children:"No talent profiles found"})}):se.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsxs("td",{className:"p-3",children:[e.jsx("div",{className:"font-medium",children:s.profiles?.full_name||"N/A"}),e.jsx("div",{className:"text-gray-500 text-xs",children:s.profiles?.email||"N/A"})]}),e.jsx("td",{className:"p-3 text-sm",children:s.headline||"-"}),e.jsx("td",{className:"p-3 text-sm",children:s.industry||"-"}),e.jsx("td",{className:"p-3",children:e.jsx(R,{className:T(s.status),children:s.status})}),e.jsx("td",{className:"p-3 text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"flex gap-2",children:e.jsx(c,{size:"sm",variant:"ghost",onClick:()=>M(s),children:e.jsx(ce,{className:"w-4 h-4"})})})})]},s.id))})]})})})]}),e.jsxs(de,{value:"sponsors",className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(ie,{placeholder:"Search sponsors...",value:b,onChange:s=>B(s.target.value),className:"pl-10"})]}),e.jsxs(pe,{value:F,onValueChange:Oe,children:[e.jsxs(je,{className:"w-[180px]",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),e.jsx(fe,{placeholder:"Filter by status"})]}),e.jsxs(ge,{children:[e.jsx(d,{value:"all",children:"All Status"}),e.jsx(d,{value:"pending",children:"Pending"}),e.jsx(d,{value:"approved",children:"Approved"}),e.jsx(d,{value:"rejected",children:"Rejected"})]})]}),e.jsxs(c,{variant:"outline",onClick:()=>le(p,"sponsors"),children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Export"]})]}),e.jsx(C,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 font-medium",children:"Name/Email"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Organization"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Type"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Status"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Date"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:te.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-8 text-center text-gray-500",children:"No sponsors found"})}):te.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsxs("td",{className:"p-3",children:[e.jsx("div",{className:"font-medium",children:s.profiles?.full_name||"N/A"}),e.jsx("div",{className:"text-gray-500 text-xs",children:s.profiles?.email||"N/A"})]}),e.jsx("td",{className:"p-3 text-sm",children:s.org_name||"-"}),e.jsx("td",{className:"p-3 text-sm",children:s.sponsor_type||"-"}),e.jsx("td",{className:"p-3",children:e.jsx(R,{className:T(s.status),children:s.status})}),e.jsx("td",{className:"p-3 text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"flex gap-2",children:e.jsx(c,{size:"sm",variant:"ghost",onClick:()=>O(s),children:e.jsx(ce,{className:"w-4 h-4"})})})})]},s.id))})]})})})]}),e.jsxs(de,{value:"contacts",className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(ie,{placeholder:"Search contacts...",value:w,onChange:s=>L(s.target.value),className:"pl-10"})]}),e.jsxs(pe,{value:J,onValueChange:Ve,children:[e.jsxs(je,{className:"w-[180px]",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),e.jsx(fe,{placeholder:"Filter by status"})]}),e.jsxs(ge,{children:[e.jsx(d,{value:"all",children:"All Status"}),e.jsx(d,{value:"new",children:"New"}),e.jsx(d,{value:"read",children:"Read"}),e.jsx(d,{value:"replied",children:"Replied"}),e.jsx(d,{value:"archived",children:"Archived"})]})]}),e.jsxs(c,{variant:"outline",onClick:()=>le(j,"contacts"),children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Export"]})]}),e.jsx(C,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 font-medium",children:"Name/Email"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Type"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Organization"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Status"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Date"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:ae.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-8 text-center text-gray-500",children:"No contact submissions found"})}):ae.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsxs("td",{className:"p-3",children:[e.jsx("div",{className:"font-medium",children:s.full_name}),e.jsx("div",{className:"text-gray-500 text-xs",children:s.email})]}),e.jsx("td",{className:"p-3 text-sm",children:s.inquiry_type}),e.jsx("td",{className:"p-3 text-sm",children:s.organization||"-"}),e.jsx("td",{className:"p-3",children:e.jsx(R,{className:T(s.status),children:s.status})}),e.jsx("td",{className:"p-3 text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{size:"sm",variant:"ghost",onClick:()=>V(s),children:e.jsx(ce,{className:"w-4 h-4"})}),s.status==="new"&&e.jsx(c,{size:"sm",className:"bg-blue-600",onClick:()=>ee(s.id,"read"),children:e.jsx(W,{className:"w-4 h-4"})})]})})]},s.id))})]})})})]})]}),e.jsx(me,{open:!!r,onOpenChange:()=>M(null),children:e.jsxs(xe,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(he,{children:e.jsx(ue,{children:"Talent Profile Details"})}),r&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Name"}),e.jsx("p",{className:"font-medium",children:r.profiles?.full_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{className:"font-medium",children:r.profiles?.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Headline"}),e.jsx("p",{className:"font-medium",children:r.headline||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Industry"}),e.jsx("p",{className:"font-medium",children:r.industry||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Status"}),e.jsx(R,{className:T(r.status),children:r.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Submitted"}),e.jsx("p",{className:"font-medium",children:new Date(r.created_at).toLocaleString()})]})]}),r.bio&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Bio"}),e.jsx("p",{className:"mt-1 text-sm",children:r.bio})]}),r.cv_file_path&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"CV"}),e.jsxs(c,{variant:"outline",size:"sm",className:"mt-1",onClick:()=>Ge(r.cv_file_path),children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Download CV"]})]}),(r.status==="submitted"||r.status==="vetted")&&e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsxs(c,{className:"flex-1 bg-green-600 hover:bg-green-700",onClick:async()=>{await Ae(r.id,{decision:"approved"}),M(null),A()},children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Approve"]}),e.jsxs(c,{className:"flex-1 bg-red-600 hover:bg-red-700",onClick:async()=>{await Ae(r.id,{decision:"rejected"}),M(null),A()},children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Reject"]})]})]})]})}),e.jsx(me,{open:!!h,onOpenChange:()=>O(null),children:e.jsxs(xe,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(he,{children:e.jsx(ue,{children:"Sponsor Details"})}),h&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Name"}),e.jsx("p",{className:"font-medium",children:h.profiles?.full_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{className:"font-medium",children:h.profiles?.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Organization"}),e.jsx("p",{className:"font-medium",children:h.org_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Type"}),e.jsx("p",{className:"font-medium",children:h.sponsor_type||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Status"}),e.jsx(R,{className:T(h.status),children:h.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Submitted"}),e.jsx("p",{className:"font-medium",children:new Date(h.created_at).toLocaleString()})]})]}),h.status==="pending"&&e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsxs(c,{className:"flex-1 bg-green-600 hover:bg-green-700",onClick:async()=>{await Te(h.id,"approved"),O(null),A()},children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Approve"]}),e.jsxs(c,{className:"flex-1 bg-red-600 hover:bg-red-700",onClick:async()=>{await Te(h.id,"rejected"),O(null),A()},children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Reject"]})]})]})]})}),e.jsx(me,{open:!!o,onOpenChange:()=>V(null),children:e.jsxs(xe,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(he,{children:e.jsx(ue,{children:"Contact Submission"})}),o&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Name"}),e.jsx("p",{className:"font-medium",children:o.full_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{className:"font-medium",children:o.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Type"}),e.jsx("p",{className:"font-medium",children:o.inquiry_type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Organization"}),e.jsx("p",{className:"font-medium",children:o.organization||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Status"}),e.jsx(R,{className:T(o.status),children:o.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Submitted"}),e.jsx("p",{className:"font-medium",children:new Date(o.created_at).toLocaleString()})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Message"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded text-sm whitespace-pre-wrap",children:o.message})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsxs(c,{className:"bg-blue-600",onClick:()=>{ee(o.id,"read"),V(null)},children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Mark as Read"]}),e.jsxs(c,{className:"bg-green-600",onClick:()=>window.open(`mailto:${o.email}`),children:[e.jsx(Re,{className:"w-4 h-4 mr-2"}),"Reply via Email"]}),e.jsx(c,{variant:"outline",onClick:()=>{ee(o.id,"archived"),V(null)},children:"Archive"})]})]})]})})]})})}export{Ys as default};
