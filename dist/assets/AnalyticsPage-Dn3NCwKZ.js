import{R as x,k as ct,r as N,j as n,T as wt,B as Ct,a as Ot}from"./index-qoOME8mY.js";import{C as Pt,a as Dt,b as kt,d as Lt}from"./index-CsKqCIzL.js";import{S as _t,a as Nt,b as Et,c as Tt,d as tt}from"./select-D7YwqkvP.js";import{u as Rt,b as It,c as et,A as Bt,i as Mt,G as W}from"./LoadingSkeleton-BIuzlw0E.js";import{K as ut,a as V,C as dt,b as G}from"./ChartCard-DSvMceUz.js";import{C as Kt}from"./calendar-CdLeeta2.js";import{U as $t}from"./users-B7vsRM7J.js";import{B as Ut}from"./building-2-LyC4uWQT.js";import{M as zt}from"./mail-hjAr2Bly.js";import{i as Ft,D as Wt,f as Vt,E as Gt,L as at,c as q,d as qt,A as Ht,e as $,g as Xt,h as st,j as Yt,k as Jt,l as gt,u as Qt,G as Zt,m as pt,n as te,X as Y,Y as J,o as ee,R as H,C as rt,T as X,P as ae,a as re,b as nt,B as ht}from"./PieChart-CR6W8Oks.js";import{B as mt}from"./BarChart-YEZgHoJS.js";import{D as ne}from"./download-DlB-a-Lp.js";import"./index-EHAx_rFm.js";import"./tslib.es6-ByNH4KU3.js";import"./index-C7Xr5Zjk.js";import"./index-Bq8Hpwnx.js";import"./input-COdB9PMO.js";import"./parseISO-Dkgfv3AF.js";import"./badge-DS90lYj3.js";import"./message-square-CE0bfcV6.js";import"./shield-CPwMl-BC.js";import"./search-BPQDrF8n.js";import"./bell-B4cYDKmo.js";import"./skeleton-Br7kL-uo.js";var ie=["type","layout","connectNulls","ref"],se=["key"];function E(e){"@babel/helpers - typeof";return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},E(e)}function ft(e,r){if(e==null)return{};var t=oe(e,r),a,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)a=o[i],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}function oe(e,r){if(e==null)return{};var t={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;t[a]=e[a]}return t}function U(){return U=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},U.apply(this,arguments)}function yt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,a)}return t}function A(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?yt(Object(t),!0).forEach(function(a){w(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):yt(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function _(e){return de(e)||ue(e)||ce(e)||le()}function le(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ce(e,r){if(e){if(typeof e=="string")return ot(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ot(e,r)}}function ue(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function de(e){if(Array.isArray(e))return ot(e)}function ot(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}function pe(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function vt(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,bt(a.key),a)}}function he(e,r,t){return r&&vt(e.prototype,r),t&&vt(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function me(e,r,t){return r=Q(r),fe(e,xt()?Reflect.construct(r,t||[],Q(e).constructor):r.apply(e,t))}function fe(e,r){if(r&&(E(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ye(e)}function ye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xt=function(){return!!e})()}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Q(e)}function ve(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&lt(e,r)}function lt(e,r){return lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},lt(e,r)}function w(e,r,t){return r=bt(r),r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function bt(e){var r=ge(e,"string");return E(r)=="symbol"?r:r+""}function ge(e,r){if(E(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var a=t.call(e,r);if(E(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var T=(function(e){function r(){var t;pe(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=me(this,r,[].concat(i)),w(t,"state",{isAnimationFinished:!0,totalLength:0}),w(t,"generateSimpleStrokeDasharray",function(s,l){return"".concat(l,"px ").concat(s-l,"px")}),w(t,"getStrokeDasharray",function(s,l,u){var p=u.reduce(function(c,m){return c+m});if(!p)return t.generateSimpleStrokeDasharray(l,s);for(var y=Math.floor(s/p),g=s%p,h=l-s,f=[],d=0,v=0;d<u.length;v+=u[d],++d)if(v+u[d]>g){f=[].concat(_(u.slice(0,d)),[g-v]);break}var b=f.length%2===0?[0,h]:[h];return[].concat(_(r.repeat(u,y)),_(f),b).map(function(c){return"".concat(c,"px")}).join(", ")}),w(t,"id",Qt("recharts-line-")),w(t,"pathRef",function(s){t.mainCurve=s}),w(t,"handleAnimationEnd",function(){t.setState({isAnimationFinished:!0}),t.props.onAnimationEnd&&t.props.onAnimationEnd()}),w(t,"handleAnimationStart",function(){t.setState({isAnimationFinished:!1}),t.props.onAnimationStart&&t.props.onAnimationStart()}),t}return ve(r,e),he(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.points,l=o.xAxis,u=o.yAxis,p=o.layout,y=o.children,g=Vt(y,Gt);if(!g)return null;var h=function(v,b){return{x:v.x,y:v.y,value:v.value,errorVal:gt(v.payload,b)}},f={clipPath:a?"url(#clipPath-".concat(i,")"):null};return x.createElement(at,f,g.map(function(d){return x.cloneElement(d,{key:"bar-".concat(d.props.dataKey),data:s,xAxis:l,yAxis:u,layout:p,dataPointFormatter:h})}))}},{key:"renderDots",value:function(a,i,o){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var l=this.props,u=l.dot,p=l.points,y=l.dataKey,g=q(this.props,!1),h=q(u,!0),f=p.map(function(v,b){var c=A(A(A({key:"dot-".concat(b),r:3},g),h),{},{index:b,cx:v.x,cy:v.y,value:v.value,dataKey:y,payload:v.payload,points:p});return r.renderDotItem(u,c)}),d={clipPath:a?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return x.createElement(at,U({className:"recharts-line-dots",key:"dots"},d),f)}},{key:"renderCurveStatically",value:function(a,i,o,s){var l=this.props,u=l.type,p=l.layout,y=l.connectNulls;l.ref;var g=ft(l,ie),h=A(A(A({},q(g,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(o,")"):null,points:a},s),{},{type:u,layout:p,connectNulls:y});return x.createElement(qt,U({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,i){var o=this,s=this.props,l=s.points,u=s.strokeDasharray,p=s.isAnimationActive,y=s.animationBegin,g=s.animationDuration,h=s.animationEasing,f=s.animationId,d=s.animateNewValues,v=s.width,b=s.height,c=this.state,m=c.prevPoints,P=c.totalLength;return x.createElement(Ht,{begin:y,duration:g,isActive:p,easing:h,from:{t:0},to:{t:1},key:"line-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var C=S.t;if(m){var R=m.length/l.length,k=l.map(function(j,Z){var M=Math.floor(Z*R);if(m[M]){var K=m[M],L=$(K.x,j.x),jt=$(K.y,j.y);return A(A({},j),{},{x:L(C),y:jt(C)})}if(d){var At=$(v*2,j.x),St=$(b/2,j.y);return A(A({},j),{},{x:At(C),y:St(C)})}return A(A({},j),{},{x:j.x,y:j.y})});return o.renderCurveStatically(k,a,i)}var z=$(0,P),I=z(C),B;if(u){var F="".concat(u).split(/[,\s]+/gim).map(function(j){return parseFloat(j)});B=o.getStrokeDasharray(I,P,F)}else B=o.generateSimpleStrokeDasharray(P,I);return o.renderCurveStatically(l,a,i,{strokeDasharray:B})})}},{key:"renderCurve",value:function(a,i){var o=this.props,s=o.points,l=o.isAnimationActive,u=this.state,p=u.prevPoints,y=u.totalLength;return l&&s&&s.length&&(!p&&y>0||!Xt(p,s))?this.renderCurveWithAnimation(a,i):this.renderCurveStatically(s,a,i)}},{key:"render",value:function(){var a,i=this.props,o=i.hide,s=i.dot,l=i.points,u=i.className,p=i.xAxis,y=i.yAxis,g=i.top,h=i.left,f=i.width,d=i.height,v=i.isAnimationActive,b=i.id;if(o||!l||!l.length)return null;var c=this.state.isAnimationFinished,m=l.length===1,P=ct("recharts-line",u),S=p&&p.allowDataOverflow,C=y&&y.allowDataOverflow,R=S||C,k=st(b)?this.id:b,z=(a=q(s,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},I=z.r,B=I===void 0?3:I,F=z.strokeWidth,j=F===void 0?2:F,Z=Yt(s)?s:{},M=Z.clipDot,K=M===void 0?!0:M,L=B*2+j;return x.createElement(at,{className:P},S||C?x.createElement("defs",null,x.createElement("clipPath",{id:"clipPath-".concat(k)},x.createElement("rect",{x:S?h:h-f/2,y:C?g:g-d/2,width:S?f:f*2,height:C?d:d*2})),!K&&x.createElement("clipPath",{id:"clipPath-dots-".concat(k)},x.createElement("rect",{x:h-L/2,y:g-L/2,width:f+L,height:d+L}))):null,!m&&this.renderCurve(R,k),this.renderErrorBar(R,k),(m||s)&&this.renderDots(R,K,k),(!v||c)&&Jt.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:i.curPoints}:a.points!==i.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,i){for(var o=a.length%2!==0?[].concat(_(a),[0]):a,s=[],l=0;l<i;++l)s=[].concat(_(s),_(o));return s}},{key:"renderDotItem",value:function(a,i){var o;if(x.isValidElement(a))o=x.cloneElement(a,i);else if(Ft(a))o=a(i);else{var s=i.key,l=ft(i,se),u=ct("recharts-line-dot",typeof a!="boolean"?a.className:"");o=x.createElement(Wt,U({key:s},l,{className:u}))}return o}}])})(N.PureComponent);w(T,"displayName","Line");w(T,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Zt.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});w(T,"getComposedData",function(e){var r=e.props,t=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,s=e.dataKey,l=e.bandSize,u=e.displayedData,p=e.offset,y=r.layout,g=u.map(function(h,f){var d=gt(h,s);return y==="horizontal"?{x:pt({axis:t,ticks:i,bandSize:l,entry:h,index:f}),y:st(d)?null:a.scale(d),value:d,payload:h}:{x:st(d)?null:t.scale(d),y:pt({axis:a,ticks:o,bandSize:l,entry:h,index:f}),value:d,payload:h}});return A({points:g,layout:y},p)});var xe=te({chartName:"LineChart",GraphicalChild:T,axisComponents:[{axisType:"xAxis",AxisComp:Y},{axisType:"yAxis",AxisComp:J}],formatAxisMap:ee});const O={primary:"#f43f5e",secondary:"#3b82f6",success:"#22c55e",warning:"#f59e0b",purple:"#a855f7",teal:"#14b8a6"},D=[O.primary,O.secondary,O.success,O.warning,O.purple,O.teal];function We(){const[e,r]=N.useState("30"),{data:t,isLoading:a}=Rt({autoRefresh:!1}),{trend:i,isLoading:o}=It({days:parseInt(e)}),{counts:s,isLoading:l}=et("talent"),{counts:u,isLoading:p}=et("sponsor"),{counts:y,isLoading:g}=et("message"),h=N.useMemo(()=>i?.map(c=>({date:new Date(c.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),talent:c.talent_count,sponsors:c.sponsor_count}))||[],[i]),f=N.useMemo(()=>s.map(c=>({name:c.status.charAt(0).toUpperCase()+c.status.slice(1),value:c.count})),[s]),d=N.useMemo(()=>u.map(c=>({name:c.status.charAt(0).toUpperCase()+c.status.slice(1),value:c.count})),[u]),v=N.useMemo(()=>y.map(c=>({name:c.status.charAt(0).toUpperCase()+c.status.slice(1),value:c.count})),[y]),b=()=>{const c={metrics:t,trend:i,generatedAt:new Date().toISOString()},m=new Blob([JSON.stringify(c,null,2)],{type:"application/json"}),P=URL.createObjectURL(m),S=document.createElement("a");S.href=P,S.download=`analytics-${e}days-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(P)};return n.jsxs(Bt,{title:"Analytics",subtitle:"Detailed insights and statistics",actions:n.jsxs(Ct,{variant:"outline",onClick:b,children:[n.jsx(ne,{className:"w-4 h-4 mr-2"}),"Export Data"]}),children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(Kt,{className:"w-5 h-5 text-muted-foreground"}),n.jsxs(_t,{value:e,onValueChange:c=>r(c),children:[n.jsx(Nt,{className:"w-[180px]",children:n.jsx(Et,{placeholder:"Select range"})}),n.jsxs(Tt,{children:[n.jsx(tt,{value:"7",children:"Last 7 days"}),n.jsx(tt,{value:"30",children:"Last 30 days"}),n.jsx(tt,{value:"90",children:"Last 90 days"})]})]})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Data updated: ",Mt(new Date().toISOString())]})]}),a?n.jsxs(ut,{className:"mb-8",children:[n.jsx(W,{}),n.jsx(W,{}),n.jsx(W,{}),n.jsx(W,{})]}):n.jsxs(ut,{className:"mb-8",children:[n.jsx(V,{title:"Total Submissions",value:(t?.talent?.newThisMonth||0)+(t?.sponsors?.newThisMonth||0),trend:t?.talent?.newThisWeek,trendLabel:"this week",icon:wt,color:"blue"}),n.jsx(V,{title:"Talent Conversion",value:t?.talent?.total?Math.round(t.talent.approved/t.talent.total*100):0,subtitle:"% approved",icon:$t,color:"green"}),n.jsx(V,{title:"Active Sponsors",value:t?.sponsors?.active||0,subtitle:`of ${t?.sponsors?.total||0} total`,icon:Ut,color:"purple"}),n.jsx(V,{title:"Message Response Rate",value:t?.messages?.total?Math.round(t.messages.replied/t.messages.total*100):0,subtitle:"% replied",icon:zt,color:"yellow"})]}),n.jsxs(dt,{className:"mb-8",children:[n.jsx(G,{title:"Submissions Over Time",description:`New talent and sponsors (${e} days)`,isLoading:o,height:300,children:n.jsx(H,{width:"100%",height:"100%",children:n.jsxs(xe,{data:h,children:[n.jsx(rt,{strokeDasharray:"3 3",stroke:"#eee"}),n.jsx(Y,{dataKey:"date",tick:{fontSize:12}}),n.jsx(J,{tick:{fontSize:12}}),n.jsx(X,{}),n.jsx(T,{type:"monotone",dataKey:"talent",name:"Talent",stroke:O.primary,strokeWidth:2,dot:!1}),n.jsx(T,{type:"monotone",dataKey:"sponsors",name:"Sponsors",stroke:O.secondary,strokeWidth:2,dot:!1})]})})}),n.jsxs(G,{title:"Talent Status Distribution",description:"Current breakdown by status",isLoading:l,height:300,children:[n.jsx(H,{width:"100%",height:"100%",children:n.jsxs(ae,{children:[n.jsx(re,{data:f,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:f.map((c,m)=>n.jsx(nt,{fill:D[m%D.length]},`cell-${m}`))}),n.jsx(X,{})]})}),n.jsx("div",{className:"flex flex-wrap justify-center gap-3 mt-4",children:f.map((c,m)=>n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:D[m%D.length]}}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[c.name,": ",c.value]})]},c.name))})]})]}),n.jsxs(dt,{className:"mb-8",children:[n.jsx(G,{title:"Sponsor Status",description:"Breakdown by status",isLoading:p,height:280,children:n.jsx(H,{width:"100%",height:"100%",children:n.jsxs(mt,{data:d,layout:"vertical",children:[n.jsx(rt,{strokeDasharray:"3 3",stroke:"#eee",horizontal:!1}),n.jsx(Y,{type:"number",tick:{fontSize:12}}),n.jsx(J,{dataKey:"name",type:"category",tick:{fontSize:12},width:80}),n.jsx(X,{}),n.jsx(ht,{dataKey:"value",name:"Count",fill:O.secondary,radius:[0,4,4,0],children:d.map((c,m)=>n.jsx(nt,{fill:D[m%D.length]},`cell-${m}`))})]})})}),n.jsx(G,{title:"Message Status",description:"Breakdown by status",isLoading:g,height:280,children:n.jsx(H,{width:"100%",height:"100%",children:n.jsxs(mt,{data:v,children:[n.jsx(rt,{strokeDasharray:"3 3",stroke:"#eee"}),n.jsx(Y,{dataKey:"name",tick:{fontSize:12}}),n.jsx(J,{tick:{fontSize:12}}),n.jsx(X,{}),n.jsx(ht,{dataKey:"value",name:"Count",fill:O.warning,radius:[4,4,0,0],children:v.map((c,m)=>n.jsx(nt,{fill:D[m%D.length]},`cell-${m}`))})]})})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(it,{title:"Talent Pipeline",items:[{label:"Pending Review",value:t?.talent?.pending||0,color:"bg-yellow-500"},{label:"Approved",value:t?.talent?.approved||0,color:"bg-green-500"},{label:"Total",value:t?.talent?.total||0,color:"bg-blue-500"}]}),n.jsx(it,{title:"Request Overview",items:[{label:"Open",value:t?.requests?.open||0,color:"bg-blue-500"},{label:"In Review",value:t?.requests?.inReview||0,color:"bg-yellow-500"},{label:"Urgent",value:t?.requests?.urgent||0,color:"bg-red-500"}]}),n.jsx(it,{title:"Message Activity",items:[{label:"Unread",value:t?.messages?.unread||0,color:"bg-red-500"},{label:"Replied",value:t?.messages?.replied||0,color:"bg-green-500"},{label:"Total",value:t?.messages?.total||0,color:"bg-blue-500"}]})]})]})}function it({title:e,items:r}){return n.jsxs(Pt,{children:[n.jsx(Dt,{children:n.jsx(kt,{className:"text-base",children:e})}),n.jsx(Lt,{children:n.jsx("div",{className:"space-y-3",children:r.map(t=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:Ot("w-3 h-3 rounded-full",t.color)}),n.jsx("span",{className:"text-sm text-muted-foreground",children:t.label})]}),n.jsx("span",{className:"font-semibold",children:t.value})]},t.label))})})]})}export{We as default};
