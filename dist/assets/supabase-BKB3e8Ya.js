import{c as m,r as u,j as c,l as _,a as g}from"./index-qoOME8mY.js";import"./tslib.es6-ByNH4KU3.js";import{c as p}from"./index-Bq8Hpwnx.js";const w=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],I=m("loader-circle",w);var y=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],b=y.reduce((e,t)=>{const a=_(`Primitive.${t}`),r=u.forwardRef((s,i)=>{const{asChild:l,...o}=s,d=l?a:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(d,{...o,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),h="Label",f=u.forwardRef((e,t)=>c.jsx(b.label,{...e,ref:t,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));f.displayName=h;var v=f;function P({className:e,...t}){return c.jsx(v,{"data-slot":"label",className:g("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}const T="http://supabasekong-dcgko804wcgwow4s4ko40000.145.223.96.191.sslip.io",x="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJzdXBhYmFzZSIsImlhdCI6MTc3MDg5MTcyMCwiZXhwIjo0OTI2NTY1MzIwLCJyb2xlIjoiYW5vbiJ9.o3IrcUgo8uwNNWSshycVC6CgyxA7KExx_RR5DLwJRmE",n=p(T,x);async function R(){const{data:{user:e}}=await n.auth.getUser();if(!e)return null;const{data:t}=await n.from("profiles").select("*").eq("id",e.id).single();return t}async function D(){const{data:e}=await n.from("v_admin_dashboard_metrics").select("*").single();return e}async function M(){const{data:e}=await n.from("v_pending_talent_reviews").select("*").order("submitted_at",{ascending:!0});return e||[]}async function N(){const{data:e}=await n.from("v_pending_sponsor_approvals").select("*").order("created_at",{ascending:!0});return e||[]}async function A(e,t){const{data:a,error:r}=await n.rpc("admin_review_talent",{p_talent_id:e,p_decision:t.decision,p_feedback_to_talent:t.feedback_to_talent,p_internal_notes:t.internal_notes});return{data:a,error:r}}async function E(e,t){const{data:a,error:r}=await n.rpc("admin_review_sponsor",{p_sponsor_id:e,p_decision:t});return{data:a,error:r}}async function J(e){let t=n.from("talent_profiles").select(`
      *,
      profiles:profiles!left(full_name, email)
    `,{count:"exact"});e?.status&&(t=t.eq("status",e.status)),e?.limit&&(t=t.limit(e.limit)),e?.offset&&(t=t.range(e.offset,e.offset+(e.limit||10)-1));const{data:a,error:r,count:s}=await t.order("created_at",{ascending:!1});if(r&&console.error("getAllTalent error:",r),a&&a.length>0){const i=a.filter(o=>o.profiles!==null).length,l=a.filter(o=>o.profiles===null).length;console.log(`getAllTalent results: ${a.length} total (${i} with profile, ${l} without)`)}return{data:a,error:r,count:s}}async function L(){const{data:e,error:t}=await n.from("talent_profiles").select("*").limit(10),{data:a,error:r}=await n.rpc("get_talent_status_counts");return console.log("Raw talent_profiles sample:",e?.length,t),console.log("Status counts:",a,r),{rawTalent:e,rawError:t,statusCounts:a,countError:r}}async function k(){console.log("ðŸ§ª [Test] Testing database recording...");const{count:e}=await n.from("talent_profiles").select("*",{count:"exact",head:!0});console.log("ðŸ§ª [Test] Talent count before:",e);const t=`test-${Date.now()}`,{data:a,error:r}=await n.rpc("submit_talent_profile_anon",{p_full_name:"Test User",p_email:`test-${t}@example.com`,p_headline:"Test Headline",p_bio:"Test bio for debugging",p_years_experience:5,p_industry:"Technology",p_seniority_level:"Senior",p_functions:["Product"],p_skills:["Testing"],p_languages:["English"],p_linkedin_url:"",p_portfolio_url:"",p_cv_file_path:null});console.log("ðŸ§ª [Test] Insert result:",{data:a,error:r});const{count:s}=await n.from("talent_profiles").select("*",{count:"exact",head:!0});return console.log("ðŸ§ª [Test] Talent count after:",s),console.log("ðŸ§ª [Test] Difference:",(s||0)-(e||0)),{beforeCount:e,afterCount:s,difference:(s||0)-(e||0),insertData:a,insertError:r,success:!r&&(s||0)>(e||0)}}async function j(e){let t=n.from("sponsor_profiles").select(`
      *,
      profiles:profiles(full_name, email)
    `,{count:"exact"});e?.status&&(t=t.eq("status",e.status)),e?.limit&&(t=t.limit(e.limit)),e?.offset&&(t=t.range(e.offset,e.offset+(e.limit||10)-1));const{data:a,error:r,count:s}=await t.order("created_at",{ascending:!1});return{data:a,error:r,count:s}}async function $(e){let t=n.from("audit_logs").select(`
      *,
      actor:profiles(full_name, email)
    `,{count:"exact"});e?.action&&(t=t.eq("action",e.action)),e?.limit&&(t=t.limit(e.limit)),e?.offset&&(t=t.range(e.offset,e.offset+(e.limit||50)-1));const{data:a,error:r,count:s}=await t.order("created_at",{ascending:!1});return{data:a,error:r,count:s}}async function O(e){const{error:t}=await n.from("talent_profiles").delete().eq("id",e);return{error:t}}async function U(e){const{data:{user:t}}=await n.auth.getUser();if(!t)return{data:[],error:new Error("Not authenticated")};let a=n.from("v_recommendation_requests_detail").select("*");const{data:r,error:s}=await a.order("created_at",{ascending:!1});return{data:r,error:s}}async function z(e){let t=n.from("contact_submissions").select("*",{count:"exact"});e?.status&&(t=t.eq("status",e.status)),e?.limit&&(t=t.limit(e.limit)),e?.offset&&(t=t.range(e.offset,e.offset+(e.limit||10)-1));const{data:a,error:r,count:s}=await t.order("created_at",{ascending:!1});return{data:a,error:r,count:s}}async function K(e,t){const{data:a,error:r}=await n.from("contact_submissions").update({status:t,updated_at:new Date().toISOString()}).eq("id",e);return{data:a,error:r}}export{P as L,I as a,L as b,D as c,M as d,N as e,J as f,R as g,j as h,$ as i,U as j,z as k,E as l,A as m,O as n,n as s,k as t,K as u};
