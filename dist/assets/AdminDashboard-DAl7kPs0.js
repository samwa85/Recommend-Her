import{c as L,u as ea,r,j as e,B as n,h as sa,U as aa,E as le,o as ta,p as ra,q as la,L as na,T as ia}from"./index-qoOME8mY.js";import{I as fs}from"./input-COdB9PMO.js";import{B as x}from"./badge-DS90lYj3.js";import{T as vs,a as ca,b as B,c as oa}from"./tabs-vgetrDNz.js";import{T as ys}from"./textarea-D1tOqvpc.js";import{D as xe,a as he,b as pe,c as ue,d as Me,e as De}from"./dialog-au1fJFZW.js";import{S as Re,a as Le,b as Ee,c as Pe,d as ae}from"./select-D7YwqkvP.js";import{A as da,a as ma}from"./alert-CY_hLXsn.js";import{t as xa,e as Ds,n as ha,j as D,L as Ns,C as pa,p as K,D as bs,a as ws,b as ks,c as te,d as ua}from"./parseISO-Dkgfv3AF.js";import{C as y,a as S,b as T,c as re,d as C}from"./index-CsKqCIzL.js";import{S as ja}from"./separator-CQwEN2fl.js";import{S as Ue}from"./scroll-area-D5JBEXsZ.js";import{g as ga,b as fa,c as va,d as Cs,e as _s,f as Fe,h as Ie,i as ya,j as Na,k as ba,a as V,u as wa,L as $e,t as ka,l as Ca,m as _a,n as Sa}from"./supabase-BKB3e8Ya.js";import{d as Ta,B as za}from"./storage-BYjA6cKK.js";import{T as We,I as Aa,a as Ma,R as Da,b as Ra}from"./database.types-BxxHNGXg.js";import{S as La}from"./shield-CPwMl-BC.js";import{C as Ea}from"./calendar-CdLeeta2.js";import{U as Oe}from"./user-check-COeJ7n-1.js";import{B as Pa}from"./building-2-LyC4uWQT.js";import{M as Be}from"./message-square-CE0bfcV6.js";import{M as Ve}from"./mail-hjAr2Bly.js";import{C as He}from"./circle-alert-CmZxWWpu.js";import{C as Ss}from"./clock-DdojzwLk.js";import{U as Ua}from"./users-B7vsRM7J.js";import{B as qe}from"./briefcase-CUuRQszi.js";import{C as H}from"./circle-check-big-BDlXIym8.js";import{C as je}from"./circle-x-CQU312bK.js";import{b as Fa,A as Ia,a as $a}from"./AreaChart-BCla2QG8.js";import{S as Oa}from"./search-BPQDrF8n.js";import{F as Ba}from"./funnel-UMXFXVhw.js";import{D as Ke}from"./download-DlB-a-Lp.js";import{E as Va,T as Je}from"./trash-2-B2GZL5i8.js";import{R as Ge,C as Ts,X as zs,Y as As,T as Qe,P as Ha,a as qa,b as Ka,B as Ga,p as Qa}from"./PieChart-CR6W8Oks.js";import{B as Xa}from"./BarChart-YEZgHoJS.js";import{F as Ms}from"./file-text-Bt2va7S8.js";import{U as Ya}from"./user-CEFTD0Vu.js";import"./index-EHAx_rFm.js";import"./tslib.es6-ByNH4KU3.js";import"./index-C7Xr5Zjk.js";import"./index-Bq8Hpwnx.js";const Wa=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Ja=L("building",Wa);const Za=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],et=L("database",Za);const st=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],at=L("file-spreadsheet",st);const tt=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],rt=L("grid-3x3",tt);const lt=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],nt=L("list",lt);const it=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ct=L("pen-line",it);const ot=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],dt=L("printer",ot);const mt=[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],xt=L("search-x",mt);const ht=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],pt=L("target",ht);function ut(l,o,d){const c=xa(l,d?.in);return isNaN(o)?Ds(l,NaN):(o&&c.setDate(c.getDate()+o),c)}function jt(l,o){const[d,c]=ha(l,o.start,o.end);return{start:d,end:c}}function gt(l,o){const{start:d,end:c}=jt(o?.in,l);let z=+d>+c;const g=z?+d:+c,f=z?c:d;f.setHours(0,0,0,0);let w=1;const I=[];for(;+f<=g;)I.push(Ds(d,f)),f.setDate(f.getDate()+w),f.setHours(0,0,0,0);return z?I.reverse():I}function ft(l,o,d){return ut(l,-o,d)}const Xe=[{label:"7 Days",days:7},{label:"30 Days",days:30},{label:"90 Days",days:90},{label:"All Time",days:365*10}],R={primary:"#f97066",secondary:"#3b82f6",success:"#22c55e",warning:"#f59e0b",purple:"#a855f7"},ge=[R.primary,R.secondary,R.success,R.warning,R.purple],q=({value:l,icon:o,label:d,badge:c})=>e.jsxs(oa,{value:l,className:"gap-2 px-6 py-3 data-[state=active]:bg-white data-[state=active]:shadow-sm rounded-t-lg rounded-b-none border-b-2 data-[state=active]:border-[var(--primary)] border-transparent transition-all",children:[e.jsx(o,{size:18}),e.jsx("span",{className:"font-semibold",children:d}),c?e.jsx(x,{variant:"destructive",className:"ml-1 px-1.5 h-5 min-w-5 flex items-center justify-center",children:c}):null]}),nr=()=>{ea();const[l,o]=r.useState("overview"),[d,c]=r.useState(!1),[z,g]=r.useState(!0),[f,w]=r.useState(null),[I,Rs]=r.useState(""),Ls="admin123",[h,Es]=r.useState(null),[ne,Ps]=r.useState([]),[ie,Us]=r.useState([]),[k,Ze]=r.useState([]),[ve,es]=r.useState([]),[Fs,Is]=r.useState([]),[ss]=r.useState([]),[Q,$s]=r.useState([]);r.useEffect(()=>{if(f){const s=setTimeout(()=>w(null),8e3);return()=>clearTimeout(s)}},[f]);const[N,U]=r.useState(null),[as,ts]=r.useState(null),[m,X]=r.useState(null),[rs,Os]=r.useState("approved"),[ls,ns]=r.useState(""),[is,cs]=r.useState(""),[Y,W]=r.useState(null),[ce,Bs]=r.useState(Xe[1]),[ye,os]=r.useState("list"),[Ne,A]=r.useState(!1),[p,oe]=r.useState(null),[ds,ms]=r.useState(!1),[_,E]=r.useState({pendingTalent:[],pendingSponsors:[],approvedTalent:[],activeSponsors:[]}),[$,Vs]=r.useState({rawTalentCount:0,statusBreakdown:{},lastCheck:null}),[F,be]=r.useState({running:!1,result:null}),Hs=async()=>{be({running:!0,result:null});try{const s=await ka();be({running:!1,result:{success:s.success,beforeCount:s.beforeCount||0,afterCount:s.afterCount||0,error:s.insertError?.message}})}catch(s){be({running:!1,result:{success:!1,error:s instanceof Error?s.message:"Unknown error"}})}},[P,we]=r.useState(""),[J,ke]=r.useState("all"),[Z,Ce]=r.useState("all"),[ee,xs]=r.useState(1),_e=10,hs=r.useCallback(async()=>{try{const s=await ga();console.log("Auth check - profile:",s?.id,"role:",s?.role),s?.role==="admin"?c(!0):c(!1)}catch(s){console.error("Auth check error:",s),c(!1)}finally{g(!1)}},[]),ps=r.useCallback(async()=>{try{console.log("=== Running data health check ===");const s=await fa();let a={},t=0;s.statusCounts&&Array.isArray(s.statusCounts)?s.statusCounts.forEach(i=>{a[i.status]=i.count,t+=i.count}):s.rawTalent&&(a=s.rawTalent.reduce((i,v)=>(i[v.status]=(i[v.status]||0)+1,i),{}),t=s.rawTalent.length),Vs({rawTalentCount:t,statusBreakdown:a,lastCheck:new Date}),console.log("Data health check updated:",{totalRawCount:t,statusBreakdown:a})}catch(s){console.error("Data health check failed:",s)}},[]),M=r.useCallback(async()=>{g(!0),w(null);try{console.log("=== Loading all dashboard data ==="),ps();const[s,a,t,i,v,b,js,j]=await Promise.allSettled([va(),Cs(),_s(),Fe({limit:500}),Ie({limit:500}),ya({limit:50}),Na(),ba({limit:100})]);if(s.status==="fulfilled"?(console.log("✓ Metrics:",s.value),Es(s.value)):console.error("✗ Metrics error:",s.reason),a.status==="fulfilled"?(console.log("✓ Pending talent:",a.value?.length),Ps(a.value)):console.error("✗ Pending talent error:",a.reason),t.status==="fulfilled"?(console.log("✓ Pending sponsors:",t.value?.length),Us(t.value)):console.error("✗ Pending sponsors error:",t.reason),i.status==="fulfilled"){const{data:u,error:se,count:Js}=i.value;if(console.log("✓ All talent:",{count:Js,dataLength:u?.length,error:se}),se&&console.error("All talent Supabase error:",se),u&&u.length>0){const ze=u[0];console.log("  Sample talent:",{id:ze.id,status:ze.status,profile:ze.profiles});const Zs=u.reduce((Ae,gs)=>(Ae[gs.status]=(Ae[gs.status]||0)+1,Ae),{});console.log("  Status breakdown:",Zs)}Ze(u||[])}else console.error("✗ All talent promise rejected:",i.reason);if(v.status==="fulfilled"){const{data:u,error:se}=v.value;console.log("✓ All sponsors:",u?.length,se),es(u||[])}else console.error("✗ All sponsors error:",v.reason);b.status==="fulfilled"?(console.log("✓ Audit logs:",b.value?.data?.length),Is(b.value.data||[])):console.error("✗ Audit logs error:",b.reason),j.status==="fulfilled"?(console.log("✓ Contact submissions:",j.value?.data?.length),$s(j.value.data||[])):console.error("✗ Contact submissions error:",j.reason);const Ys=[s,a,t,i,v,b,js,j].filter(u=>u.status==="rejected").map(u=>u.reason),Ws=[i,v,b,j].filter(u=>u.status==="fulfilled"&&u.value&&u.value.error).map(u=>u.value.error.message),Te=[...Ys,...Ws];Te.length>0&&(console.error("Data loading errors:",Te),w(`Failed to load some data: ${Te.join(", ")}`))}catch(s){console.error("Critical error loading data:",s),w("Failed to load dashboard data. Please try again.")}finally{g(!1)}},[ps]);r.useEffect(()=>{hs()},[hs]),r.useEffect(()=>{d&&M()},[d,M,ce]);const O=r.useMemo(()=>k.filter(s=>{const a=!P||s.profiles?.full_name?.toLowerCase().includes(P.toLowerCase())||s.profiles?.email?.toLowerCase().includes(P.toLowerCase())||s.headline?.toLowerCase().includes(P.toLowerCase())||s.industry?.toLowerCase().includes(P.toLowerCase()),t=J==="all"||s.status===J,i=Z==="all"||s.industry===Z;return a&&t&&i}),[k,P,J,Z]),de=r.useMemo(()=>{const s=(ee-1)*_e;return O.slice(s,s+_e)},[O,ee]),me=Math.ceil(O.length/_e),Se=r.useMemo(()=>{const s={};return k.forEach(a=>{s[a.status]=(s[a.status]||0)+1}),Object.entries(s).map(([a,t])=>({name:We[a]||a,value:t,status:a}))},[k]),qs=r.useMemo(()=>{const s={};return k.filter(a=>a.status==="approved").forEach(a=>{s[a.industry||"Unknown"]=(s[a.industry||"Unknown"]||0)+1}),Object.entries(s).sort((a,t)=>t[1]-a[1]).slice(0,8).map(([a,t])=>({name:a,value:t}))},[k]),Ks=r.useMemo(()=>gt({start:ft(new Date,ce.days),end:new Date}).map(a=>{const t=D(a,"yyyy-MM-dd"),i=k.filter(v=>v.created_at&&v.created_at.startsWith(t)).length;return{name:D(a,"MMM dd"),value:i,fullDate:t}}),[k,ce]);r.useEffect(()=>{if(!Ne||!p)return;(async()=>{ms(!0);try{if(p==="pending_reviews"){const a=await Cs();E(t=>({...t,pendingTalent:a}))}else if(p==="pending_sponsors"){const a=await _s();E(t=>({...t,pendingSponsors:a}))}else if(p==="approved_talent"){const a=k.filter(t=>t.status==="approved");if(console.log("Approved talent from cache:",a.length,"items"),a.length===0&&(h?.approved_talent||0)>0){console.log("Cache miss for approved talent, fetching fresh data...");const{data:t}=await Fe({status:"approved",limit:500});E(i=>({...i,approvedTalent:t||[]})),t&&t.length>0&&(Ze(i=>[...i.filter(b=>b.status!=="approved"),...t]),console.log("Updated allTalent state with fresh approved talent:",t.length,"items"))}else E(t=>({...t,approvedTalent:a}))}else if(p==="active_sponsors"){const a=ve.filter(t=>t.status==="approved");if(console.log("Approved sponsors from cache:",a.length,"items"),a.length===0&&(h?.approved_sponsors||0)>0){console.log("Cache miss for approved sponsors, fetching fresh data...");const{data:t}=await Ie({status:"approved",limit:500});E(i=>({...i,activeSponsors:t||[]})),t&&t.length>0&&(es(i=>[...i.filter(b=>b.status!=="approved"),...t]),console.log("Updated allSponsors state with fresh approved sponsors:",t.length,"items"))}else E(t=>({...t,activeSponsors:a}))}}catch(a){console.error("Error fetching stat listing data:",a)}finally{ms(!1)}})()},[Ne,p,k,ve,h]);const Gs=async()=>{if(N){g(!0);try{const{error:s}=await _a(N.id,{decision:rs,feedback_to_talent:ls||void 0,internal_notes:is||void 0});if(s)throw s;await M(),U(null),ns(""),cs("")}catch(s){w(s instanceof Error?s.message:"Failed to submit review")}finally{g(!1)}}},us=async s=>{if(as){g(!0);try{const{error:a}=await Ca(as.id,s);if(a)throw a;await M(),ts(null)}catch(a){w(a instanceof Error?a.message:"Failed to review sponsor")}finally{g(!1)}}},Qs=async()=>{if(Y){g(!0);try{const s=k.find(t=>t.id===Y.id);s?.cv_file_path&&await Ta(za.TALENT_CV,s.cv_file_path);const{error:a}=await Sa(Y.id);if(a)throw a;await M(),W(null)}catch(s){w(s instanceof Error?s.message:"Failed to delete profile")}finally{g(!1)}}},Xs=s=>{let a="",t="";a=[["ID","Name","Email","Headline","Industry","Seniority","Experience","Status","Submitted At","LinkedIn"].join(","),...O.map(j=>[j.id,`"${j.profiles?.full_name||""}"`,`"${j.profiles?.email||""}"`,`"${j.headline||""}"`,`"${j.industry||""}"`,`"${j.seniority_level||""}"`,j.years_experience,j.status,j.submitted_at,`"${j.linkedin_url||""}"`].join(","))].join(`
`),t=`talent-export-${D(new Date,"yyyy-MM-dd")}.csv`;const i=new Blob([a],{type:"text/csv"}),v=window.URL.createObjectURL(i),b=document.createElement("a");b.href=v,b.download=t,b.click(),window.URL.revokeObjectURL(v)};return z&&!d?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(V,{className:"animate-spin",size:32,style:{color:"var(--primary)"}})}):d?e.jsxs("div",{className:"min-h-screen pt-24 sm:pt-[112px]",style:{backgroundColor:"var(--background)"},children:[e.jsx("div",{className:"sticky top-24 sm:top-[112px] z-40 bg-white/90 backdrop-blur-md border-b border-gray-100 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-6 pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center shadow-sm",style:{backgroundColor:"var(--primary)"},children:e.jsx(Ns,{className:"text-white",size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-serif text-2xl font-bold tracking-tight",style:{color:"var(--foreground)"},children:"Admin Dashboard"}),e.jsx("p",{className:"text-xs uppercase tracking-wider font-semibold opacity-60",style:{color:"var(--muted-foreground)"},children:"RecommendHer Management"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Re,{value:ce.label,onValueChange:s=>{const a=Xe.find(t=>t.label===s);a&&Bs(a)},children:[e.jsxs(Le,{className:"w-40 bg-white/50 border-gray-200",children:[e.jsx(Ea,{size:16,className:"mr-2 opacity-50"}),e.jsx(Ee,{})]}),e.jsx(Pe,{children:Xe.map(s=>e.jsx(ae,{value:s.label,children:s.label},s.label))})]}),e.jsx(n,{variant:"outline",size:"icon",onClick:M,className:"bg-white/50 border-gray-200",children:e.jsx(sa,{size:18,className:z?"animate-spin":""})})]})]}),e.jsx(vs,{value:l,onValueChange:o,className:"w-full",children:e.jsxs(ca,{className:"bg-transparent h-auto p-0 flex flex-wrap gap-1 border-none justify-start",children:[e.jsx(q,{value:"overview",icon:Ns,label:"Overview"}),e.jsx(q,{value:"talent",icon:Oe,label:"Talent",badge:h?.pending_talent_reviews}),e.jsx(q,{value:"sponsors",icon:Pa,label:"Sponsors",badge:h?.pending_sponsor_approvals}),e.jsx(q,{value:"requests",icon:Be,label:"Requests"}),e.jsx(q,{value:"messages",icon:Ve,label:"Messages",badge:Q.filter(s=>s.status==="new").length||void 0}),e.jsx(q,{value:"analytics",icon:pa,label:"Analytics"})]})})]})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f&&e.jsxs(da,{variant:"destructive",className:"mb-6 animate-in slide-in-from-top-2 duration-300",children:[e.jsx(He,{className:"h-4 w-4"}),e.jsx(ma,{children:f})]}),e.jsxs(vs,{value:l,className:"space-y-6 mt-4",children:[e.jsxs(B,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(fe,{icon:Ss,label:"Pending Reviews",value:h?.pending_talent_reviews||0,trend:h&&h.pending_talent_reviews>5?"up":"neutral",color:"orange",onClick:()=>{oe("pending_reviews"),A(!0)}}),e.jsx(fe,{icon:Oe,label:"Pending Sponsors",value:h?.pending_sponsor_approvals||0,trend:"neutral",color:"blue",onClick:()=>{oe("pending_sponsors"),A(!0)}}),e.jsx(fe,{icon:Ua,label:"Approved Talent",value:h?.approved_talent||0,trend:"up",color:"green",onClick:()=>{oe("approved_talent"),A(!0)}}),e.jsx(fe,{icon:qe,label:"Active Sponsors",value:h?.approved_sponsors||0,trend:"up",color:"purple",onClick:()=>{oe("active_sponsors"),A(!0)}})]}),$.lastCheck&&e.jsxs(y,{className:"bg-amber-50 border-amber-200",children:[e.jsx(S,{className:"pb-3",children:e.jsxs(T,{className:"text-sm font-medium text-amber-800 flex items-center gap-2",children:[e.jsx(He,{size:16}),"Data Health Check"]})}),e.jsx(C,{children:e.jsxs("div",{className:"text-sm text-amber-700 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total talent profiles (raw):"}),e.jsx("span",{className:"font-medium",children:$.rawTalentCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status breakdown:"}),e.jsx("span",{className:"font-medium",children:Object.entries($.statusBreakdown).map(([s,a])=>`${s}: ${a}`).join(", ")||"None"})]}),(h?.approved_talent||0)!==($.statusBreakdown.approved||0)&&e.jsxs("div",{className:"text-red-600 font-medium mt-2",children:["⚠️ Inconsistency detected: Metrics shows ",h?.approved_talent," approved, but raw data shows ",$.statusBreakdown.approved||0," approved"]}),e.jsxs("div",{className:"text-xs text-amber-600 mt-2",children:["Last checked: ",$.lastCheck.toLocaleTimeString()]}),e.jsxs("div",{className:"pt-4 border-t border-amber-200 mt-4",children:[e.jsx("p",{className:"font-medium mb-2",children:"Database Recording Test:"}),F.result?e.jsx("div",{className:"space-y-1",children:F.result.success?e.jsxs("div",{className:"text-green-600",children:["✅ Test PASSED: Database is recording data",e.jsx("br",{}),"Count: ",F.result.beforeCount," → ",F.result.afterCount]}):e.jsxs("div",{className:"text-red-600",children:["❌ Test FAILED: ",F.result.error||"Unknown error"]})}):e.jsx("p",{className:"text-amber-600 text-xs",children:"Click button to test if database records data"}),e.jsx(n,{variant:"outline",size:"sm",className:"mt-2",onClick:Hs,disabled:F.running,children:F.running?e.jsxs(e.Fragment,{children:[e.jsx(V,{size:14,className:"mr-2 animate-spin"})," Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(et,{size:14,className:"mr-2"})," Test DB Recording"]})})]})]})})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs(y,{className:"lg:col-span-2",children:[e.jsxs(S,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(T,{className:"font-serif text-lg",children:"Pending Reviews"}),e.jsx(re,{children:"Talent awaiting approval"})]}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>o("talent"),children:"View All"})]}),e.jsx(C,{children:e.jsx(Ue,{className:"h-80",children:e.jsxs("div",{className:"space-y-3",children:[ne.slice(0,10).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border hover:bg-gray-50 transition-colors",style:{borderColor:"var(--border)"},children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--primary)"},children:e.jsx("span",{className:"text-white font-medium",children:s.full_name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.full_name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.headline||"No headline"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(x,{variant:"secondary",className:"text-xs",children:s.industry}),e.jsx("span",{className:"text-xs text-gray-400",children:s.submitted_at&&D(K(s.submitted_at),"MMM dd")})]})]})]}),e.jsx(n,{size:"sm",onClick:()=>U(s),children:"Review"})]},s.id)),ne.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(H,{className:"mx-auto mb-4",size:48,style:{color:"var(--muted-foreground)"}}),e.jsx("p",{style:{color:"var(--muted-foreground)"},children:"No pending reviews"})]})]})})})]}),e.jsxs(y,{children:[e.jsxs(S,{children:[e.jsx(T,{className:"font-serif text-lg",children:"Recent Activity"}),e.jsx(re,{children:"Latest platform events"})]}),e.jsx(C,{children:e.jsx(Ue,{className:"h-80",children:e.jsx("div",{className:"space-y-4",children:Fs.slice(0,15).map(s=>e.jsxs("div",{className:"flex gap-3 text-sm",children:[e.jsx("div",{className:"mt-1",children:s.action.includes("APPROVE")?e.jsx(H,{size:16,className:"text-green-500"}):s.action.includes("REJECT")?e.jsx(je,{size:16,className:"text-red-500"}):e.jsx(Fa,{size:16,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.action.replace(/_/g," ")}),e.jsx("p",{className:"text-xs text-gray-500",children:s.entity_type}),e.jsx("p",{className:"text-xs text-gray-400",children:D(K(s.created_at),"MMM dd, HH:mm")})]})]},s.id))})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(Ye,{icon:aa,label:"New This Week",value:h?.talent_last_7_days||0}),e.jsx(Ye,{icon:Be,label:"Requests (30d)",value:h?.requests_last_30_days||0}),e.jsx(Ye,{icon:pt,label:"Pending Requests",value:h?.pending_requests||0})]})]}),e.jsxs(B,{value:"talent",className:"space-y-6",children:[e.jsx(y,{children:e.jsx(C,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Oa,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx(fs,{placeholder:"Search by name, email, headline...",value:P,onChange:s=>we(s.target.value),className:"pl-10"})]}),e.jsxs(Re,{value:J,onValueChange:ke,children:[e.jsxs(Le,{className:"w-40",children:[e.jsx(Ba,{size:16,className:"mr-2"}),e.jsx(Ee,{placeholder:"Status"})]}),e.jsxs(Pe,{children:[e.jsx(ae,{value:"all",children:"All Statuses"}),Object.entries(We).map(([s,a])=>e.jsx(ae,{value:s,children:a},s))]})]}),e.jsxs(Re,{value:Z,onValueChange:Ce,children:[e.jsxs(Le,{className:"w-40",children:[e.jsx(Ja,{size:16,className:"mr-2"}),e.jsx(Ee,{placeholder:"Industry"})]}),e.jsxs(Pe,{children:[e.jsx(ae,{value:"all",children:"All Industries"}),Aa.map(s=>e.jsx(ae,{value:s,children:s},s))]})]}),e.jsxs(bs,{children:[e.jsx(ws,{asChild:!0,children:e.jsxs(n,{variant:"outline",children:[e.jsx(Ke,{size:16,className:"mr-2"}),"Export"]})}),e.jsxs(ks,{children:[e.jsxs(te,{onClick:()=>Xs(),children:[e.jsx(at,{size:16,className:"mr-2"}),"Export to CSV"]}),e.jsxs(te,{onClick:()=>window.print(),children:[e.jsx(dt,{size:16,className:"mr-2"}),"Print"]})]})]}),e.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[e.jsx(n,{variant:ye==="list"?"default":"ghost",size:"sm",onClick:()=>os("list"),className:"rounded-none",children:e.jsx(nt,{size:16})}),e.jsx(n,{variant:ye==="grid"?"default":"ghost",size:"sm",onClick:()=>os("grid"),className:"rounded-none",children:e.jsx(rt,{size:16})})]})]})})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-gray-500",children:k.length===0?"No talent data loaded":`Showing ${de.length} of ${O.length} results`}),(P||J!=="all"||Z!=="all")&&e.jsxs(n,{variant:"ghost",size:"sm",onClick:()=>{we(""),ke("all"),Ce("all")},children:[e.jsx(je,{size:16,className:"mr-2"}),"Clear Filters"]})]}),ye==="list"?e.jsxs(y,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-50/50",children:[e.jsx("th",{className:"text-left p-4 font-medium text-sm",children:"Talent"}),e.jsx("th",{className:"text-left p-4 font-medium text-sm",children:"Headline"}),e.jsx("th",{className:"text-left p-4 font-medium text-sm",children:"Industry"}),e.jsx("th",{className:"text-left p-4 font-medium text-sm",children:"Seniority"}),e.jsx("th",{className:"text-left p-4 font-medium text-sm",children:"Status"}),e.jsx("th",{className:"text-left p-4 font-medium text-sm",children:"Submitted"}),e.jsx("th",{className:"text-right p-4 font-medium text-sm",children:"Actions"})]})}),e.jsx("tbody",{children:de.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50/50",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-gradient-to-br from-pink-500 to-orange-400 text-white font-medium",children:(s.profiles?.full_name||s.headline)?.charAt(0).toUpperCase()||"?"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.profiles?.full_name||s.headline||"Anonymous"}),e.jsx("p",{className:"text-sm text-gray-500",children:s.profiles?.email||"No email"})]})]})}),e.jsx("td",{className:"p-4 max-w-xs truncate",children:s.headline||"-"}),e.jsx("td",{className:"p-4",children:e.jsx(x,{variant:"outline",children:s.industry||"-"})}),e.jsx("td",{className:"p-4",children:s.seniority_level||"-"}),e.jsx("td",{className:"p-4",children:e.jsx(G,{status:s.status,type:"talent"})}),e.jsx("td",{className:"p-4 text-sm text-gray-500",children:s.submitted_at?D(K(s.submitted_at),"MMM dd, yyyy"):"-"}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>X(s),children:e.jsx(le,{size:16})}),s.status==="submitted"&&e.jsx(n,{size:"sm",onClick:()=>{const a=ne.find(t=>t.id===s.id);a&&U(a)},children:"Review"}),e.jsxs(bs,{children:[e.jsx(ws,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"sm",children:e.jsx(Va,{size:16})})}),e.jsxs(ks,{align:"end",children:[e.jsxs(te,{onClick:()=>X(s),children:[e.jsx(le,{size:16,className:"mr-2"}),"View Details"]}),s.cv_file_path&&e.jsx(te,{asChild:!0,children:e.jsxs("a",{href:`http://supabasekong-dcgko804wcgwow4s4ko40000.145.223.96.191.sslip.io/storage/v1/object/public/talent-cvs/${s.cv_file_path}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Ke,{size:16,className:"mr-2"}),"Download CV"]})}),e.jsx(ua,{}),e.jsxs(te,{className:"text-red-600",onClick:()=>W({id:s.id,name:s.profiles?.full_name||"Unknown"}),children:[e.jsx(Je,{size:16,className:"mr-2"}),"Delete"]})]})]})]})})]},s.id))})]})}),de.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(xt,{size:48,className:"mx-auto mb-4 text-gray-300"}),k.length===0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"No talent data available"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Check database connection or RLS policies"})]}):O.length===0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"No talent found matching your criteria"}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>{we(""),ke("all"),Ce("all")},children:"Clear Filters"})]}):null]})]}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:de.map(s=>e.jsx(vt,{talent:s,onView:()=>X(s),onReview:()=>{const a=ne.find(t=>t.id===s.id);a&&U(a)},onDelete:()=>W({id:s.id,name:s.profiles?.full_name||"Unknown"})},s.id))}),me>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(n,{variant:"outline",onClick:()=>xs(s=>Math.max(1,s-1)),disabled:ee===1,children:[e.jsx(ta,{size:16,className:"mr-2"}),"Previous"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Page ",ee," of ",me]}),e.jsxs(n,{variant:"outline",onClick:()=>xs(s=>Math.min(me,s+1)),disabled:ee===me,children:["Next",e.jsx(ra,{size:16,className:"ml-2"})]})]})]}),e.jsx(B,{value:"sponsors",className:"space-y-6",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(y,{children:[e.jsx(S,{children:e.jsxs(T,{className:"font-serif text-lg flex items-center gap-2",children:[e.jsx(Ss,{size:20,className:"text-orange-500"}),"Pending Approvals",ie.length>0&&e.jsx(x,{variant:"destructive",children:ie.length})]})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[ie.map(s=>e.jsxs("div",{className:"p-4 rounded-lg border hover:shadow-md transition-shadow",style:{borderColor:"var(--border)"},children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-500 text-white font-bold text-lg",children:s.full_name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.full_name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email}),e.jsxs("p",{className:"text-sm",children:[s.title," at ",s.org_name]}),s.sponsor_type&&e.jsx(x,{variant:"secondary",className:"mt-1",children:Ma.find(a=>a.value===s.sponsor_type)?.label})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{size:"sm",variant:"outline",onClick:()=>us("rejected"),children:[e.jsx(je,{size:16,className:"mr-1"}),"Reject"]}),e.jsxs(n,{size:"sm",onClick:()=>us("approved"),children:[e.jsx(H,{size:16,className:"mr-1"}),"Approve"]})]})]}),s.commitment_note&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded text-sm italic",children:['"',s.commitment_note,'"']})]},s.id)),ie.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(H,{className:"mx-auto mb-4 text-green-500",size:48}),e.jsx("p",{className:"text-gray-500",children:"No pending sponsor approvals"})]})]})})]}),e.jsxs(y,{children:[e.jsx(S,{children:e.jsx(T,{className:"font-serif text-lg",children:"All Sponsors"})}),e.jsx(C,{children:e.jsx(Ue,{className:"h-96",children:e.jsx("div",{className:"space-y-3",children:ve.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",style:{borderColor:"var(--border)"},children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.profiles?.full_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.org_name," • ",s.title]})]}),e.jsx(G,{status:s.status,type:"sponsor"})]},s.id))})})})]})]})}),e.jsx(B,{value:"requests",className:"space-y-6",children:e.jsxs(y,{children:[e.jsxs(S,{children:[e.jsx(T,{className:"font-serif text-lg",children:"Recommendation Requests"}),e.jsx(re,{children:"Track sponsor requests to talent"})]}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[ss.map(s=>e.jsxs("div",{className:"p-4 rounded-lg border hover:shadow-md transition-shadow",style:{borderColor:"var(--border)"},children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mb-1",children:e.jsx(qe,{size:18,className:"text-blue-600"})}),e.jsx("p",{className:"text-xs text-gray-500",children:s.sponsor_name?.split(" ")[0]})]}),e.jsx(la,{className:"text-gray-300"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-pink-100 flex items-center justify-center mb-1",children:e.jsx(Oe,{size:18,className:"text-pink-600"})}),e.jsx("p",{className:"text-xs text-gray-500",children:s.talent_name?.split(" ")[0]})]})]}),e.jsx(G,{status:s.status,type:"request"})]}),e.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:e.jsxs("p",{className:"text-sm italic",children:['"',s.message,'"']})}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500",children:[e.jsx("span",{children:D(K(s.created_at),"MMM dd, yyyy HH:mm")}),e.jsx("span",{children:s.sponsor_org})]})]},s.id)),ss.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Be,{className:"mx-auto mb-4 text-gray-300",size:48}),e.jsx("p",{className:"text-gray-500",children:"No recommendation requests yet"})]})]})})]})}),e.jsx(B,{value:"messages",className:"space-y-6",children:e.jsxs(y,{children:[e.jsxs(S,{children:[e.jsxs(T,{className:"font-serif text-lg flex items-center gap-2",children:[e.jsx(Ve,{size:20}),"Contact Submissions",Q.filter(s=>s.status==="new").length>0&&e.jsxs(x,{variant:"destructive",children:[Q.filter(s=>s.status==="new").length," new"]})]}),e.jsx(re,{children:"Messages from the contact form"})]}),e.jsx(C,{children:e.jsx("div",{className:"space-y-4",children:Q.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ve,{className:"mx-auto mb-4 text-gray-300",size:48}),e.jsx("p",{className:"text-gray-500",children:"No contact submissions yet"})]}):Q.map(s=>e.jsxs("div",{className:"p-4 rounded-lg border hover:shadow-md transition-shadow",style:{borderColor:"var(--border)"},children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-gradient-to-br from-green-500 to-teal-400 text-white font-bold",children:s.full_name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.full_name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(x,{variant:"outline",children:s.inquiry_type}),s.organization&&e.jsxs("span",{className:"text-xs text-gray-400",children:["@ ",s.organization]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{status:s.status,type:"contact"}),s.status==="new"&&e.jsxs(n,{size:"sm",variant:"outline",onClick:async()=>{await wa(s.id,"read"),await M()},children:[e.jsx(H,{size:16,className:"mr-1"}),"Mark Read"]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.message})}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Received ",D(K(s.created_at),"MMM dd, yyyy HH:mm")]}),e.jsx("a",{href:`mailto:${s.email}?subject=Re: ${s.inquiry_type}`,className:"text-blue-600 hover:underline",children:"Reply via Email"})]})]},s.id))})})]})}),e.jsx(B,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(y,{children:[e.jsx(S,{children:e.jsx(T,{className:"font-serif text-lg",children:"Submissions Over Time"})}),e.jsx(C,{children:e.jsx("div",{className:"h-80",children:e.jsx(Ge,{width:"100%",height:"100%",children:e.jsxs(Ia,{data:Ks,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorSubmissions",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:R.primary,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:R.primary,stopOpacity:0})]})}),e.jsx(Ts,{strokeDasharray:"3 3",stroke:"#eee"}),e.jsx(zs,{dataKey:"name",tick:{fontSize:12}}),e.jsx(As,{tick:{fontSize:12}}),e.jsx(Qe,{}),e.jsx($a,{type:"monotone",dataKey:"value",stroke:R.primary,fillOpacity:1,fill:"url(#colorSubmissions)"})]})})})})]}),e.jsxs(y,{children:[e.jsx(S,{children:e.jsx(T,{className:"font-serif text-lg",children:"Talent by Status"})}),e.jsxs(C,{children:[e.jsx("div",{className:"h-80",children:e.jsx(Ge,{width:"100%",height:"100%",children:e.jsxs(Ha,{children:[e.jsx(qa,{data:Se,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:Se.map((s,a)=>e.jsx(Ka,{fill:ge[a%ge.length]},`cell-${a}`))}),e.jsx(Qe,{})]})})}),e.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:Se.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ge[a%ge.length]}}),e.jsxs("span",{className:"text-sm",children:[s.name,": ",s.value]})]},s.name))})]})]}),e.jsxs(y,{className:"lg:col-span-2",children:[e.jsx(S,{children:e.jsx(T,{className:"font-serif text-lg",children:"Approved Talent by Industry"})}),e.jsx(C,{children:e.jsx("div",{className:"h-80",children:e.jsx(Ge,{width:"100%",height:"100%",children:e.jsxs(Xa,{data:qs,layout:"vertical",children:[e.jsx(Ts,{strokeDasharray:"3 3",stroke:"#eee"}),e.jsx(zs,{type:"number",tick:{fontSize:12}}),e.jsx(As,{dataKey:"name",type:"category",width:120,tick:{fontSize:12}}),e.jsx(Qe,{}),e.jsx(Ga,{dataKey:"value",fill:R.primary,radius:[0,4,4,0]})]})})})})]})]})})]})]}),e.jsx(xe,{open:!!N,onOpenChange:()=>U(null),children:e.jsxs(he,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(pe,{children:[e.jsx(ue,{className:"font-serif text-2xl",children:"Review Talent Profile"}),e.jsx(Me,{children:"Review and approve or reject this talent submission"})]}),N&&e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsx("div",{className:"p-6 rounded-xl bg-gradient-to-br from-gray-50 to-white border",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center text-white font-bold text-2xl bg-gradient-to-br from-pink-500 to-orange-400",children:N.full_name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold",children:N.full_name}),e.jsx("p",{className:"text-gray-500",children:N.email}),e.jsx("p",{className:"mt-2 text-lg",children:N.headline}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[e.jsx(x,{children:N.industry}),e.jsx(x,{variant:"outline",children:N.seniority_level}),e.jsxs(x,{variant:"secondary",children:[N.years_experience," years exp"]})]})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[N.linkedin_url&&e.jsx(n,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:N.linkedin_url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(na,{size:18,className:"mr-2"}),"LinkedIn"]})}),N.cv_file_path&&e.jsx(n,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:`http://supabasekong-dcgko804wcgwow4s4ko40000.145.223.96.191.sslip.io/storage/v1/object/public/talent-cvs/${N.cv_file_path}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Ms,{size:18,className:"mr-2"}),"View CV"]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx($e,{className:"text-base font-medium",children:"Decision"}),e.jsx("div",{className:"grid grid-cols-3 gap-3 mt-2",children:["approved","needs_changes","rejected"].map(s=>e.jsxs("button",{type:"button",onClick:()=>Os(s),className:`p-4 rounded-lg border-2 text-center transition-all ${rs===s?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,children:[s==="approved"&&e.jsx(H,{className:"mx-auto mb-2 text-green-500",size:24}),s==="needs_changes"&&e.jsx(ct,{className:"mx-auto mb-2 text-orange-500",size:24}),s==="rejected"&&e.jsx(je,{className:"mx-auto mb-2 text-red-500",size:24}),e.jsx("span",{className:"font-medium capitalize",children:s.replace("_"," ")})]},s))})]}),e.jsxs("div",{children:[e.jsx($e,{htmlFor:"feedback",children:"Feedback to Talent"}),e.jsx(ys,{id:"feedback",value:ls,onChange:s=>ns(s.target.value),placeholder:"This will be visible to the talent...",rows:3,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx($e,{htmlFor:"internal",children:"Internal Notes (Admin Only)"}),e.jsx(ys,{id:"internal",value:is,onChange:s=>cs(s.target.value),placeholder:"Private notes for admin team...",rows:2,className:"mt-2"})]})]})]}),e.jsxs(De,{children:[e.jsx(n,{variant:"outline",onClick:()=>U(null),children:"Cancel"}),e.jsx(n,{onClick:Gs,style:{backgroundColor:"var(--primary)"},children:"Submit Review"})]})]})}),e.jsx(xe,{open:!!m,onOpenChange:()=>X(null),children:e.jsxs(he,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(pe,{children:e.jsx(ue,{className:"font-serif text-2xl",children:"Talent Profile Details"})}),m&&e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl bg-gradient-to-br from-pink-500 to-orange-400",children:m.profiles?.full_name?.charAt(0).toUpperCase()||"?"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold",children:m.profiles?.full_name}),e.jsx("p",{className:"text-lg text-gray-600",children:m.headline}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[e.jsx(G,{status:m.status,type:"talent"}),e.jsx(x,{variant:"outline",children:m.industry}),e.jsx(x,{variant:"secondary",children:m.seniority_level})]})]})]}),e.jsx(ja,{}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(Ya,{size:18})," Contact"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Email:"})," ",m.profiles?.email]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"LinkedIn:"})," ",e.jsx("a",{href:m.linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"View Profile"})]}),m.portfolio_url&&e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Portfolio:"})," ",e.jsx("a",{href:m.portfolio_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"View"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(qe,{size:18})," Experience"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Years:"})," ",m.years_experience]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Industry:"})," ",m.industry]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Seniority:"})," ",m.seniority_level]})]})]})]}),m.bio&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Bio"}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:m.bio})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[m.functions&&m.functions.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Functions"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.functions.map(s=>e.jsx(x,{variant:"outline",children:s},s))})]}),m.skills&&m.skills.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.skills.map(s=>e.jsx(x,{variant:"secondary",children:s},s))})]})]}),m.cv_file_path&&e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ms,{size:24,className:"text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"CV/Resume"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Uploaded"})]})]}),e.jsx(n,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:`http://supabasekong-dcgko804wcgwow4s4ko40000.145.223.96.191.sslip.io/storage/v1/object/public/talent-cvs/${m.cv_file_path}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Ke,{size:16,className:"mr-2"}),"Download"]})})]})]})]})}),e.jsx(xe,{open:!!Y,onOpenChange:()=>W(null),children:e.jsxs(he,{className:"max-w-md",children:[e.jsxs(pe,{children:[e.jsxs(ue,{className:"font-serif text-xl text-red-600 flex items-center gap-2",children:[e.jsx(He,{size:24}),"Delete Profile?"]}),e.jsxs(Me,{children:["This will permanently delete ",e.jsx("strong",{children:Y?.name}),"'s profile and all associated data. This action cannot be undone."]})]}),e.jsxs(De,{className:"gap-2",children:[e.jsx(n,{variant:"outline",onClick:()=>W(null),children:"Cancel"}),e.jsxs(n,{variant:"destructive",onClick:Qs,children:[e.jsx(Je,{size:16,className:"mr-2"}),"Delete Permanently"]})]})]})}),e.jsx(xe,{open:Ne,onOpenChange:A,children:e.jsxs(he,{className:"max-w-3xl max-h-[85vh] overflow-y-auto",children:[e.jsxs(pe,{children:[e.jsxs(ue,{className:"font-serif text-2xl",children:[p==="pending_reviews"&&"Pending Reviews",p==="pending_sponsors"&&"Pending Sponsors",p==="approved_talent"&&"Approved Talent",p==="active_sponsors"&&"Active Sponsors"]}),e.jsx(Me,{children:ds?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(V,{size:16,className:"animate-spin"}),"Loading data..."]}):e.jsxs(e.Fragment,{children:[p==="pending_reviews"&&e.jsxs("span",{children:[_.pendingTalent.length," talent awaiting approval"]}),p==="pending_sponsors"&&e.jsxs("span",{children:[_.pendingSponsors.length," sponsors awaiting approval"]}),p==="approved_talent"&&e.jsxs("span",{children:[_.approvedTalent.length," approved talent profiles"]}),p==="active_sponsors"&&e.jsxs("span",{children:[_.activeSponsors.length," active sponsor profiles"]})]})})]}),e.jsx("div",{className:"space-y-3 py-4",children:ds?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(V,{size:32,className:"animate-spin text-primary"})}):e.jsxs(e.Fragment,{children:[p==="pending_reviews"&&(_.pendingTalent.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No pending reviews"}):_.pendingTalent.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-orange-400 text-white flex items-center justify-center font-medium",children:s.full_name?.charAt(0).toUpperCase()||"?"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.full_name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email}),e.jsx("p",{className:"text-xs text-gray-400 truncate max-w-md",children:s.headline})]})]}),e.jsx(n,{size:"sm",onClick:()=>{U(s),A(!1)},children:"Review"})]},s.id))),p==="pending_sponsors"&&(_.pendingSponsors.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No pending sponsors"}):_.pendingSponsors.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-400 text-white flex items-center justify-center font-medium",children:s.company_name?.charAt(0).toUpperCase()||"?"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.company_name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.contact_email}),e.jsx("p",{className:"text-xs text-gray-400",children:s.industry})]})]}),e.jsx(n,{size:"sm",onClick:()=>{ts(s),A(!1)},children:"Review"})]},s.id))),p==="approved_talent"&&(_.approvedTalent.length===0?e.jsxs("div",{className:"text-center py-8 space-y-4",children:[e.jsx("p",{className:"text-gray-500",children:"No approved talent found"}),(h?.approved_talent||0)>0&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm text-amber-600",children:["Note: Metrics show ",h?.approved_talent," approved talent, but none loaded."]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{M(),Fe({status:"approved",limit:500}).then(({data:s})=>{E(a=>({...a,approvedTalent:s||[]}))})},children:[e.jsx(V,{size:14,className:"mr-2"}),"Refresh Data"]})]})]}):_.approvedTalent.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-teal-400 text-white flex items-center justify-center font-medium",children:s.profiles?.full_name?.charAt(0).toUpperCase()||"?"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.profiles?.full_name}),e.jsx("p",{className:"text-sm text-gray-500 truncate max-w-md",children:s.headline}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(x,{variant:"outline",className:"text-xs",children:s.industry}),e.jsx(x,{variant:"secondary",className:"text-xs",children:s.seniority_level})]})]})]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{X(s),A(!1)},children:[e.jsx(le,{size:16,className:"mr-1"}),"View"]})]},s.id))),p==="active_sponsors"&&(_.activeSponsors.length===0?e.jsxs("div",{className:"text-center py-8 space-y-4",children:[e.jsx("p",{className:"text-gray-500",children:"No active sponsors found"}),(h?.approved_sponsors||0)>0&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm text-amber-600",children:["Note: Metrics show ",h?.approved_sponsors," approved sponsors, but none loaded."]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{M(),Ie({status:"approved",limit:500}).then(({data:s})=>{E(a=>({...a,activeSponsors:s||[]}))})},children:[e.jsx(V,{size:14,className:"mr-2"}),"Refresh Data"]})]})]}):_.activeSponsors.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-400 text-white flex items-center justify-center font-medium",children:s.company_name?.charAt(0).toUpperCase()||"?"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.company_name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.contact_email}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(x,{variant:"outline",className:"text-xs",children:s.industry}),e.jsx(x,{variant:"secondary",className:"text-xs",children:s.company_size})]})]})]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>o("sponsors"),children:[e.jsx(le,{size:16,className:"mr-1"}),"View"]})]},s.id)))]})}),e.jsxs(De,{children:[e.jsx(n,{variant:"outline",onClick:()=>A(!1),children:"Close"}),e.jsx(n,{onClick:()=>{o(p==="pending_reviews"||p==="approved_talent"?"talent":"sponsors"),A(!1)},children:"View Full Page"})]})]})})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{backgroundColor:"var(--background)"},children:e.jsxs(y,{className:"w-full max-w-md",children:[e.jsxs(S,{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:"var(--primary)"},children:e.jsx(La,{className:"text-white",size:32})}),e.jsx(T,{className:"font-serif text-2xl",children:"Admin Login"}),e.jsx(re,{children:"Enter password to access admin dashboard"})]}),e.jsxs(C,{children:[e.jsxs("form",{onSubmit:s=>{s.preventDefault(),I===Ls?c(!0):w("Incorrect password")},className:"space-y-4",children:[e.jsx(fs,{type:"password",placeholder:"Enter admin password",value:I,onChange:s=>Rs(s.target.value),className:"h-12"}),e.jsx(n,{type:"submit",className:"w-full h-12",style:{backgroundColor:"var(--primary)"},children:"Login"})]}),f&&e.jsx("p",{className:"text-center mt-4 text-sm text-red-500",children:f}),e.jsxs("p",{className:"text-center mt-4 text-xs text-gray-500",children:["Default: ",e.jsx("code",{children:"admin123"})]})]})]})})},fe=({icon:l,label:o,value:d,trend:c,color:z,onClick:g})=>{const w={orange:{bg:"bg-orange-100",text:"text-orange-600",icon:"text-orange-500"},blue:{bg:"bg-blue-100",text:"text-blue-600",icon:"text-blue-500"},green:{bg:"bg-green-100",text:"text-green-600",icon:"text-green-500"},purple:{bg:"bg-purple-100",text:"text-purple-600",icon:"text-purple-500"}}[z];return e.jsx(y,{className:`${g?"cursor-pointer hover:shadow-md hover:border-primary/50 transition-all":""}`,onClick:g,children:e.jsxs(C,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`p-3 rounded-lg ${w.bg}`,children:e.jsx(l,{className:w.icon,size:24})}),c!=="neutral"&&e.jsx("div",{className:`flex items-center gap-1 text-sm ${c==="up"?"text-green-600":"text-red-600"}`,children:c==="up"?e.jsx(ia,{size:16}):e.jsx(Qa,{size:16})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-3xl font-bold",children:d}),e.jsx("p",{className:"text-sm text-gray-500",children:o})]})]})})},Ye=({icon:l,label:o,value:d})=>e.jsxs(y,{className:"flex items-center gap-4 p-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-100",children:e.jsx(l,{className:"text-gray-600",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:d}),e.jsx("p",{className:"text-sm text-gray-500",children:o})]})]}),G=({status:l,type:o})=>{const d={approved:"default",rejected:"destructive",submitted:"secondary",vetted:"outline",draft:"outline",pending:"outline",requested:"secondary",accepted:"default",declined:"destructive",intro_sent:"secondary",closed:"outline",new:"destructive",read:"secondary",replied:"default",archived:"outline"},c={approved:"bg-green-100 text-green-700 hover:bg-green-100",submitted:"bg-orange-100 text-orange-700 hover:bg-orange-100",vetted:"bg-blue-100 text-blue-700 hover:bg-blue-100",pending:"bg-yellow-100 text-yellow-700 hover:bg-yellow-100",requested:"bg-purple-100 text-purple-700 hover:bg-purple-100",accepted:"bg-green-100 text-green-700 hover:bg-green-100",intro_sent:"bg-blue-100 text-blue-700 hover:bg-blue-100",read:"bg-blue-100 text-blue-700 hover:bg-blue-100",replied:"bg-green-100 text-green-700 hover:bg-green-100"},z=d[l]||"outline",g=c[l]||"",f={...We,...Ra,...Da,new:"New",read:"Read",replied:"Replied",archived:"Archived"};return e.jsx(x,{variant:z,className:g,children:f[l]||l})},vt=({talent:l,onView:o,onReview:d,onDelete:c})=>e.jsx(y,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-lg bg-gradient-to-br from-pink-500 to-orange-400",children:(l.profiles?.full_name||l.headline)?.charAt(0).toUpperCase()||"?"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:l.profiles?.full_name||l.headline||"Anonymous"}),e.jsx("p",{className:"text-sm text-gray-500",children:l.profiles?.email||"No email"})]})]}),e.jsx(G,{status:l.status,type:"talent"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm line-clamp-2",children:l.headline||"No headline"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[l.industry&&e.jsx(x,{variant:"outline",children:l.industry}),l.seniority_level&&e.jsx(x,{variant:"secondary",children:l.seniority_level})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[e.jsx("span",{className:"text-xs text-gray-500",children:l.submitted_at?D(K(l.submitted_at),"MMM dd, yyyy"):"Not submitted"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:o,children:e.jsx(le,{size:16})}),l.status==="submitted"&&e.jsx(n,{size:"sm",onClick:d,children:"Review"}),e.jsx(n,{variant:"ghost",size:"sm",onClick:c,className:"text-red-600 hover:text-red-700",children:e.jsx(Je,{size:16})})]})]})]})});export{nr as default};
