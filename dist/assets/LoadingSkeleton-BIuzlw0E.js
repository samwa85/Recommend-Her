import{c as P,r as h,j as r,l as Ee,m as De,a as v,X as ue,n as ke,u as Me,B as E,M as Ie,N as de,h as Ce}from"./index-qoOME8mY.js";import{I as qe}from"./input-COdB9PMO.js";import{t as D,e as Le,n as Q,g as G,f as Ae,h as Re,m as K,i as C,p as fe,j as Te,k as he,L as Pe,C as Oe,D as Z,a as ee,b as te,d as O,c as q}from"./parseISO-Dkgfv3AF.js";import{B as R}from"./badge-DS90lYj3.js";import{d as $e,e as J,R as Be,C as Ue,f as ze,T as Fe,D as He,g as Ve,h as Xe,O as Je}from"./index-EHAx_rFm.js";import"./tslib.es6-ByNH4KU3.js";import{c as Qe,C as Ye}from"./index-Bq8Hpwnx.js";import{U as $}from"./users-B7vsRM7J.js";import{B as We}from"./building-2-LyC4uWQT.js";import{M as Ge}from"./message-square-CE0bfcV6.js";import{M as B}from"./mail-hjAr2Bly.js";import{S as me}from"./shield-CPwMl-BC.js";import{S as se}from"./search-BPQDrF8n.js";import{B as Ke}from"./bell-B4cYDKmo.js";import{S as w}from"./skeleton-Br7kL-uo.js";import{C as ge,a as Ze,d as pe}from"./index-CsKqCIzL.js";const et=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],tt=P("log-out",et);const st=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],rt=P("moon",st);const at=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nt=P("settings",at);const ot=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],ct=P("sun",ot);function it(t,e=[]){let s=[];function o(i,f){const a=h.createContext(f);a.displayName=i+"Context";const c=s.length;s=[...s,f];const l=u=>{const{scope:m,children:p,...x}=u,y=m?.[t]?.[c]||a,b=h.useMemo(()=>x,Object.values(x));return r.jsx(y.Provider,{value:b,children:p})};l.displayName=i+"Provider";function d(u,m){const p=m?.[t]?.[c]||a,x=h.useContext(p);if(x)return x;if(f!==void 0)return f;throw new Error(`\`${u}\` must be used within \`${i}\``)}return[l,d]}const n=()=>{const i=s.map(f=>h.createContext(f));return function(a){const c=a?.[t]||i;return h.useMemo(()=>({[`__scope${t}`]:{...a,[t]:c}}),[a,c])}};return n.scopeName=t,[o,lt(n,...e)]}function lt(...t){const e=t[0];if(t.length===1)return e;const s=()=>{const o=t.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(i){const f=o.reduce((a,{useScope:c,scopeName:l})=>{const u=c(i)[`__scope${l}`];return{...a,...u}},{});return h.useMemo(()=>({[`__scope${e.scopeName}`]:f}),[f])}};return s.scopeName=e.scopeName,s}var ut=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Y=ut.reduce((t,e)=>{const s=Ee(`Primitive.${e}`),o=h.forwardRef((n,i)=>{const{asChild:f,...a}=n,c=f?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...a,ref:i})});return o.displayName=`Primitive.${e}`,{...t,[e]:o}},{}),U={exports:{}},z={};var re;function dt(){if(re)return z;re=1;var t=De();function e(u,m){return u===m&&(u!==0||1/u===1/m)||u!==u&&m!==m}var s=typeof Object.is=="function"?Object.is:e,o=t.useState,n=t.useEffect,i=t.useLayoutEffect,f=t.useDebugValue;function a(u,m){var p=m(),x=o({inst:{value:p,getSnapshot:m}}),y=x[0].inst,b=x[1];return i(function(){y.value=p,y.getSnapshot=m,c(y)&&b({inst:y})},[u,p,m]),n(function(){return c(y)&&b({inst:y}),u(function(){c(y)&&b({inst:y})})},[u]),f(p),p}function c(u){var m=u.getSnapshot;u=u.value;try{var p=m();return!s(u,p)}catch{return!0}}function l(u,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:a;return z.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,z}var ae;function ft(){return ae||(ae=1,U.exports=dt()),U.exports}var ht=ft();function mt(){return ht.useSyncExternalStore(gt,()=>!0,()=>!1)}function gt(){return()=>{}}var W="Avatar",[pt]=it(W),[xt,xe]=pt(W),ye=h.forwardRef((t,e)=>{const{__scopeAvatar:s,...o}=t,[n,i]=h.useState("idle");return r.jsx(xt,{scope:s,imageLoadingStatus:n,onImageLoadingStatusChange:i,children:r.jsx(Y.span,{...o,ref:e})})});ye.displayName=W;var we="AvatarImage",yt=h.forwardRef((t,e)=>{const{__scopeAvatar:s,src:o,onLoadingStatusChange:n=()=>{},...i}=t,f=xe(we,s),a=wt(o,i),c=$e(l=>{n(l),f.onImageLoadingStatusChange(l)});return J(()=>{a!=="idle"&&c(a)},[a,c]),a==="loaded"?r.jsx(Y.img,{...i,ref:e,src:o}):null});yt.displayName=we;var ve="AvatarFallback",Se=h.forwardRef((t,e)=>{const{__scopeAvatar:s,delayMs:o,...n}=t,i=xe(ve,s),[f,a]=h.useState(o===void 0);return h.useEffect(()=>{if(o!==void 0){const c=window.setTimeout(()=>a(!0),o);return()=>window.clearTimeout(c)}},[o]),f&&i.imageLoadingStatus!=="loaded"?r.jsx(Y.span,{...n,ref:e}):null});Se.displayName=ve;function ne(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function wt(t,{referrerPolicy:e,crossOrigin:s}){const o=mt(),n=h.useRef(null),i=o?(n.current||(n.current=new window.Image),n.current):null,[f,a]=h.useState(()=>ne(i,t));return J(()=>{a(ne(i,t))},[i,t]),J(()=>{const c=u=>()=>{a(u)};if(!i)return;const l=c("loaded"),d=c("error");return i.addEventListener("load",l),i.addEventListener("error",d),e&&(i.referrerPolicy=e),typeof s=="string"&&(i.crossOrigin=s),()=>{i.removeEventListener("load",l),i.removeEventListener("error",d)}},[i,s,e]),f}var vt=ye,St=Se;function _t({className:t,...e}){return r.jsx(vt,{"data-slot":"avatar",className:v("relative flex size-8 shrink-0 overflow-hidden rounded-full",t),...e})}function jt({className:t,...e}){return r.jsx(St,{"data-slot":"avatar-fallback",className:v("bg-muted flex size-full items-center justify-center rounded-full",t),...e})}function bt({...t}){return r.jsx(Be,{"data-slot":"sheet",...t})}function Nt({...t}){return r.jsx(Ve,{"data-slot":"sheet-trigger",...t})}function Et({...t}){return r.jsx(Xe,{"data-slot":"sheet-portal",...t})}function Dt({className:t,...e}){return r.jsx(Je,{"data-slot":"sheet-overlay",className:v("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function kt({className:t,children:e,side:s="right",...o}){return r.jsxs(Et,{children:[r.jsx(Dt,{}),r.jsxs(Ue,{"data-slot":"sheet-content",className:v("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",s==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",s==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",s==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",s==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...o,children:[e,r.jsxs(ze,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[r.jsx(ue,{className:"size-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function As({className:t,...e}){return r.jsx("div",{"data-slot":"sheet-header",className:v("flex flex-col gap-1.5 p-4",t),...e})}function Rs({className:t,...e}){return r.jsx(Fe,{"data-slot":"sheet-title",className:v("text-foreground font-semibold",t),...e})}function Ts({className:t,...e}){return r.jsx(He,{"data-slot":"sheet-description",className:v("text-muted-foreground text-sm",t),...e})}let L=null;function Mt(){return L||(L=Qe("http://supabasekong-dcgko804wcgwow4s4ko40000.145.223.96.191.sslip.io","eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJzdXBhYmFzZSIsImlhdCI6MTc3MDg5MTcyMCwiZXhwIjo0OTI2NTY1MzIwLCJyb2xlIjoiYW5vbiJ9.o3IrcUgo8uwNNWSshycVC6CgyxA7KExx_RR5DLwJRmE"),L)}const g=Mt();async function Ps(t,e,s=3600){try{const{data:o,error:n}=await g.storage.from(e).createSignedUrl(t,s);if(n)throw n;return o?.signedUrl||null}catch(o){return console.error("Error getting signed URL:",o),null}}const oe={APPROVED:"approved",REJECTED:"rejected",ARCHIVED:"archived"},Os={ACTIVE:"active",INACTIVE:"inactive",ARCHIVED:"archived"},$s={LOW:"low",NORMAL:"normal",HIGH:"high",URGENT:"urgent"},ce={APPROVED:"approved",CLOSED:"closed"},_e={UNREAD:"unread",READ:"read",REPLIED:"replied",ARCHIVED:"archived",SPAM:"spam"},It={pending:"Pending Review",approved:"Approved",rejected:"Rejected",archived:"Archived"},Ct={active:"Active",inactive:"Inactive",archived:"Archived"},qt={open:"Open",in_review:"In Review",approved:"Approved",rejected:"Rejected",closed:"Closed"},Bs={low:"Low",normal:"Normal",high:"High",urgent:"Urgent"},Lt={unread:"Unread",read:"Read",replied:"Replied",archived:"Archived",spam:"Spam"},At={...It,...Ct,...qt,...Lt};function Us(t){return At[t]||t}const zs={pending:"secondary",approved:"default",rejected:"destructive",archived:"outline",active:"default",inactive:"secondary",open:"secondary",in_review:"outline",closed:"outline",unread:"secondary",read:"outline",replied:"default",spam:"destructive"};function je(t){const e={23505:"A record with this information already exists.",23503:"This record is referenced by other data and cannot be modified.",23514:"Invalid data: some field values do not meet requirements.",23502:"Required field is missing.",P0001:"The operation could not be completed."};return t.code&&e[t.code]?e[t.code]:t.message?.includes("JWT")?"Session expired. Please log in again.":t.message?.includes("network")?"Network error. Please check your connection and try again.":t.message?.includes("timeout")?"Request timed out. Please try again.":t.code==="404"||t.message?.includes("not found")?"The requested record was not found.":t.message||"An unexpected error occurred"}function be(t){let e;return typeof t=="object"&&t!==null&&"code"in t?e=je(t):t instanceof Error?e=t.message:e=String(t)||"An unexpected error occurred",console.error("[Query Error]:",t),{data:[],count:0,error:new Error(e)}}function j(t){let e;return typeof t=="object"&&t!==null&&"code"in t?e=je(t):t instanceof Error?e=t.message:e=String(t)||"An unexpected error occurred",console.error("[Query Error]:",t),{data:null,error:new Error(e)}}function T(t,e){const s=+D(t)-+D(e);return s<0?-1:s>0?1:s}function Rt(t){return Le(t,Date.now())}function Tt(t,e,s){const[o,n]=Q(s?.in,t,e),i=o.getFullYear()-n.getFullYear(),f=o.getMonth()-n.getMonth();return i*12+f}function Pt(t){return e=>{const o=(t?Math[t]:Math.trunc)(e);return o===0?0:o}}function Ot(t,e){return+D(t)-+D(e)}function $t(t,e){const s=D(t,e?.in);return s.setHours(23,59,59,999),s}function Bt(t,e){const s=D(t,e?.in),o=s.getMonth();return s.setFullYear(s.getFullYear(),o+1,0),s.setHours(23,59,59,999),s}function Ut(t,e){const s=D(t,e?.in);return+$t(s,e)==+Bt(s,e)}function zt(t,e,s){const[o,n,i]=Q(s?.in,t,t,e),f=T(n,i),a=Math.abs(Tt(n,i));if(a<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-f*a);let c=T(n,i)===-f;Ut(o)&&a===1&&T(o,i)===1&&(c=!1);const l=f*(a-+c);return l===0?0:l}function Ft(t,e,s){const o=Ot(t,e)/1e3;return Pt(s?.roundingMethod)(o)}function Ht(t,e,s){const o=Ae(),n=s?.locale??o.locale??Re,i=2520,f=T(t,e);if(isNaN(f))throw new RangeError("Invalid time value");const a=Object.assign({},s,{addSuffix:s?.addSuffix,comparison:f}),[c,l]=Q(s?.in,...f>0?[e,t]:[t,e]),d=Ft(l,c),u=(G(l)-G(c))/1e3,m=Math.round((d-u)/60);let p;if(m<2)return s?.includeSeconds?d<5?n.formatDistance("lessThanXSeconds",5,a):d<10?n.formatDistance("lessThanXSeconds",10,a):d<20?n.formatDistance("lessThanXSeconds",20,a):d<40?n.formatDistance("halfAMinute",0,a):d<60?n.formatDistance("lessThanXMinutes",1,a):n.formatDistance("xMinutes",1,a):m===0?n.formatDistance("lessThanXMinutes",1,a):n.formatDistance("xMinutes",m,a);if(m<45)return n.formatDistance("xMinutes",m,a);if(m<90)return n.formatDistance("aboutXHours",1,a);if(m<K){const x=Math.round(m/60);return n.formatDistance("aboutXHours",x,a)}else{if(m<i)return n.formatDistance("xDays",1,a);if(m<C){const x=Math.round(m/K);return n.formatDistance("xDays",x,a)}else if(m<C*2)return p=Math.round(m/C),n.formatDistance("aboutXMonths",p,a)}if(p=zt(l,c),p<12){const x=Math.round(m/C);return n.formatDistance("xMonths",x,a)}else{const x=p%12,y=Math.trunc(p/12);return x<3?n.formatDistance("aboutXYears",y,a):x<9?n.formatDistance("overXYears",y,a):n.formatDistance("almostXYears",y+1,a)}}function Vt(t,e){return Ht(t,Rt(t),e)}async function Xt(t={}){const{filters:e={},pagination:s={},withCV:o=!1}=t,n=s.page??1,i=s.perPage??25,f=s.sortBy??"created_at",a=s.sortOrder??"desc";try{let c=g.from("talent_profiles").select(o?"*, cv_file:files(*)":"*",{count:"exact"});if(e.status&&(c=c.eq("status",e.status)),e.industry&&(c=c.eq("industry",e.industry)),e.role_category&&(c=c.eq("role_category",e.role_category)),e.country&&(c=c.eq("country",e.country)),e.city&&(c=c.ilike("city",`%${e.city}%`)),e.date_from&&(c=c.gte("created_at",e.date_from)),e.date_to&&(c=c.lte("created_at",e.date_to)),e.source&&(c=c.eq("source",e.source)),e.education_level&&(c=c.eq("education_level",e.education_level)),e.years_of_experience&&(c=c.eq("years_of_experience",e.years_of_experience)),e.has_cv==="yes"?c=c.not("cv_file_id","is",null):e.has_cv==="no"&&(c=c.is("cv_file_id",null)),e.search){const x=`%${e.search}%`;c=c.or(`full_name.ilike.${x},email.ilike.${x},headline.ilike.${x},phone.ilike.${x},bio.ilike.${x}`)}c=c.order(f,{ascending:a==="asc"});const l=(n-1)*i,d=l+i-1;c=c.range(l,d);const{data:u,error:m,count:p}=await c;if(m)throw m;return{data:u||[],count:p||0,page:n,perPage:i,totalPages:Math.ceil((p||0)/i),error:null}}catch(c){return{data:[],count:0,page:n,perPage:i,totalPages:0,error:c instanceof Error?c:new Error(String(c))}}}async function F(t){try{const{data:e,error:s}=await g.from("talent_profiles").select("*, cv_file:files(*)").eq("id",t).single();if(s)throw s;return{data:e,error:null}}catch(e){return j(e)}}async function Jt(t,e){try{const{data:s,error:o}=await g.from("talent_profiles").update(e).eq("id",t).select().single();if(o)throw o;return{data:s,error:null}}catch(s){return j(s)}}async function Qt(t,e,s){const o={status:e,updated_at:new Date().toISOString()};return s&&(o.internal_notes=s),(e===oe.APPROVED||e===oe.REJECTED)&&(o.reviewed_at=new Date().toISOString()),Jt(t,o)}async function Yt(t){try{const{error:e}=await g.from("talent_profiles").delete().eq("id",t);if(e)throw e;return{success:!0,error:null}}catch(e){return{success:!1,error:e instanceof Error?e:new Error(String(e))}}}async function Wt(){try{const{data:t,error:e}=await g.from("talent_profiles").select("status");if(e)throw e;const s={};return t?.forEach(n=>{s[n.status]=(s[n.status]||0)+1}),{data:Object.entries(s).map(([n,i])=>({status:n,count:i})),error:null}}catch(t){return j(t)}}async function Gt(t={}){const{filters:e={},pagination:s={}}=t,o=s.page??1,n=s.perPage??25,i=s.sortBy??"created_at",f=s.sortOrder??"desc";try{let a=g.from("sponsor_profiles").select("*",{count:"exact"});if(e.status&&(a=a.eq("status",e.status)),e.industry&&(a=a.eq("industry",e.industry)),e.company_size&&(a=a.eq("company_size",e.company_size)),e.is_recruiter!==void 0&&(a=a.eq("is_recruiter",e.is_recruiter)),e.sponsorship_amount&&(a=a.eq("sponsorship_amount",e.sponsorship_amount)),e.source&&(a=a.eq("source",e.source)),e.date_from&&(a=a.gte("created_at",e.date_from)),e.date_to&&(a=a.lte("created_at",e.date_to)),e.search){const p=`%${e.search}%`;a=a.or(`full_name.ilike.${p},email.ilike.${p},company_name.ilike.${p},phone.ilike.${p},message.ilike.${p}`)}a=a.order(i,{ascending:f==="asc"});const c=(o-1)*n,l=c+n-1;a=a.range(c,l);const{data:d,error:u,count:m}=await a;if(u)throw u;return{data:d||[],count:m||0,page:o,perPage:n,totalPages:Math.ceil((m||0)/n),error:null}}catch(a){return{data:[],count:0,page:s.page??1,perPage:s.perPage??25,totalPages:0,error:a instanceof Error?a:new Error(String(a))}}}async function H(t){try{const{data:e,error:s}=await g.from("sponsor_profiles").select("*").eq("id",t).single();if(s)throw s;return{data:e,error:null}}catch(e){return j(e)}}async function Kt(t,e){try{const{data:s,error:o}=await g.from("sponsor_profiles").update(e).eq("id",t).select().single();if(o)throw o;return{data:s,error:null}}catch(s){return j(s)}}async function Zt(t,e,s){const o={status:e,updated_at:new Date().toISOString()};return s&&(o.internal_notes=s),Kt(t,o)}async function es(t){try{const{error:e}=await g.from("sponsor_profiles").delete().eq("id",t);if(e)throw e;return{success:!0,error:null}}catch(e){return{success:!1,error:e instanceof Error?e:new Error(String(e))}}}async function ts(){try{const{data:t,error:e}=await g.from("sponsor_profiles").select("status");if(e)throw e;const s={};return t?.forEach(n=>{s[n.status]=(s[n.status]||0)+1}),{data:Object.entries(s).map(([n,i])=>({status:n,count:i})),error:null}}catch(t){return j(t)}}async function ss(t={}){const{filters:e={},pagination:s={},withRelations:o=!1}=t,n=s.page??1,i=s.perPage??25,f=s.sortBy??"created_at",a=s.sortOrder??"desc";try{let c=o?"*, talent:talent_profiles(*), sponsor:sponsor_profiles(*)":"*",l=g.from("requests").select(c,{count:"exact"});if(e.status&&(l=l.eq("status",e.status)),e.request_type&&(l=l.eq("request_type",e.request_type)),e.priority&&(l=l.eq("priority",e.priority)),e.talent_id&&(l=l.eq("talent_id",e.talent_id)),e.sponsor_id&&(l=l.eq("sponsor_id",e.sponsor_id)),e.handled_by_admin_id&&(l=l.eq("handled_by_admin_id",e.handled_by_admin_id)),e.date_from&&(l=l.gte("created_at",e.date_from)),e.date_to&&(l=l.lte("created_at",e.date_to)),e.search){const y=`%${e.search}%`;l=l.or(`description.ilike.${y},admin_notes.ilike.${y}`)}f==="priority"&&(l=l.order("priority",{ascending:a==="asc"})),l=l.order("created_at",{ascending:a==="asc"});const d=(n-1)*i,u=d+i-1;l=l.range(d,u);const{data:m,error:p,count:x}=await l;if(p)throw p;return{data:m||[],count:x||0,page:n,perPage:i,totalPages:Math.ceil((x||0)/i),error:null}}catch(c){return{data:[],count:0,page:s.page??1,perPage:s.perPage??25,totalPages:0,error:c instanceof Error?c:new Error(String(c))}}}async function V(t){try{const{data:e,error:s}=await g.from("requests").select("*, talent:talent_profiles(*), sponsor:sponsor_profiles(*)").eq("id",t).single();if(s)throw s;return{data:e,error:null}}catch(e){return j(e)}}async function rs(t,e){try{const{data:s,error:o}=await g.from("requests").update(e).eq("id",t).select().single();if(o)throw o;return{data:s,error:null}}catch(s){return j(s)}}async function as(t,e,s){const o={status:e,updated_at:new Date().toISOString()};return s&&(o.handled_by_admin_id=s),(e===ce.CLOSED||e===ce.APPROVED)&&(o.resolved_at=new Date().toISOString()),rs(t,o)}async function ns(t={}){const{filters:e={},pagination:s={}}=t,o=s.page??1,n=s.perPage??25,i=s.sortBy??"created_at",f=s.sortOrder??"desc";try{let a=g.from("messages").select("*",{count:"exact"});if(e.status&&(a=a.eq("status",e.status)),e.sender_email&&(a=a.eq("sender_email",e.sender_email)),e.handled_by_admin_id&&(a=a.eq("handled_by_admin_id",e.handled_by_admin_id)),e.date_from&&(a=a.gte("created_at",e.date_from)),e.date_to&&(a=a.lte("created_at",e.date_to)),e.search){const p=`%${e.search}%`;a=a.or(`sender_name.ilike.${p},sender_email.ilike.${p},subject.ilike.${p},message.ilike.${p}`)}i==="status"&&(a=a.order("status",{ascending:!1})),a=a.order("created_at",{ascending:f==="asc"});const c=(o-1)*n,l=c+n-1;a=a.range(c,l);const{data:d,error:u,count:m}=await a;if(u)throw u;return{data:d||[],count:m||0,page:o,perPage:n,totalPages:Math.ceil((m||0)/n),error:null}}catch(a){return{data:[],count:0,page:s.page??1,perPage:s.perPage??25,totalPages:0,error:a instanceof Error?a:new Error(String(a))}}}async function X(t){try{const{data:e,error:s}=await g.from("messages").select("*").eq("id",t).single();if(s)throw s;return{data:e,error:null}}catch(e){return j(e)}}async function os(t,e){try{const{data:s,error:o}=await g.from("messages").update(e).eq("id",t).select().single();if(o)throw o;return{data:s,error:null}}catch(s){return j(s)}}async function cs(t,e,s){const o={status:e};return s!==void 0&&(o.handled_by_admin_id=s),e===_e.REPLIED&&(o.replied_at=new Date().toISOString()),os(t,o)}async function is(){try{const{data:t,error:e}=await g.from("messages").select("status");if(e)throw e;const s={};return t?.forEach(n=>{s[n.status]=(s[n.status]||0)+1}),{data:Object.entries(s).map(([n,i])=>({status:n,count:i})),error:null}}catch(t){return j(t)}}async function ls(){try{const{count:t,error:e}=await g.from("messages").select("*",{count:"exact",head:!0}).eq("status",_e.UNREAD);if(e)throw e;return t||0}catch{return 0}}function Fs(t,e="MMM dd, yyyy"){if(!t)return"-";const s=fe(t);return he(s)?Te(s,e):"-"}function us(t){if(!t)return"-";const e=fe(t);return he(e)?Vt(e,{addSuffix:!0}):"-"}function ie(t){const e=new Date;return e.setDate(e.getDate()-t),e.toISOString()}async function ds(){const t=new Date().toISOString().split("T")[0],e=ie(7),s=ie(30);console.log("[getDashboardMetrics] Fetching metrics...",{today:t,weekAgo:e,monthAgo:s});try{const[o,n,i,f,a,c]=await Promise.all([g.from("talent_profiles").select("*",{count:"exact",head:!0}),g.from("talent_profiles").select("*",{count:"exact",head:!0}).eq("status","pending"),g.from("talent_profiles").select("*",{count:"exact",head:!0}).eq("status","approved"),g.from("talent_profiles").select("*",{count:"exact",head:!0}).gte("created_at",t),g.from("talent_profiles").select("*",{count:"exact",head:!0}).gte("created_at",e),g.from("talent_profiles").select("*",{count:"exact",head:!0}).gte("created_at",s)]),[l,d,u,m]=await Promise.all([g.from("sponsor_profiles").select("*",{count:"exact",head:!0}),g.from("sponsor_profiles").select("*",{count:"exact",head:!0}).eq("status","active"),g.from("sponsor_profiles").select("*",{count:"exact",head:!0}).eq("status","inactive"),g.from("sponsor_profiles").select("*",{count:"exact",head:!0}).gte("created_at",s)]),[p,x,y,b]=await Promise.all([g.from("requests").select("*",{count:"exact",head:!0}),g.from("requests").select("*",{count:"exact",head:!0}).eq("status","open"),g.from("requests").select("*",{count:"exact",head:!0}).eq("status","in_review"),g.from("requests").select("*",{count:"exact",head:!0}).eq("priority","urgent")]),[S,N,k,M]=await Promise.all([g.from("messages").select("*",{count:"exact",head:!0}),g.from("messages").select("*",{count:"exact",head:!0}).eq("status","unread"),g.from("messages").select("*",{count:"exact",head:!0}).eq("status","replied"),g.from("messages").select("*",{count:"exact",head:!0}).gte("created_at",t)]),I={talent:{total:o.count||0,pending:n.count||0,approved:i.count||0,newToday:f.count||0,newThisWeek:a.count||0,newThisMonth:c.count||0},sponsors:{total:l.count||0,active:d.count||0,inactive:u.count||0,newThisMonth:m.count||0},requests:{total:p.count||0,open:x.count||0,inReview:y.count||0,urgent:b.count||0},messages:{total:S.count||0,unread:N.count||0,replied:k.count||0,newToday:M.count||0}};return console.log("[getDashboardMetrics] Metrics fetched:",I),{data:I,error:null}}catch(o){return console.error("[getDashboardMetrics] Error:",o),j(o)}}async function fs(t=30){try{const{data:e,error:s}=await g.rpc("get_submissions_trend",{days:t});if(!s&&e){const l=Array.isArray(e)?e:[];return{data:l,count:l.length,error:null}}const o=new Date;o.setDate(o.getDate()-t);const n=o.toISOString(),[i,f]=await Promise.all([g.from("talent_profiles").select("created_at").gte("created_at",n),g.from("sponsor_profiles").select("created_at").gte("created_at",n)]);if(i.error)throw i.error;if(f.error)throw f.error;const a=new Map;for(let l=0;l<t;l++){const d=new Date;d.setDate(d.getDate()-l);const u=d.toISOString().split("T")[0];a.set(u,{talent:0,sponsors:0})}i.data?.forEach(l=>{const d=new Date(l.created_at).toISOString().split("T")[0],u=a.get(d);u&&u.talent++}),f.data?.forEach(l=>{const d=new Date(l.created_at).toISOString().split("T")[0],u=a.get(d);u&&u.sponsors++});const c=Array.from(a.entries()).map(([l,d])=>({date:l,talent_count:d.talent,sponsor_count:d.sponsors})).sort((l,d)=>new Date(l.date).getTime()-new Date(d.date).getTime());return{data:c,count:c.length,error:null}}catch(e){return be(e)}}async function hs(t=10){try{const[e,s,o,n]=await Promise.all([g.from("talent_profiles").select("id, full_name, status, created_at").order("created_at",{ascending:!1}).limit(t),g.from("sponsor_profiles").select("id, full_name, company_name, status, created_at").order("created_at",{ascending:!1}).limit(t),g.from("messages").select("id, sender_name, subject, status, created_at").order("created_at",{ascending:!1}).limit(t),g.from("requests").select("id, request_type, status, created_at").order("created_at",{ascending:!1}).limit(t)]),i=[];e.data?.forEach(a=>{i.push({id:`talent-${a.id}`,type:"talent",title:a.full_name,description:"New talent profile submitted",status:a.status,created_at:a.created_at})}),s.data?.forEach(a=>{i.push({id:`sponsor-${a.id}`,type:"sponsor",title:a.full_name,description:`From ${a.company_name}`,status:a.status,created_at:a.created_at})}),o.data?.forEach(a=>{i.push({id:`message-${a.id}`,type:"message",title:a.sender_name,description:a.subject||"New message",status:a.status,created_at:a.created_at})}),n.data?.forEach(a=>{i.push({id:`request-${a.id}`,type:"request",title:"New Request",description:a.request_type.replace("_"," "),status:a.status,created_at:a.created_at})}),i.sort((a,c)=>new Date(c.created_at).getTime()-new Date(a.created_at).getTime());const f=i.slice(0,t);return{data:f,count:f.length,error:null}}catch(e){return be(e)}}function Hs(t={}){const{filters:e={},pagination:s={page:1,perPage:10},autoRefresh:o=!1,refreshInterval:n=3e4}=t,[i,f]=h.useState({data:[],count:0,page:1,perPage:10,totalPages:0,error:null}),[a,c]=h.useState(!0),[l,d]=h.useState(null),u=h.useCallback(async()=>{c(!0),d(null);try{const m=await Xt({filters:e,pagination:s});if(m.error)throw m.error;f(m)}catch(m){d(m instanceof Error?m.message:"Failed to fetch talent")}finally{c(!1)}},[e,s]);return h.useEffect(()=>{u()},[u]),h.useEffect(()=>{if(!o)return;const m=setInterval(u,n);return()=>clearInterval(m)},[o,n,u]),h.useEffect(()=>{const m=g.channel("talent-changes").on("postgres_changes",{event:"*",schema:"public",table:"talent_profiles"},()=>{u()}).subscribe();return()=>{m.unsubscribe()}},[u]),{data:i,isLoading:a,error:l,refresh:u}}function Vs(t){const[e,s]=h.useState(null),[o,n]=h.useState(!1),[i,f]=h.useState(null);h.useEffect(()=>{if(!t){s(null);return}(async()=>{n(!0),f(null);try{const d=await F(t);if(d.error)throw d.error;s(d.data)}catch(d){f(d instanceof Error?d.message:"Failed to fetch talent")}finally{n(!1)}})()},[t]);const a=h.useCallback(async(l,d)=>{if(!t)return{success:!1,error:new Error("No talent ID")};try{const u=await Qt(t,l,d);if(u.error)throw u.error;const m=await F(t);return s(m.data),{success:!0,error:null}}catch(u){return{success:!1,error:u instanceof Error?u:new Error(String(u))}}},[t]),c=h.useCallback(async()=>t?Yt(t):{success:!1,error:new Error("No talent ID")},[t]);return{data:e,isLoading:o,error:i,updateStatus:a,remove:c,refresh:async()=>{if(t){const l=await F(t);s(l.data)}}}}function Xs(t={}){const{filters:e={},pagination:s={page:1,perPage:10},autoRefresh:o=!1}=t,[n,i]=h.useState({data:[],count:0,page:1,perPage:10,totalPages:0,error:null}),[f,a]=h.useState(!0),[c,l]=h.useState(null),d=h.useCallback(async()=>{a(!0),l(null);try{const u=await Gt({filters:e,pagination:s});if(u.error)throw u.error;i(u)}catch(u){l(u instanceof Error?u.message:"Failed to fetch sponsors")}finally{a(!1)}},[e,s]);return h.useEffect(()=>{d()},[d]),h.useEffect(()=>{if(!o)return;const u=setInterval(d,3e4);return()=>clearInterval(u)},[o,d]),{data:n,isLoading:f,error:c,refresh:d}}function Js(t){const[e,s]=h.useState(null),[o,n]=h.useState(!1),[i,f]=h.useState(null);h.useEffect(()=>{if(!t){s(null);return}(async()=>{n(!0);try{const d=await H(t);if(d.error)throw d.error;s(d.data)}catch(d){f(d instanceof Error?d.message:"Failed to fetch sponsor")}finally{n(!1)}})()},[t]);const a=h.useCallback(async l=>{if(!t)return{success:!1,error:new Error("No sponsor ID")};try{const d=await Zt(t,l);if(d.error)throw d.error;const u=await H(t);return s(u.data),{success:!0,error:null}}catch(d){return{success:!1,error:d instanceof Error?d:new Error(String(d))}}},[t]),c=h.useCallback(async()=>t?es(t):{success:!1,error:new Error("No sponsor ID")},[t]);return{data:e,isLoading:o,error:i,updateStatus:a,remove:c,refresh:async()=>{if(t){const l=await H(t);s(l.data)}}}}function Qs(t={}){const{filters:e={},pagination:s={page:1,perPage:10},autoRefresh:o=!1}=t,[n,i]=h.useState({data:[],count:0,page:1,perPage:10,totalPages:0,error:null}),[f,a]=h.useState(!0),[c,l]=h.useState(null),d=h.useCallback(async()=>{a(!0),l(null);try{const u=await ss({filters:e,pagination:s,withRelations:!0});if(u.error)throw u.error;i(u)}catch(u){l(u instanceof Error?u.message:"Failed to fetch requests")}finally{a(!1)}},[e,s]);return h.useEffect(()=>{d()},[d]),h.useEffect(()=>{if(!o)return;const u=setInterval(d,3e4);return()=>clearInterval(u)},[o,d]),{data:n,isLoading:f,error:c,refresh:d}}function Ys(t){const[e,s]=h.useState(null),[o,n]=h.useState(!1);h.useEffect(()=>{if(!t){s(null);return}(async()=>{n(!0);const a=await V(t);s(a.data),n(!1)})()},[t]);const i=h.useCallback(async f=>{if(!t)return{success:!1,error:new Error("No request ID")};try{const a=await as(t,f);if(a.error)throw a.error;const c=await V(t);return s(c.data),{success:!0,error:null}}catch(a){return{success:!1,error:a instanceof Error?a:new Error(String(a))}}},[t]);return{data:e,isLoading:o,updateStatus:i,refresh:async()=>{if(t){const f=await V(t);s(f.data)}}}}function Ws(t={}){const{filters:e={},pagination:s={page:1,perPage:10},autoRefresh:o=!1}=t,[n,i]=h.useState({data:[],count:0,page:1,perPage:10,totalPages:0,error:null}),[f,a]=h.useState(!0),[c,l]=h.useState(null),d=h.useCallback(async()=>{a(!0),l(null);try{const u=await ns({filters:e,pagination:s});if(u.error)throw u.error;i(u)}catch(u){l(u instanceof Error?u.message:"Failed to fetch messages")}finally{a(!1)}},[e,s]);return h.useEffect(()=>{d()},[d]),h.useEffect(()=>{if(!o)return;const u=setInterval(d,3e4);return()=>clearInterval(u)},[o,d]),{data:n,isLoading:f,error:c,refresh:d}}function Gs(t){const[e,s]=h.useState(null),[o,n]=h.useState(!1);h.useEffect(()=>{if(!t){s(null);return}(async()=>{n(!0);const a=await X(t);s(a.data),n(!1)})()},[t]);const i=h.useCallback(async f=>{if(!t)return{success:!1,error:new Error("No message ID")};try{const a=await cs(t,f);if(a.error)throw a.error;const c=await X(t);return s(c.data),{success:!0,error:null}}catch(a){return{success:!1,error:a instanceof Error?a:new Error(String(a))}}},[t]);return{data:e,isLoading:o,updateStatus:i,refresh:async()=>{if(t){const f=await X(t);s(f.data)}}}}function ms(t={}){const{autoRefresh:e=!0,refreshInterval:s=6e4}=t,[o,n]=h.useState(null),[i,f]=h.useState(!0),[a,c]=h.useState(null),[l,d]=h.useState(null),u=h.useCallback(async()=>{f(!0),c(null);try{console.log("[Dashboard] Fetching metrics...");const m=await ds();if(console.log("[Dashboard] Metrics result:",m),m.error)throw m.error;n(m.data),d(new Date),console.log("[Dashboard] Metrics loaded:",m.data)}catch(m){console.error("[Dashboard] Error fetching metrics:",m),c(m instanceof Error?m.message:"Failed to fetch metrics")}finally{f(!1)}},[]);return h.useEffect(()=>{u()},[u]),h.useEffect(()=>{if(!e)return;const m=setInterval(u,s);return()=>clearInterval(m)},[e,s,u]),{data:o,isLoading:i,error:a,lastUpdated:l,refresh:u}}function Ks(t={}){const{days:e=30}=t,[s,o]=h.useState({trend:[],isLoading:!0,error:null});return h.useEffect(()=>{(async()=>{o(i=>({...i,isLoading:!0,error:null}));try{const i=await fs(e);if(i.error)throw i.error;o({trend:i.data||[],isLoading:!1,error:null})}catch(i){o({trend:[],isLoading:!1,error:i instanceof Error?i.message:"Failed to fetch analytics"})}})()},[e]),s}function Zs(t={}){const{limit:e=10,autoRefresh:s=!1}=t,[o,n]=h.useState([]),[i,f]=h.useState(!0),[a,c]=h.useState(null),l=h.useCallback(async()=>{f(!0),c(null);try{const d=await hs(e);if(d.error)throw d.error;n(d.data)}catch(d){c(d instanceof Error?d.message:"Failed to fetch activity")}finally{f(!1)}},[e]);return h.useEffect(()=>{l()},[l]),h.useEffect(()=>{if(!s)return;const d=setInterval(l,6e4);return()=>clearInterval(d)},[s,l]),{data:o,isLoading:i,error:a,refresh:l}}function er(t){const[e,s]=h.useState([]),[o,n]=h.useState(!0);return h.useEffect(()=>{(async()=>{n(!0);try{let f;switch(t){case"talent":f=await Wt();break;case"sponsor":f=await ts();break;case"message":f=await is();break;default:f={data:[],error:null}}f.data&&s(f.data)}finally{n(!1)}})()},[t]),{counts:e,isLoading:o}}function gs(){const[t,e]=h.useState(0);return h.useEffect(()=>{const s=async()=>{const n=await ls();e(n)};s();const o=g.channel("messages-count").on("postgres_changes",{event:"*",schema:"public",table:"messages"},()=>{s()}).subscribe();return()=>{o.unsubscribe()}},[]),t}function tr({children:t,title:e,subtitle:s,actions:o,isLoading:n,onRefresh:i,lastUpdated:f}){const a=ke(),c=Me(),[l,d]=h.useState(!1),[u,m]=h.useState(!1),[p,x]=h.useState(""),[y,b]=h.useState(!1),{data:S}=ms({autoRefresh:!0}),N=gs(),k=[{path:"/admin",label:"Overview",icon:Pe},{path:"/admin/talent",label:"Talent",icon:$,badge:S?.talent?.pending||0},{path:"/admin/sponsors",label:"Sponsors",icon:We},{path:"/admin/requests",label:"Requests",icon:Ge,badge:S?.requests?.open||0},{path:"/admin/messages",label:"Messages",icon:B,badge:N>0?N:void 0},{path:"/admin/analytics",label:"Analytics",icon:Oe}],M=_=>_==="/admin"?a.pathname==="/admin"||a.pathname==="/admin/":a.pathname.startsWith(_),I=()=>{localStorage.removeItem("admin_session"),c("/admin/login")},Ne=()=>{b(!y),document.documentElement.classList.toggle("dark")};return r.jsxs("div",{className:"min-h-screen bg-gray-50/50 dark:bg-gray-950",children:[r.jsx("header",{className:"sticky top-0 z-50 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800",children:r.jsxs("div",{className:"flex h-16 items-center gap-4 px-4 lg:px-6",children:[r.jsxs(bt,{open:l,onOpenChange:d,children:[r.jsx(Nt,{asChild:!0,children:r.jsxs(E,{variant:"ghost",size:"icon",className:"lg:hidden",children:[r.jsx(Ie,{className:"h-5 w-5"}),r.jsx("span",{className:"sr-only",children:"Toggle menu"})]})}),r.jsx(kt,{side:"left",className:"w-72 p-0",children:r.jsx(ps,{navItems:k,getIsActive:M,metrics:S,onClose:()=>d(!1)})})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-9 h-9 rounded-lg bg-gradient-to-br from-rose-500 to-orange-500 flex items-center justify-center",children:r.jsx(me,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"hidden sm:block",children:[r.jsx("h1",{className:"text-lg font-bold tracking-tight",children:"Recommend Her"}),r.jsx("p",{className:"text-xs text-muted-foreground -mt-0.5",children:"Admin Dashboard"})]})]}),r.jsx("nav",{className:"hidden lg:flex items-center gap-1 ml-6",children:k.map(_=>r.jsxs(de,{to:_.path,className:v("flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors",M(_.path)?"bg-rose-50 text-rose-600 dark:bg-rose-950/30 dark:text-rose-400":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"),children:[r.jsx(_.icon,{className:"w-4 h-4"}),_.label,_.badge?r.jsx(R,{variant:"secondary",className:"ml-1 h-5 px-1.5 text-xs",children:_.badge}):null]},_.path))}),r.jsx("div",{className:"flex-1"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:v("flex items-center transition-all duration-200",u?"w-64":"w-auto"),children:u?r.jsxs("div",{className:"relative w-full",children:[r.jsx(se,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),r.jsx(qe,{autoFocus:!0,placeholder:"Search...",value:p,onChange:_=>x(_.target.value),onBlur:()=>!p&&m(!1),className:"pl-9 pr-9 h-9"}),r.jsx(E,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7",onClick:()=>{x(""),m(!1)},children:r.jsx(ue,{className:"w-4 h-4"})})]}):r.jsx(E,{variant:"ghost",size:"icon",onClick:()=>m(!0),children:r.jsx(se,{className:"w-4 h-4"})})}),i&&r.jsx(E,{variant:"ghost",size:"icon",onClick:i,disabled:n,className:"hidden sm:flex",children:r.jsx(Ce,{className:v("w-4 h-4",n&&"animate-spin")})}),r.jsx(E,{variant:"ghost",size:"icon",onClick:Ne,className:"hidden sm:flex",children:y?r.jsx(ct,{className:"w-4 h-4"}):r.jsx(rt,{className:"w-4 h-4"})}),r.jsxs(Z,{children:[r.jsx(ee,{asChild:!0,children:r.jsxs(E,{variant:"ghost",size:"icon",className:"relative",children:[r.jsx(Ke,{className:"w-4 h-4"}),N>0&&r.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-rose-500 rounded-full"})]})}),r.jsxs(te,{align:"end",className:"w-80",children:[r.jsxs("div",{className:"p-3",children:[r.jsx("h4",{className:"font-medium text-sm",children:"Notifications"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:N>0?`${N} unread messages`:"No new notifications"})]}),r.jsx(O,{}),r.jsxs(q,{onClick:()=>c("/admin/messages"),children:[r.jsx(B,{className:"w-4 h-4 mr-2"}),"View Messages"]}),r.jsxs(q,{onClick:()=>c("/admin/talent"),children:[r.jsx($,{className:"w-4 h-4 mr-2"}),"Review Talent"]})]})]}),r.jsxs(Z,{children:[r.jsx(ee,{asChild:!0,children:r.jsxs(E,{variant:"ghost",className:"gap-2 pl-2 pr-3",children:[r.jsx(_t,{className:"w-7 h-7",children:r.jsx(jt,{className:"bg-gradient-to-br from-rose-500 to-orange-500 text-white text-xs",children:"AD"})}),r.jsx("span",{className:"hidden sm:inline text-sm font-medium",children:"Admin"}),r.jsx(Ye,{className:"w-4 h-4 text-muted-foreground"})]})}),r.jsxs(te,{align:"end",children:[r.jsxs("div",{className:"px-2 py-1.5",children:[r.jsx("p",{className:"text-sm font-medium",children:"Super Admin"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"admin@recommendher.com"})]}),r.jsx(O,{}),r.jsxs(q,{onClick:()=>c("/admin/settings"),children:[r.jsx(nt,{className:"w-4 h-4 mr-2"}),"Settings"]}),r.jsx(O,{}),r.jsxs(q,{onClick:I,className:"text-red-600",children:[r.jsx(tt,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})]})]})}),r.jsxs("div",{className:"flex",children:[r.jsx("aside",{className:"hidden lg:block w-64 fixed left-0 top-16 bottom-0 bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 overflow-y-auto",children:r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-6",children:[r.jsx(le,{label:"Talent",value:S?.talent?.total||0,trend:S?.talent?.newThisWeek||0}),r.jsx(le,{label:"Sponsors",value:S?.sponsors?.total||0,trend:S?.sponsors?.newThisMonth||0})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider px-3 mb-2",children:"Quick Links"}),r.jsxs(E,{variant:"ghost",className:"w-full justify-start text-sm",onClick:()=>c("/admin/talent?status=pending"),children:[r.jsx($,{className:"w-4 h-4 mr-2"}),"Pending Reviews",S&&S.talent?.pending>0&&r.jsx(R,{variant:"destructive",className:"ml-auto text-xs",children:S.talent.pending})]}),r.jsxs(E,{variant:"ghost",className:"w-full justify-start text-sm",onClick:()=>c("/admin/messages?status=unread"),children:[r.jsx(B,{className:"w-4 h-4 mr-2"}),"Unread Messages",N>0&&r.jsx(R,{variant:"destructive",className:"ml-auto text-xs",children:N})]})]}),f&&r.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-800",children:r.jsxs("p",{className:"text-xs text-muted-foreground px-3",children:["Last updated: ",us(f.toISOString())]})})]})}),r.jsx("main",{className:"flex-1 lg:ml-64 min-h-[calc(100vh-64px)]",children:r.jsxs("div",{className:"p-4 lg:p-8 max-w-7xl mx-auto",children:[(e||s||o)&&r.jsxs("div",{className:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[e&&r.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:e}),s&&r.jsx("p",{className:"text-muted-foreground mt-1",children:s})]}),o&&r.jsx("div",{className:"flex items-center gap-2",children:o})]}),t]})})]})]})}function ps({navItems:t,getIsActive:e,metrics:s,onClose:o}){return r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-800",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-9 h-9 rounded-lg bg-gradient-to-br from-rose-500 to-orange-500 flex items-center justify-center",children:r.jsx(me,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"font-bold",children:"Recommend Her"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Admin Dashboard"})]})]})}),r.jsx("nav",{className:"flex-1 p-4 space-y-1",children:t.map(n=>r.jsxs(de,{to:n.path,onClick:o,className:v("flex items-center gap-3 px-3 py-3 rounded-lg text-sm font-medium transition-colors",e(n.path)?"bg-rose-50 text-rose-600 dark:bg-rose-950/30 dark:text-rose-400":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"),children:[r.jsx(n.icon,{className:"w-5 h-5"}),n.label,n.badge?r.jsx(R,{variant:"secondary",className:"ml-auto",children:n.badge}):null]},n.path))}),r.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-800",children:r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Talent"}),r.jsx("p",{className:"text-lg font-bold",children:s?.talent?.total||0})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Sponsors"}),r.jsx("p",{className:"text-lg font-bold",children:s?.sponsors?.total||0})]})]})})]})}function le({label:t,value:e,trend:s}){return r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:t}),r.jsxs("div",{className:"flex items-baseline gap-1",children:[r.jsx("p",{className:"text-lg font-bold",children:e}),s?r.jsxs("span",{className:"text-xs text-green-600 font-medium",children:["+",s]}):null]})]})}function sr({className:t}){return r.jsxs("div",{className:v("space-y-8",t),children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(w,{className:"h-8 w-64"}),r.jsx(w,{className:"h-4 w-96"})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:Array.from({length:4}).map((e,s)=>r.jsx(xs,{},s))}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(A,{}),r.jsx(A,{})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx(A,{className:"lg:col-span-2"}),r.jsx(A,{})]})]})}function xs({className:t}){return r.jsx(ge,{className:v("overflow-hidden",t),children:r.jsx(pe,{className:"p-6",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(w,{className:"h-4 w-24"}),r.jsx(w,{className:"h-8 w-16"}),r.jsx(w,{className:"h-3 w-20"})]}),r.jsx(w,{className:"h-10 w-10 rounded-lg"})]})})})}function A({className:t,rows:e=3}){return r.jsxs(ge,{className:t,children:[r.jsxs(Ze,{children:[r.jsx(w,{className:"h-5 w-32"}),r.jsx(w,{className:"h-4 w-48"})]}),r.jsx(pe,{className:"space-y-4",children:Array.from({length:e}).map((s,o)=>r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(w,{className:"h-10 w-10 rounded-lg"}),r.jsxs("div",{className:"flex-1 space-y-1",children:[r.jsx(w,{className:"h-4 w-full"}),r.jsx(w,{className:"h-3 w-2/3"})]})]},o))})]})}function rr({className:t,rows:e=5,columns:s=5}){return r.jsxs("div",{className:v("space-y-4",t),children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(w,{className:"h-9 w-64"}),r.jsx("div",{className:"flex-1"}),r.jsx(w,{className:"h-9 w-24"}),r.jsx(w,{className:"h-9 w-24"})]}),r.jsxs("div",{className:"rounded-md border",children:[r.jsx("div",{className:"border-b bg-muted/50 p-4",children:r.jsx("div",{className:"flex items-center gap-4",children:Array.from({length:s}).map((o,n)=>r.jsx(w,{className:v("h-4",n===0?"w-32":"w-24")},n))})}),r.jsx("div",{className:"divide-y",children:Array.from({length:e}).map((o,n)=>r.jsx("div",{className:"flex items-center gap-4 p-4",children:Array.from({length:s}).map((i,f)=>r.jsx(w,{className:v("h-4",f===0?"w-32":"w-24")},f))},n))})]})]})}export{tr as A,Ws as B,Gs as C,Lt as D,Us as E,zs as F,A as G,_e as M,qt as R,sr as S,It as T,Zs as a,Ks as b,er as c,Hs as d,Vs as e,us as f,Ps as g,rr as h,Fs as i,oe as j,bt as k,kt as l,As as m,Rs as n,Ts as o,Xs as p,Js as q,Ct as r,g as s,Os as t,ms as u,Qs as v,Ys as w,Bs as x,ce as y,$s as z};
