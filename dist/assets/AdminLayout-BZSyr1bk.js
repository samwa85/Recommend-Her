import{c as A,r as m,j as n,q as _e,s as be,a as j,X as ue,v as je,u as De,B as D,M as Ee,N as de,m as Ne}from"./index-DFWiVR3s.js";import{I as Me}from"./input-BRfSl6Ko.js";import{t as E,e as ke,n as Q,g as G,f as Ie,h as Re,m as K,i as R,p as fe,j as qe,k as me,L as Te,C as Le,D as Z,a as ee,b as te,d as P,c as q}from"./dropdown-menu-BOXuGTFg.js";import{B as L}from"./badge-CHNks9Gx.js";import{u as Ce,R as Ae,C as Pe,a as Oe,T as $e,D as Fe,b as Be,P as Ue,O as ze}from"./index-CAsnp8AP.js";import{d as X}from"./index-CWO8BEd0.js";import{d as S}from"./client-CrqYG681.js";import{h as _,a as ge}from"./errors-B3_eVdCY.js";import{U as O}from"./users-DCngZZIb.js";import{B as He}from"./building-2-De9H6TkV.js";import{F as Ve}from"./file-text-BQI-XE8w.js";import{M as Xe}from"./message-square-Bcw3mLo6.js";import{M as $}from"./mail-zjxhTzbQ.js";import{S as he}from"./shield-CSwj9smG.js";import{S as re}from"./search-B2QVa34Y.js";import{B as Qe}from"./bell-FNheItAI.js";import{C as Ye}from"./chevron-down-CnxfN6eY.js";const Je=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],We=A("log-out",Je);const Ge=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Ke=A("moon",Ge);const Ze=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],et=A("settings",Ze);const tt=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],rt=A("sun",tt),se={APPROVED:"approved",REJECTED:"rejected",ARCHIVED:"archived"},jr={ACTIVE:"active",INACTIVE:"inactive",ARCHIVED:"archived"},Dr={LOW:"low",NORMAL:"normal",HIGH:"high",URGENT:"urgent"},ae={APPROVED:"approved",CLOSED:"closed"},N={UNREAD:"unread",READ:"read",REPLIED:"replied",ARCHIVED:"archived",SPAM:"spam"},Er={pending:"Pending Review",approved:"Approved",rejected:"Rejected",archived:"Archived"},Nr={active:"Active",inactive:"Inactive",archived:"Archived"},Mr={open:"Open",in_review:"In Review",approved:"Approved",rejected:"Rejected",closed:"Closed"},kr={low:"Low",normal:"Normal",high:"High",urgent:"Urgent"},Ir={new:"New",unread:"Unread",read:"Read",replied:"Replied",archived:"Archived",spam:"Spam"},Rr={pending:"secondary",approved:"default",rejected:"destructive",archived:"outline",active:"default",inactive:"secondary",open:"secondary",in_review:"outline",closed:"outline",new:"secondary",unread:"secondary",read:"outline",replied:"default",spam:"destructive"};function C(t,e){const r=+E(t)-+E(e);return r<0?-1:r>0?1:r}function st(t){return ke(t,Date.now())}function at(t,e,r){const[o,a]=Q(r?.in,t,e),i=o.getFullYear()-a.getFullYear(),l=o.getMonth()-a.getMonth();return i*12+l}function nt(t){return e=>{const o=(t?Math[t]:Math.trunc)(e);return o===0?0:o}}function ot(t,e){return+E(t)-+E(e)}function ct(t,e){const r=E(t,e?.in);return r.setHours(23,59,59,999),r}function it(t,e){const r=E(t,e?.in),o=r.getMonth();return r.setFullYear(r.getFullYear(),o+1,0),r.setHours(23,59,59,999),r}function lt(t,e){const r=E(t,e?.in);return+ct(r,e)==+it(r,e)}function ut(t,e,r){const[o,a,i]=Q(r?.in,t,t,e),l=C(a,i),s=Math.abs(at(a,i));if(s<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-l*s);let c=C(a,i)===-l;lt(o)&&s===1&&C(o,i)===1&&(c=!1);const u=l*(s-+c);return u===0?0:u}function dt(t,e,r){const o=ot(t,e)/1e3;return nt(r?.roundingMethod)(o)}function ft(t,e,r){const o=Ie(),a=r?.locale??o.locale??Re,i=2520,l=C(t,e);if(isNaN(l))throw new RangeError("Invalid time value");const s=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:l}),[c,u]=Q(r?.in,...l>0?[e,t]:[t,e]),d=dt(u,c),g=(G(u)-G(c))/1e3,p=Math.round((d-g)/60);let h;if(p<2)return r?.includeSeconds?d<5?a.formatDistance("lessThanXSeconds",5,s):d<10?a.formatDistance("lessThanXSeconds",10,s):d<20?a.formatDistance("lessThanXSeconds",20,s):d<40?a.formatDistance("halfAMinute",0,s):d<60?a.formatDistance("lessThanXMinutes",1,s):a.formatDistance("xMinutes",1,s):p===0?a.formatDistance("lessThanXMinutes",1,s):a.formatDistance("xMinutes",p,s);if(p<45)return a.formatDistance("xMinutes",p,s);if(p<90)return a.formatDistance("aboutXHours",1,s);if(p<K){const x=Math.round(p/60);return a.formatDistance("aboutXHours",x,s)}else{if(p<i)return a.formatDistance("xDays",1,s);if(p<R){const x=Math.round(p/K);return a.formatDistance("xDays",x,s)}else if(p<R*2)return h=Math.round(p/R),a.formatDistance("aboutXMonths",h,s)}if(h=ut(u,c),h<12){const x=Math.round(p/R);return a.formatDistance("xMonths",x,s)}else{const x=h%12,w=Math.trunc(h/12);return x<3?a.formatDistance("aboutXYears",w,s):x<9?a.formatDistance("overXYears",w,s):a.formatDistance("almostXYears",w+1,s)}}function mt(t,e){return ft(t,st(t),e)}async function gt(t={}){const{filters:e={},pagination:r={},withCV:o=!1}=t,a=r.page??1,i=r.perPage??25,l=r.sortBy??"created_at",s=r.sortOrder??"desc";try{let c=S.from("talent_profiles").select(o?"*, cv_file:files(*)":"*",{count:"exact"});if(e.status&&(c=c.eq("status",e.status)),e.industry&&(c=c.eq("industry",e.industry)),e.role_category&&(c=c.eq("role_category",e.role_category)),e.country&&(c=c.eq("country",e.country)),e.city&&(c=c.ilike("city",`%${e.city}%`)),e.date_from&&(c=c.gte("created_at",e.date_from)),e.date_to&&(c=c.lte("created_at",e.date_to)),e.source&&(c=c.eq("source",e.source)),e.education_level&&(c=c.eq("education_level",e.education_level)),e.years_of_experience&&(c=c.eq("years_of_experience",e.years_of_experience)),e.has_cv==="yes"?c=c.not("cv_file_id","is",null):e.has_cv==="no"&&(c=c.is("cv_file_id",null)),e.search){const x=`%${e.search}%`;c=c.or(`full_name.ilike.${x},email.ilike.${x},headline.ilike.${x},phone.ilike.${x},bio.ilike.${x}`)}c=c.order(l,{ascending:s==="asc"});const u=(a-1)*i,d=u+i-1;c=c.range(u,d);const{data:g,error:p,count:h}=await c;if(p)throw p;return{data:g||[],count:h||0,page:a,perPage:i,totalPages:Math.ceil((h||0)/i),error:null}}catch(c){return{data:[],count:0,page:a,perPage:i,totalPages:0,error:c instanceof Error?c:new Error(String(c))}}}async function F(t){try{const{data:e,error:r}=await S.from("talent_profiles").select("*, cv_file:files(*)").eq("id",t).single();if(r)throw r;return{data:e,error:null}}catch(e){return _(e)}}async function qr(t){try{const{data:e,error:r}=await S.from("talent_profiles").insert(t).select().single();if(r)throw r;return{data:e,error:null}}catch(e){return _(e)}}async function ht(t,e){try{const{data:r,error:o}=await S.from("talent_profiles").update(e).eq("id",t).select().single();if(o)throw o;return{data:r,error:null}}catch(r){return _(r)}}async function pt(t,e,r){const o={status:e,updated_at:new Date().toISOString()};return r&&(o.internal_notes=r),(e===se.APPROVED||e===se.REJECTED)&&(o.reviewed_at=new Date().toISOString()),ht(t,o)}async function yt(t){try{const{error:e}=await S.from("talent_profiles").delete().eq("id",t);if(e)throw e;return{success:!0,error:null}}catch(e){return{success:!1,error:e instanceof Error?e:new Error(String(e))}}}async function xt(){try{const{data:t,error:e}=await S.from("talent_profiles").select("status");if(e)throw e;const r={};return t?.forEach(a=>{r[a.status]=(r[a.status]||0)+1}),{data:Object.entries(r).map(([a,i])=>({status:a,count:i})),error:null}}catch(t){return _(t)}}async function wt(t={}){const{filters:e={},pagination:r={}}=t,o=r.page??1,a=r.perPage??25,i=r.sortBy??"created_at",l=r.sortOrder??"desc";try{let s=S.from("sponsor_profiles").select("*",{count:"exact"});if(e.status&&(s=s.eq("status",e.status)),e.industry&&(s=s.eq("industry",e.industry)),e.company_size&&(s=s.eq("company_size",e.company_size)),e.is_recruiter!==void 0&&(s=s.eq("is_recruiter",e.is_recruiter)),e.sponsorship_amount&&(s=s.eq("sponsorship_amount",e.sponsorship_amount)),e.source&&(s=s.eq("source",e.source)),e.date_from&&(s=s.gte("created_at",e.date_from)),e.date_to&&(s=s.lte("created_at",e.date_to)),e.search){const h=`%${e.search}%`;s=s.or(`full_name.ilike.${h},email.ilike.${h},company_name.ilike.${h},phone.ilike.${h},message.ilike.${h}`)}s=s.order(i,{ascending:l==="asc"});const c=(o-1)*a,u=c+a-1;s=s.range(c,u);const{data:d,error:g,count:p}=await s;if(g)throw g;return{data:d||[],count:p||0,page:o,perPage:a,totalPages:Math.ceil((p||0)/a),error:null}}catch(s){return{data:[],count:0,page:r.page??1,perPage:r.perPage??25,totalPages:0,error:s instanceof Error?s:new Error(String(s))}}}async function B(t){try{const{data:e,error:r}=await S.from("sponsor_profiles").select("*").eq("id",t).single();if(r)throw r;return{data:e,error:null}}catch(e){return _(e)}}async function Tr(t){try{const{data:e,error:r}=await S.from("sponsor_profiles").insert(t).select().single();if(r)throw r;return{data:e,error:null}}catch(e){return _(e)}}async function St(t,e){try{const{data:r,error:o}=await S.from("sponsor_profiles").update(e).eq("id",t).select().single();if(o)throw o;return{data:r,error:null}}catch(r){return _(r)}}async function vt(t,e,r){const o={status:e,updated_at:new Date().toISOString()};return r&&(o.internal_notes=r),St(t,o)}async function _t(t){try{const{error:e}=await S.from("sponsor_profiles").delete().eq("id",t);if(e)throw e;return{success:!0,error:null}}catch(e){return{success:!1,error:e instanceof Error?e:new Error(String(e))}}}async function bt(){try{const{data:t,error:e}=await S.from("sponsor_profiles").select("status");if(e)throw e;const r={};return t?.forEach(a=>{r[a.status]=(r[a.status]||0)+1}),{data:Object.entries(r).map(([a,i])=>({status:a,count:i})),error:null}}catch(t){return _(t)}}async function jt(t={}){const{filters:e={},pagination:r={},withRelations:o=!1}=t,a=r.page??1,i=r.perPage??25,l=r.sortBy??"created_at",s=r.sortOrder??"desc";try{const c=o?"*, talent:talent_profiles(*), sponsor:sponsor_profiles(*)":"*";let u=S.from("requests").select(c,{count:"exact"});if(e.status&&(u=u.eq("status",e.status)),e.request_type&&(u=u.eq("request_type",e.request_type)),e.priority&&(u=u.eq("priority",e.priority)),e.talent_id&&(u=u.eq("talent_id",e.talent_id)),e.sponsor_id&&(u=u.eq("sponsor_id",e.sponsor_id)),e.handled_by_admin_id&&(u=u.eq("handled_by_admin_id",e.handled_by_admin_id)),e.date_from&&(u=u.gte("created_at",e.date_from)),e.date_to&&(u=u.lte("created_at",e.date_to)),e.search){const w=`%${e.search}%`;u=u.or(`description.ilike.${w},admin_notes.ilike.${w}`)}l==="priority"&&(u=u.order("priority",{ascending:s==="asc"})),u=u.order("created_at",{ascending:s==="asc"});const d=(a-1)*i,g=d+i-1;u=u.range(d,g);const{data:p,error:h,count:x}=await u;if(h)throw h;return{data:p||[],count:x||0,page:a,perPage:i,totalPages:Math.ceil((x||0)/i),error:null}}catch(c){return{data:[],count:0,page:r.page??1,perPage:r.perPage??25,totalPages:0,error:c instanceof Error?c:new Error(String(c))}}}async function U(t){try{const{data:e,error:r}=await S.from("requests").select("*, talent:talent_profiles(*), sponsor:sponsor_profiles(*)").eq("id",t).single();if(r)throw r;return{data:e,error:null}}catch(e){return _(e)}}async function Dt(t,e){try{const{data:r,error:o}=await S.from("requests").update(e).eq("id",t).select().single();if(o)throw o;return{data:r,error:null}}catch(r){return _(r)}}async function Et(t,e,r){const o={status:e,updated_at:new Date().toISOString()};return r&&(o.handled_by_admin_id=r),(e===ae.CLOSED||e===ae.APPROVED)&&(o.resolved_at=new Date().toISOString()),Dt(t,o)}function Y(t){return{id:t.id,sender_name:t.full_name,sender_email:t.email,sender_phone:null,subject:t.inquiry_type,message:t.message,status:t.status==="new"?N.UNREAD:t.status,admin_reply:null,handled_by_admin_id:null,created_at:t.created_at,updated_at:t.updated_at,replied_at:null}}async function Nt(t={}){const{filters:e={},pagination:r={}}=t,o=r.page??1,a=r.perPage??25;r.sortBy;const i=r.sortOrder??"desc";try{let l=S.from("contact_submissions").select("*",{count:"exact"});if(e.status){const h=e.status===N.UNREAD?"new":e.status;l=l.eq("status",h)}if(e.sender_email&&(l=l.eq("email",e.sender_email)),e.date_from&&(l=l.gte("created_at",e.date_from)),e.date_to&&(l=l.lte("created_at",e.date_to)),e.search){const h=`%${e.search}%`;l=l.or(`full_name.ilike.${h},email.ilike.${h},inquiry_type.ilike.${h},message.ilike.${h}`)}l=l.order("created_at",{ascending:i==="asc"});const s=(o-1)*a,c=s+a-1;l=l.range(s,c);const{data:u,error:d,count:g}=await l;if(d)throw d;return{data:(u||[]).map(Y),count:g||0,page:o,perPage:a,totalPages:Math.ceil((g||0)/a),error:null}}catch(l){return console.error("[Messages] listMessages error:",l),{data:[],count:0,page:o,perPage:a,totalPages:0,error:l instanceof Error?l:new Error(String(l))}}}async function T(t){try{const{data:e,error:r}=await S.from("contact_submissions").select("*").eq("id",t).single();if(r)throw r;return{data:Y(e),error:null}}catch(e){return _(e)}}async function Mt(t,e){try{const r={};e.status&&(r.status=e.status===N.UNREAD?"new":e.status);const{data:o,error:a}=await S.from("contact_submissions").update(r).eq("id",t).select().single();if(a)throw a;return{data:Y(o),error:null}}catch(r){return _(r)}}async function kt(t,e,r){const o=e===N.UNREAD?"new":e;return Mt(t,{status:o})}async function It(){try{const{data:t,error:e}=await S.from("contact_submissions").select("status");if(e)throw e;const r={};return t?.forEach(a=>{r[a.status]=(r[a.status]||0)+1}),{data:Object.entries(r).map(([a,i])=>({status:a==="new"?N.UNREAD:a,count:i})),error:null}}catch(t){return _(t)}}async function Rt(){try{const{count:t,error:e}=await S.from("contact_submissions").select("*",{count:"exact",head:!0}).eq("status","new");if(e)throw e;return t||0}catch{return 0}}async function qt(t,e,r){try{const{data:o,error:a}=await S.from("contact_replies").insert({submission_id:t,reply_text:e}).select("id, submission_id, admin_id, reply_text, created_at").single();if(a)throw a;const{error:i}=await S.from("contact_submissions").update({status:"replied",admin_reply:e,replied_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",t);if(i)throw i;return{success:!0,data:o,error:null}}catch(o){return console.error("[Messages] addMessageReply error:",o),{success:!1,error:o instanceof Error?o:new Error(String(o))}}}async function z(t){try{const{data:e,error:r}=await S.from("contact_replies").select("*").eq("submission_id",t).order("created_at",{ascending:!0});if(r)throw r;return{data:e||[],error:null}}catch(e){return{data:[],error:e instanceof Error?e:new Error(String(e))}}}function Lr(t,e="MMM dd, yyyy"){if(!t)return"-";const r=fe(t);return me(r)?qe(r,e):"-"}function Tt(t){if(!t)return"-";const e=fe(t);return me(e)?mt(e,{addSuffix:!0}):"-"}function ne(t){const e=new Date;return e.setDate(e.getDate()-t),e.toISOString()}async function Lt(){const t=new Date().toISOString().split("T")[0],e=ne(7),r=ne(30);console.log("[getDashboardMetrics] Fetching metrics...",{today:t,weekAgo:e,monthAgo:r});try{const[o,a,i,l,s,c]=await Promise.all([S.from("talent_profiles").select("*",{count:"exact",head:!0}),S.from("talent_profiles").select("*",{count:"exact",head:!0}).eq("status","pending"),S.from("talent_profiles").select("*",{count:"exact",head:!0}).eq("status","approved"),S.from("talent_profiles").select("*",{count:"exact",head:!0}).gte("created_at",t),S.from("talent_profiles").select("*",{count:"exact",head:!0}).gte("created_at",e),S.from("talent_profiles").select("*",{count:"exact",head:!0}).gte("created_at",r)]),[u,d,g,p]=await Promise.all([S.from("sponsor_profiles").select("*",{count:"exact",head:!0}),S.from("sponsor_profiles").select("*",{count:"exact",head:!0}).eq("status","active"),S.from("sponsor_profiles").select("*",{count:"exact",head:!0}).eq("status","inactive"),S.from("sponsor_profiles").select("*",{count:"exact",head:!0}).gte("created_at",r)]),[h,x,w,f]=await Promise.all([S.from("requests").select("*",{count:"exact",head:!0}),S.from("requests").select("*",{count:"exact",head:!0}).eq("status","open"),S.from("requests").select("*",{count:"exact",head:!0}).eq("status","in_review"),S.from("requests").select("*",{count:"exact",head:!0}).eq("priority","urgent")]),[y,v,M,k]=await Promise.all([S.from("messages").select("*",{count:"exact",head:!0}),S.from("messages").select("*",{count:"exact",head:!0}).eq("status","unread"),S.from("messages").select("*",{count:"exact",head:!0}).eq("status","replied"),S.from("messages").select("*",{count:"exact",head:!0}).gte("created_at",t)]),I={talent:{total:o.count||0,pending:a.count||0,approved:i.count||0,newToday:l.count||0,newThisWeek:s.count||0,newThisMonth:c.count||0},sponsors:{total:u.count||0,active:d.count||0,inactive:g.count||0,newThisMonth:p.count||0},requests:{total:h.count||0,open:x.count||0,inReview:w.count||0,urgent:f.count||0},messages:{total:y.count||0,unread:v.count||0,replied:M.count||0,newToday:k.count||0}};return console.log("[getDashboardMetrics] Metrics fetched:",I),{data:I,error:null}}catch(o){return console.error("[getDashboardMetrics] Error:",o),_(o)}}async function Ct(t=30){try{const{data:e,error:r}=await S.rpc("get_submissions_trend",{days:t});if(!r&&e){const u=Array.isArray(e)?e:[];return{data:u,count:u.length,error:null}}const o=new Date;o.setDate(o.getDate()-t);const a=o.toISOString(),[i,l]=await Promise.all([S.from("talent_profiles").select("created_at").gte("created_at",a),S.from("sponsor_profiles").select("created_at").gte("created_at",a)]);if(i.error)throw i.error;if(l.error)throw l.error;const s=new Map;for(let u=0;u<t;u++){const d=new Date;d.setDate(d.getDate()-u);const g=d.toISOString().split("T")[0];s.set(g,{talent:0,sponsors:0})}i.data?.forEach(u=>{const d=new Date(u.created_at).toISOString().split("T")[0],g=s.get(d);g&&g.talent++}),l.data?.forEach(u=>{const d=new Date(u.created_at).toISOString().split("T")[0],g=s.get(d);g&&g.sponsors++});const c=Array.from(s.entries()).map(([u,d])=>({date:u,talent_count:d.talent,sponsor_count:d.sponsors})).sort((u,d)=>new Date(u.date).getTime()-new Date(d.date).getTime());return{data:c,count:c.length,error:null}}catch(e){return ge(e)}}async function At(t=10){try{const[e,r,o,a]=await Promise.all([S.from("talent_profiles").select("id, full_name, status, created_at").order("created_at",{ascending:!1}).limit(t),S.from("sponsor_profiles").select("id, full_name, organization, status, created_at").order("created_at",{ascending:!1}).limit(t),S.from("messages").select("id, sender_name, subject, status, created_at").order("created_at",{ascending:!1}).limit(t),S.from("requests").select("id, request_type, status, created_at").order("created_at",{ascending:!1}).limit(t)]),i=[];e.data?.forEach(s=>{i.push({id:`talent-${s.id}`,type:"talent",title:s.full_name,description:"New talent profile submitted",status:s.status,created_at:s.created_at})}),r.data?.forEach(s=>{i.push({id:`sponsor-${s.id}`,type:"sponsor",title:s.full_name,description:s.organization?`From ${s.organization}`:"New sponsor",status:s.status,created_at:s.created_at})}),o.data?.forEach(s=>{i.push({id:`message-${s.id}`,type:"message",title:s.sender_name,description:s.subject||"New message",status:s.status,created_at:s.created_at})}),a.data?.forEach(s=>{i.push({id:`request-${s.id}`,type:"request",title:"New Request",description:s.request_type.replace("_"," "),status:s.status,created_at:s.created_at})}),i.sort((s,c)=>new Date(c.created_at).getTime()-new Date(s.created_at).getTime());const l=i.slice(0,t);return{data:l,count:l.length,error:null}}catch(e){return ge(e)}}function Pt(t,e=[]){let r=[];function o(i,l){const s=m.createContext(l);s.displayName=i+"Context";const c=r.length;r=[...r,l];const u=g=>{const{scope:p,children:h,...x}=g,w=p?.[t]?.[c]||s,f=m.useMemo(()=>x,Object.values(x));return n.jsx(w.Provider,{value:f,children:h})};u.displayName=i+"Provider";function d(g,p){const h=p?.[t]?.[c]||s,x=m.useContext(h);if(x)return x;if(l!==void 0)return l;throw new Error(`\`${g}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=r.map(l=>m.createContext(l));return function(s){const c=s?.[t]||i;return m.useMemo(()=>({[`__scope${t}`]:{...s,[t]:c}}),[s,c])}};return a.scopeName=t,[o,Ot(a,...e)]}function Ot(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const o=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const l=o.reduce((s,{useScope:c,scopeName:u})=>{const g=c(i)[`__scope${u}`];return{...s,...g}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return r.scopeName=e.scopeName,r}var $t=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],J=$t.reduce((t,e)=>{const r=_e(`Primitive.${e}`),o=m.forwardRef((a,i)=>{const{asChild:l,...s}=a,c=l?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...s,ref:i})});return o.displayName=`Primitive.${e}`,{...t,[e]:o}},{}),H={exports:{}},V={};var oe;function Ft(){if(oe)return V;oe=1;var t=be();function e(g,p){return g===p&&(g!==0||1/g===1/p)||g!==g&&p!==p}var r=typeof Object.is=="function"?Object.is:e,o=t.useState,a=t.useEffect,i=t.useLayoutEffect,l=t.useDebugValue;function s(g,p){var h=p(),x=o({inst:{value:h,getSnapshot:p}}),w=x[0].inst,f=x[1];return i(function(){w.value=h,w.getSnapshot=p,c(w)&&f({inst:w})},[g,h,p]),a(function(){return c(w)&&f({inst:w}),g(function(){c(w)&&f({inst:w})})},[g]),l(h),h}function c(g){var p=g.getSnapshot;g=g.value;try{var h=p();return!r(g,h)}catch{return!0}}function u(g,p){return p()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:s;return V.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,V}var ce;function Bt(){return ce||(ce=1,H.exports=Ft()),H.exports}var Ut=Bt();function zt(){return Ut.useSyncExternalStore(Ht,()=>!0,()=>!1)}function Ht(){return()=>{}}var W="Avatar",[Vt]=Pt(W),[Xt,pe]=Vt(W),ye=m.forwardRef((t,e)=>{const{__scopeAvatar:r,...o}=t,[a,i]=m.useState("idle");return n.jsx(Xt,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:n.jsx(J.span,{...o,ref:e})})});ye.displayName=W;var xe="AvatarImage",Qt=m.forwardRef((t,e)=>{const{__scopeAvatar:r,src:o,onLoadingStatusChange:a=()=>{},...i}=t,l=pe(xe,r),s=Yt(o,i),c=Ce(u=>{a(u),l.onImageLoadingStatusChange(u)});return X(()=>{s!=="idle"&&c(s)},[s,c]),s==="loaded"?n.jsx(J.img,{...i,ref:e,src:o}):null});Qt.displayName=xe;var we="AvatarFallback",Se=m.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:o,...a}=t,i=pe(we,r),[l,s]=m.useState(o===void 0);return m.useEffect(()=>{if(o!==void 0){const c=window.setTimeout(()=>s(!0),o);return()=>window.clearTimeout(c)}},[o]),l&&i.imageLoadingStatus!=="loaded"?n.jsx(J.span,{...a,ref:e}):null});Se.displayName=we;function ie(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Yt(t,{referrerPolicy:e,crossOrigin:r}){const o=zt(),a=m.useRef(null),i=o?(a.current||(a.current=new window.Image),a.current):null,[l,s]=m.useState(()=>ie(i,t));return X(()=>{s(ie(i,t))},[i,t]),X(()=>{const c=g=>()=>{s(g)};if(!i)return;const u=c("loaded"),d=c("error");return i.addEventListener("load",u),i.addEventListener("error",d),e&&(i.referrerPolicy=e),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",u),i.removeEventListener("error",d)}},[i,r,e]),l}var Jt=ye,Wt=Se;function Gt({className:t,...e}){return n.jsx(Jt,{"data-slot":"avatar",className:j("relative flex size-8 shrink-0 overflow-hidden rounded-full",t),...e})}function Kt({className:t,...e}){return n.jsx(Wt,{"data-slot":"avatar-fallback",className:j("bg-muted flex size-full items-center justify-center rounded-full",t),...e})}function Zt({...t}){return n.jsx(Ae,{"data-slot":"sheet",...t})}function er({...t}){return n.jsx(Be,{"data-slot":"sheet-trigger",...t})}function tr({...t}){return n.jsx(Ue,{"data-slot":"sheet-portal",...t})}function rr({className:t,...e}){return n.jsx(ze,{"data-slot":"sheet-overlay",className:j("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function sr({className:t,children:e,side:r="right",...o}){return n.jsxs(tr,{children:[n.jsx(rr,{}),n.jsxs(Pe,{"data-slot":"sheet-content",className:j("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",r==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",r==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",r==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",r==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...o,children:[e,n.jsxs(Oe,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[n.jsx(ue,{className:"size-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Cr({className:t,...e}){return n.jsx("div",{"data-slot":"sheet-header",className:j("flex flex-col gap-1.5 p-4",t),...e})}function Ar({className:t,...e}){return n.jsx($e,{"data-slot":"sheet-title",className:j("text-foreground font-semibold",t),...e})}function Pr({className:t,...e}){return n.jsx(Fe,{"data-slot":"sheet-description",className:j("text-muted-foreground text-sm",t),...e})}function Or(t={}){const{filters:e={},pagination:r={page:1,perPage:10},autoRefresh:o=!1,refreshInterval:a=3e4}=t,[i,l]=m.useState({data:[],count:0,page:1,perPage:10,totalPages:0,error:null}),[s,c]=m.useState(!0),[u,d]=m.useState(null),g=m.useRef(0),p=500,h=m.useCallback(async(x=!1)=>{const w=Date.now();if(!x&&w-g.current<p){console.log("[useTalentList] Skipping fetch - too soon");return}g.current=w,c(!0),d(null);try{const f=await gt({filters:e,pagination:r});if(f.error)throw f.error;l(f)}catch(f){let y="Failed to fetch talent";if(f instanceof Error)y=f.message;else if(typeof f=="object"&&f!==null){const v=f;v.message?y=String(v.message):v.error?y=String(v.error):y=JSON.stringify(f)}else typeof f=="string"&&(y=f);(y.includes("429")||y.includes("Too many requests"))&&(y="Too many requests. Please wait a moment and try again."),console.error("[useTalentList] Error:",f),d(y)}finally{c(!1)}},[e,r]);return m.useEffect(()=>{h()},[h]),m.useEffect(()=>{if(!o)return;const x=setInterval(()=>h(!0),a);return()=>clearInterval(x)},[o,a,h]),{data:i,isLoading:s,error:u,refresh:()=>h(!0)}}function $r(t){const[e,r]=m.useState(null),[o,a]=m.useState(!1),[i,l]=m.useState(null);m.useEffect(()=>{if(!t){r(null);return}(async()=>{a(!0),l(null);try{const d=await F(t);if(d.error)throw d.error;r(d.data)}catch(d){l(d instanceof Error?d.message:"Failed to fetch talent")}finally{a(!1)}})()},[t]);const s=m.useCallback(async(u,d)=>{if(!t)return{success:!1,error:new Error("No talent ID")};try{const g=await pt(t,u,d);if(g.error)throw g.error;const p=await F(t);return r(p.data),{success:!0,error:null}}catch(g){return{success:!1,error:g instanceof Error?g:new Error(String(g))}}},[t]),c=m.useCallback(async()=>t?yt(t):{success:!1,error:new Error("No talent ID")},[t]);return{data:e,isLoading:o,error:i,updateStatus:s,remove:c,refresh:async()=>{if(t){const u=await F(t);r(u.data)}}}}function Fr(t={}){const{filters:e={},pagination:r={page:1,perPage:10},autoRefresh:o=!1,refreshInterval:a=3e4}=t,[i,l]=m.useState({data:[],count:0,page:1,perPage:10,totalPages:0,error:null}),[s,c]=m.useState(!0),[u,d]=m.useState(null),g=m.useRef(0),p=500,h=m.useCallback(async(x=!1)=>{const w=Date.now();if(!x&&w-g.current<p){console.log("[useSponsorList] Skipping fetch - too soon");return}g.current=w,c(!0),d(null);try{const f=await wt({filters:e,pagination:r});if(f.error)throw f.error;l(f)}catch(f){let y="Failed to fetch sponsors";if(f instanceof Error)y=f.message;else if(typeof f=="object"&&f!==null){const v=f;v.message?y=String(v.message):v.error?y=String(v.error):y=JSON.stringify(f)}else typeof f=="string"&&(y=f);(y.includes("429")||y.includes("Too many requests"))&&(y="Too many requests. Please wait a moment and try again."),console.error("[useSponsorList] Error:",f),d(y)}finally{c(!1)}},[e,r]);return m.useEffect(()=>{h()},[h]),m.useEffect(()=>{if(!o)return;const x=setInterval(()=>h(!0),a);return()=>clearInterval(x)},[o,a,h]),{data:i,isLoading:s,error:u,refresh:()=>h(!0)}}function Br(t){const[e,r]=m.useState(null),[o,a]=m.useState(!1),[i,l]=m.useState(null);m.useEffect(()=>{if(!t){r(null);return}(async()=>{a(!0);try{const d=await B(t);if(d.error)throw d.error;r(d.data)}catch(d){l(d instanceof Error?d.message:"Failed to fetch sponsor")}finally{a(!1)}})()},[t]);const s=m.useCallback(async u=>{if(!t)return{success:!1,error:new Error("No sponsor ID")};try{const d=await vt(t,u);if(d.error)throw d.error;const g=await B(t);return r(g.data),{success:!0,error:null}}catch(d){return{success:!1,error:d instanceof Error?d:new Error(String(d))}}},[t]),c=m.useCallback(async()=>t?_t(t):{success:!1,error:new Error("No sponsor ID")},[t]);return{data:e,isLoading:o,error:i,updateStatus:s,remove:c,refresh:async()=>{if(t){const u=await B(t);r(u.data)}}}}function Ur(t={}){const{filters:e={},pagination:r={page:1,perPage:10},autoRefresh:o=!1,refreshInterval:a=3e4}=t,[i,l]=m.useState({data:[],count:0,page:1,perPage:10,totalPages:0,error:null}),[s,c]=m.useState(!0),[u,d]=m.useState(null),g=m.useRef(0),p=500,h=m.useCallback(async(x=!1)=>{const w=Date.now();if(!x&&w-g.current<p){console.log("[useRequestList] Skipping fetch - too soon");return}g.current=w,c(!0),d(null);try{const f=await jt({filters:e,pagination:r,withRelations:!0});if(f.error)throw f.error;l(f)}catch(f){let y="Failed to fetch requests";if(f instanceof Error)y=f.message;else if(typeof f=="object"&&f!==null){const v=f;v.message?y=String(v.message):v.error?y=String(v.error):y=JSON.stringify(f)}else typeof f=="string"&&(y=f);(y.includes("429")||y.includes("Too many requests"))&&(y="Too many requests. Please wait a moment and try again."),console.error("[useRequestList] Error:",f),d(y)}finally{c(!1)}},[e,r]);return m.useEffect(()=>{h()},[h]),m.useEffect(()=>{if(!o)return;const x=setInterval(()=>h(!0),a);return()=>clearInterval(x)},[o,a,h]),{data:i,isLoading:s,error:u,refresh:()=>h(!0)}}function zr(t){const[e,r]=m.useState(null),[o,a]=m.useState(!1);m.useEffect(()=>{if(!t){r(null);return}(async()=>{a(!0);const s=await U(t);r(s.data),a(!1)})()},[t]);const i=m.useCallback(async l=>{if(!t)return{success:!1,error:new Error("No request ID")};try{const s=await Et(t,l);if(s.error)throw s.error;const c=await U(t);return r(c.data),{success:!0,error:null}}catch(s){return{success:!1,error:s instanceof Error?s:new Error(String(s))}}},[t]);return{data:e,isLoading:o,updateStatus:i,refresh:async()=>{if(t){const l=await U(t);r(l.data)}}}}function Hr(t={}){const{filters:e={},pagination:r={page:1,perPage:10},autoRefresh:o=!1,refreshInterval:a=3e4}=t,[i,l]=m.useState({data:[],count:0,page:1,perPage:10,totalPages:0,error:null}),[s,c]=m.useState(!0),[u,d]=m.useState(null),g=m.useRef(0),p=500,h=m.useCallback(async(x=!1)=>{const w=Date.now();if(!x&&w-g.current<p){console.log("[useMessageList] Skipping fetch - too soon");return}g.current=w,c(!0),d(null);try{const f=await Nt({filters:e,pagination:r});if(f.error)throw f.error;l(f)}catch(f){let y="Failed to fetch messages";if(f instanceof Error)y=f.message;else if(typeof f=="object"&&f!==null){const v=f;v.message?y=String(v.message):v.error?y=String(v.error):y=JSON.stringify(f)}else typeof f=="string"&&(y=f);(y.includes("429")||y.includes("Too many requests"))&&(y="Too many requests. Please wait a moment and try again."),console.error("[useMessageList] Error:",f),d(y)}finally{c(!1)}},[e,r]);return m.useEffect(()=>{h()},[h]),m.useEffect(()=>{if(!o)return;const x=setInterval(()=>h(!0),a);return()=>clearInterval(x)},[o,a,h]),{data:i,isLoading:s,error:u,refresh:()=>h(!0)}}function Vr(t){const[e,r]=m.useState(null),[o,a]=m.useState(!1),[i,l]=m.useState([]);m.useEffect(()=>{if(!t){r(null),l([]);return}(async()=>{a(!0);const[d,g]=await Promise.all([T(t),z(t)]);r(d.data),l(g.data||[]),a(!1)})()},[t]);const s=m.useCallback(async u=>{if(!t)return{success:!1,error:new Error("No message ID")};try{const d=await kt(t,u);if(d.error)throw d.error;const g=await T(t);return r(g.data),{success:!0,error:null}}catch(d){return{success:!1,error:d instanceof Error?d:new Error(String(d))}}},[t]),c=m.useCallback(async u=>{if(!t)return{success:!1,error:new Error("No message ID")};try{const d=await qt(t,u);if(!d.success)throw d.error||new Error("Failed to save reply");const[g,p]=await Promise.all([T(t),z(t)]);return r(g.data),l(p.data||[]),{success:!0,error:null}}catch(d){return{success:!1,error:d instanceof Error?d:new Error(String(d))}}},[t]);return{data:e,isLoading:o,replies:i,updateStatus:s,addReply:c,refresh:async()=>{if(t){const[u,d]=await Promise.all([T(t),z(t)]);r(u.data),l(d.data||[])}}}}function ar(t={}){const{autoRefresh:e=!0,refreshInterval:r=6e4}=t,[o,a]=m.useState(null),[i,l]=m.useState(!0),[s,c]=m.useState(null),[u,d]=m.useState(null),g=m.useRef(0),p=500,h=m.useCallback(async(x=!1)=>{const w=Date.now();if(!x&&w-g.current<p){console.log("[useDashboardMetrics] Skipping fetch - too soon");return}g.current=w,l(!0),c(null);try{console.log("[Dashboard] Fetching metrics...");const f=await Lt();if(console.log("[Dashboard] Metrics result:",f),f.error)throw f.error;a(f.data),d(new Date),console.log("[Dashboard] Metrics loaded:",f.data)}catch(f){let y="Failed to fetch metrics";if(f instanceof Error)y=f.message;else if(typeof f=="object"&&f!==null){const v=f;v.message?y=String(v.message):v.error?y=String(v.error):y=JSON.stringify(f)}else typeof f=="string"&&(y=f);(y.includes("429")||y.includes("Too many requests"))&&(y="Too many requests. Please wait a moment and try again."),console.error("[Dashboard] Error fetching metrics:",f),c(y)}finally{l(!1)}},[]);return m.useEffect(()=>{h()},[h]),m.useEffect(()=>{if(!e)return;const x=setInterval(()=>h(!0),r);return()=>clearInterval(x)},[e,r,h]),{data:o,isLoading:i,error:s,lastUpdated:u,refresh:()=>h(!0)}}function Xr(t={}){const{days:e=30}=t,[r,o]=m.useState({trend:[],isLoading:!0,error:null});return m.useEffect(()=>{(async()=>{o(i=>({...i,isLoading:!0,error:null}));try{const i=await Ct(e);if(i.error)throw i.error;o({trend:i.data||[],isLoading:!1,error:null})}catch(i){o({trend:[],isLoading:!1,error:i instanceof Error?i.message:"Failed to fetch analytics"})}})()},[e]),r}function Qr(t={}){const{limit:e=10,autoRefresh:r=!1,refreshInterval:o=6e4}=t,[a,i]=m.useState([]),[l,s]=m.useState(!0),[c,u]=m.useState(null),d=m.useRef(0),g=500,p=m.useCallback(async(h=!1)=>{const x=Date.now();if(!h&&x-d.current<g){console.log("[useActivityLogs] Skipping fetch - too soon");return}d.current=x,s(!0),u(null);try{const w=await At(e);if(w.error)throw w.error;i(w.data)}catch(w){let f="Failed to fetch activity";if(w instanceof Error)f=w.message;else if(typeof w=="object"&&w!==null){const y=w;y.message?f=String(y.message):y.error?f=String(y.error):f=JSON.stringify(w)}else typeof w=="string"&&(f=w);(f.includes("429")||f.includes("Too many requests"))&&(f="Too many requests. Please wait a moment and try again."),console.error("[useActivityLogs] Error:",w),u(f)}finally{s(!1)}},[e]);return m.useEffect(()=>{p()},[p]),m.useEffect(()=>{if(!r)return;const h=setInterval(()=>p(!0),o);return()=>clearInterval(h)},[r,o,p]),{data:a,isLoading:l,error:c,refresh:()=>p(!0)}}function Yr(t){const[e,r]=m.useState([]),[o,a]=m.useState(!0);return m.useEffect(()=>{(async()=>{a(!0);try{let l;switch(t){case"talent":l=await xt();break;case"sponsor":l=await bt();break;case"message":l=await It();break;default:l={data:[],error:null}}l.data&&r(l.data)}finally{a(!1)}})()},[t]),{counts:e,isLoading:o}}function nr(){const[t,e]=m.useState(0);return m.useEffect(()=>{const r=async()=>{const a=await Rt();e(a)};r();const o=setInterval(r,3e4);return()=>{clearInterval(o)}},[]),t}function Jr({children:t,title:e,subtitle:r,actions:o,isLoading:a,onRefresh:i,lastUpdated:l}){const s=je(),c=De(),[u,d]=m.useState(!1),[g,p]=m.useState(!1),[h,x]=m.useState(""),[w,f]=m.useState(!1),{data:y}=ar({autoRefresh:!0}),v=nr(),M=[{path:"/admin",label:"Overview",icon:Te},{path:"/admin/talent",label:"Talent",icon:O,badge:y?.talent?.pending||0},{path:"/admin/sponsors",label:"Sponsors",icon:He},{path:"/admin/blog",label:"Blog",icon:Ve},{path:"/admin/requests",label:"Requests",icon:Xe,badge:y?.requests?.open||0},{path:"/admin/messages",label:"Messages",icon:$,badge:v>0?v:void 0},{path:"/admin/analytics",label:"Analytics",icon:Le}],k=b=>b==="/admin"?s.pathname==="/admin"||s.pathname==="/admin/":s.pathname.startsWith(b),I=()=>{localStorage.removeItem("admin_session"),c("/admin/login")},ve=()=>{f(!w),document.documentElement.classList.toggle("dark")};return n.jsxs("div",{className:"min-h-screen bg-gray-50/50 dark:bg-gray-950",children:[n.jsx("header",{className:"sticky top-0 z-50 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800",children:n.jsxs("div",{className:"flex h-16 items-center gap-4 px-4 lg:px-6",children:[n.jsxs(Zt,{open:u,onOpenChange:d,children:[n.jsx(er,{asChild:!0,children:n.jsxs(D,{variant:"ghost",size:"icon",className:"lg:hidden",children:[n.jsx(Ee,{className:"h-5 w-5"}),n.jsx("span",{className:"sr-only",children:"Toggle menu"})]})}),n.jsx(sr,{side:"left",className:"w-72 p-0",children:n.jsx(or,{navItems:M,getIsActive:k,metrics:y,onClose:()=>d(!1)})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-9 h-9 rounded-lg bg-gradient-to-br from-rose-500 to-orange-500 flex items-center justify-center",children:n.jsx(he,{className:"w-5 h-5 text-white"})}),n.jsxs("div",{className:"hidden sm:block",children:[n.jsx("h1",{className:"text-lg font-bold tracking-tight",children:"Recommend Her"}),n.jsx("p",{className:"text-xs text-muted-foreground -mt-0.5",children:"Admin Dashboard"})]})]}),n.jsx("nav",{className:"hidden lg:flex items-center gap-1 ml-6",children:M.map(b=>n.jsxs(de,{to:b.path,className:j("flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors",k(b.path)?"bg-rose-50 text-rose-600 dark:bg-rose-950/30 dark:text-rose-400":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"),children:[n.jsx(b.icon,{className:"w-4 h-4"}),b.label,b.badge?n.jsx(L,{variant:"secondary",className:"ml-1 h-5 px-1.5 text-xs",children:b.badge}):null]},b.path))}),n.jsx("div",{className:"flex-1"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:j("flex items-center transition-all duration-200",g?"w-64":"w-auto"),children:g?n.jsxs("div",{className:"relative w-full",children:[n.jsx(re,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),n.jsx(Me,{autoFocus:!0,placeholder:"Search...",value:h,onChange:b=>x(b.target.value),onBlur:()=>!h&&p(!1),className:"pl-9 pr-9 h-9"}),n.jsx(D,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7",onClick:()=>{x(""),p(!1)},children:n.jsx(ue,{className:"w-4 h-4"})})]}):n.jsx(D,{variant:"ghost",size:"icon",onClick:()=>p(!0),children:n.jsx(re,{className:"w-4 h-4"})})}),i&&n.jsx(D,{variant:"ghost",size:"icon",onClick:i,disabled:a,className:"hidden sm:flex",children:n.jsx(Ne,{className:j("w-4 h-4",a&&"animate-spin")})}),n.jsx(D,{variant:"ghost",size:"icon",onClick:ve,className:"hidden sm:flex",children:w?n.jsx(rt,{className:"w-4 h-4"}):n.jsx(Ke,{className:"w-4 h-4"})}),n.jsxs(Z,{children:[n.jsx(ee,{asChild:!0,children:n.jsxs(D,{variant:"ghost",size:"icon",className:"relative",children:[n.jsx(Qe,{className:"w-4 h-4"}),v>0&&n.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-rose-500 rounded-full"})]})}),n.jsxs(te,{align:"end",className:"w-80",children:[n.jsxs("div",{className:"p-3",children:[n.jsx("h4",{className:"font-medium text-sm",children:"Notifications"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:v>0?`${v} unread messages`:"No new notifications"})]}),n.jsx(P,{}),n.jsxs(q,{onClick:()=>c("/admin/messages"),children:[n.jsx($,{className:"w-4 h-4 mr-2"}),"View Messages"]}),n.jsxs(q,{onClick:()=>c("/admin/talent"),children:[n.jsx(O,{className:"w-4 h-4 mr-2"}),"Review Talent"]})]})]}),n.jsxs(Z,{children:[n.jsx(ee,{asChild:!0,children:n.jsxs(D,{variant:"ghost",className:"gap-2 pl-2 pr-3",children:[n.jsx(Gt,{className:"w-7 h-7",children:n.jsx(Kt,{className:"bg-gradient-to-br from-rose-500 to-orange-500 text-white text-xs",children:"AD"})}),n.jsx("span",{className:"hidden sm:inline text-sm font-medium",children:"Admin"}),n.jsx(Ye,{className:"w-4 h-4 text-muted-foreground"})]})}),n.jsxs(te,{align:"end",children:[n.jsxs("div",{className:"px-2 py-1.5",children:[n.jsx("p",{className:"text-sm font-medium",children:"Super Admin"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"admin@recommendher.com"})]}),n.jsx(P,{}),n.jsxs(q,{onClick:()=>c("/admin/settings"),children:[n.jsx(et,{className:"w-4 h-4 mr-2"}),"Settings"]}),n.jsx(P,{}),n.jsxs(q,{onClick:I,className:"text-red-600",children:[n.jsx(We,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})]})]})}),n.jsxs("div",{className:"flex",children:[n.jsx("aside",{className:"hidden lg:block w-64 fixed left-0 top-16 bottom-0 bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 overflow-y-auto",children:n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-6",children:[n.jsx(le,{label:"Talent",value:y?.talent?.total||0,trend:y?.talent?.newThisWeek||0}),n.jsx(le,{label:"Sponsors",value:y?.sponsors?.total||0,trend:y?.sponsors?.newThisMonth||0})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider px-3 mb-2",children:"Quick Links"}),n.jsxs(D,{variant:"ghost",className:"w-full justify-start text-sm",onClick:()=>c("/admin/talent?status=pending"),children:[n.jsx(O,{className:"w-4 h-4 mr-2"}),"Pending Reviews",y&&y.talent?.pending>0&&n.jsx(L,{variant:"destructive",className:"ml-auto text-xs",children:y.talent.pending})]}),n.jsxs(D,{variant:"ghost",className:"w-full justify-start text-sm",onClick:()=>c("/admin/messages?status=unread"),children:[n.jsx($,{className:"w-4 h-4 mr-2"}),"Unread Messages",v>0&&n.jsx(L,{variant:"destructive",className:"ml-auto text-xs",children:v})]})]}),l&&n.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-800",children:n.jsxs("p",{className:"text-xs text-muted-foreground px-3",children:["Last updated: ",Tt(l.toISOString())]})})]})}),n.jsx("main",{className:"flex-1 lg:ml-64 min-h-[calc(100vh-64px)]",children:n.jsxs("div",{className:"p-4 lg:p-8 max-w-7xl mx-auto",children:[(e||r||o)&&n.jsxs("div",{className:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[n.jsxs("div",{children:[e&&n.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:e}),r&&n.jsx("p",{className:"text-muted-foreground mt-1",children:r})]}),o&&n.jsx("div",{className:"flex items-center gap-2",children:o})]}),t]})})]})]})}function or({navItems:t,getIsActive:e,metrics:r,onClose:o}){return n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-800",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-9 h-9 rounded-lg bg-gradient-to-br from-rose-500 to-orange-500 flex items-center justify-center",children:n.jsx(he,{className:"w-5 h-5 text-white"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"font-bold",children:"Recommend Her"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Admin Dashboard"})]})]})}),n.jsx("nav",{className:"flex-1 p-4 space-y-1",children:t.map(a=>n.jsxs(de,{to:a.path,onClick:o,className:j("flex items-center gap-3 px-3 py-3 rounded-lg text-sm font-medium transition-colors",e(a.path)?"bg-rose-50 text-rose-600 dark:bg-rose-950/30 dark:text-rose-400":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"),children:[n.jsx(a.icon,{className:"w-5 h-5"}),a.label,a.badge?n.jsx(L,{variant:"secondary",className:"ml-auto",children:a.badge}):null]},a.path))}),n.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-800",children:n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Talent"}),n.jsx("p",{className:"text-lg font-bold",children:r?.talent?.total||0})]}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Sponsors"}),n.jsx("p",{className:"text-lg font-bold",children:r?.sponsors?.total||0})]})]})})]})}function le({label:t,value:e,trend:r}){return n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:t}),n.jsxs("div",{className:"flex items-baseline gap-1",children:[n.jsx("p",{className:"text-lg font-bold",children:e}),r?n.jsxs("span",{className:"text-xs text-green-600 font-medium",children:["+",r]}):null]})]})}export{Jr as A,Ir as B,Rr as C,et as D,N as M,Mr as R,Zt as S,Er as T,Qr as a,Xr as b,Yr as c,Or as d,$r as e,Tt as f,Lr as g,se as h,sr as i,Cr as j,Ar as k,Pr as l,qr as m,Fr as n,Br as o,Nr as p,jr as q,Tr as r,Ur as s,zr as t,ar as u,kr as v,ae as w,Dr as x,Hr as y,Vr as z};
