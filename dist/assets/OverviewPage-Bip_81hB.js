import{u as B,j as e,B as f,a as S}from"./index-BFokqijs.js";import{C as y,a as b,b as v,c as N,d as w}from"./card-BimRp6lB.js";import{B as K}from"./badge-Cft8GLM8.js";import{S as _}from"./scroll-area-CBFmi8Q9.js";import{A as $,a as G}from"./alert-C88wMc-_.js";import{u as z,a as E,b as H,c as W,A as u,f as X}from"./AdminLayout-CPcJMTxL.js";import{K as Y,a as d,C as F,b as C}from"./ChartCard-BSkERiAs.js";import{S as Q}from"./LoadingSkeleton-BloRapKD.js";import{S as V}from"./StatusBadge-q-2Hhc2v.js";import{C as J}from"./circle-alert-BfNQpGCC.js";import{U as Z}from"./users-CS-CbRwM.js";import{B as h}from"./building-2-D_G8vj2-.js";import{M as T}from"./message-square-Be1BAYdv.js";import{M as g}from"./mail-DTfEEgSS.js";import{R as k,C as ee,X as se,Y as te,T as A,P as ae,a as re,b as ne}from"./PieChart-CZcXp69M.js";import{A as ie,a as L,b as O}from"./AreaChart-Cyi-HIJZ.js";import{U as R}from"./user-check-Ct1E0-wT.js";import"./index-DtNNY4Pa.js";import"./index-DBUxt3yV.js";import"./tslib.es6-eMSY344_.js";import"./index-DQhhiDRk.js";import"./index-hXLSzeHv.js";import"./input-r23uOAAi.js";import"./dropdown-menu-CGW2VWC4.js";import"./index-DIxYQRG1.js";import"./client-BZIiozwD.js";import"./errors-B3_eVdCY.js";import"./file-text-TCE9ovhj.js";import"./shield-C50ekOyg.js";import"./search-B7QLy00a.js";import"./bell-R43HBNvV.js";import"./chevron-down-BPRDtb64.js";import"./skeleton-C_JyVrnT.js";const le=s=>s==="talent"?"UserCheck":s==="sponsor"?"Building2":s==="message"?"Mail":s==="request"?"MessageSquare":"Activity",oe=s=>s==="talent"?"text-blue-600 bg-blue-50":s==="sponsor"?"text-green-600 bg-green-50":s==="message"?"text-yellow-600 bg-yellow-50":s==="request"?"text-purple-600 bg-purple-50":"text-gray-600 bg-gray-50",de={UserCheck:R,Building2:h,Mail:g,MessageSquare:T,Activity:O},r={primary:"#f43f5e",secondary:"#3b82f6",success:"#22c55e",warning:"#f59e0b",purple:"#a855f7"},c=[r.primary,r.secondary,r.success,r.warning,r.purple];function Ee(){const s=B(),{data:t,isLoading:n,error:l,lastUpdated:m,refresh:o}=z({autoRefresh:!0}),{data:j,isLoading:q}=E({limit:10}),{trend:M,isLoading:P}=H({days:30}),{counts:D,isLoading:U}=W("talent");if(n)return e.jsx(u,{children:e.jsx(Q,{})});if(l)return e.jsx(u,{children:e.jsxs($,{variant:"destructive",className:"mb-6",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsxs(G,{children:["Failed to load dashboard data."," ",e.jsx(f,{variant:"link",onClick:o,className:"p-0 h-auto",children:"Try again"})]})]})});const I=M?.slice(-7).map(a=>({date:new Date(a.date).toLocaleDateString("en-US",{weekday:"short"}),talent:a.talent_count,sponsors:a.sponsor_count}))||[],p=D.map(a=>({name:a.status.charAt(0).toUpperCase()+a.status.slice(1),value:a.count}));return e.jsxs(u,{isLoading:n,onRefresh:o,lastUpdated:m,children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Dashboard Overview"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Welcome back! Here's what's happening with your platform today."})]}),e.jsxs(Y,{className:"mb-8",children:[e.jsx(d,{title:"Total Talent",value:t?.talent?.total||0,trend:t?.talent?.newThisWeek,trendLabel:"this week",subtitle:`${t?.talent?.newToday||0} new today`,icon:Z,color:"blue",onClick:()=>s("/admin/talent")}),e.jsx(d,{title:"Total Sponsors",value:t?.sponsors?.total||0,trend:t?.sponsors?.newThisMonth,trendLabel:"this month",subtitle:`${t?.sponsors?.active||0} active`,icon:h,color:"green",onClick:()=>s("/admin/sponsors")}),e.jsx(d,{title:"Open Requests",value:t?.requests?.open||0,trend:t?.requests?.inReview,trendLabel:"in review",subtitle:`${t?.requests?.urgent||0} urgent`,icon:T,color:"purple",onClick:()=>s("/admin/requests")}),e.jsx(d,{title:"Unread Messages",value:t?.messages?.unread||0,trend:t?.messages?.newToday,trendLabel:"new today",subtitle:`${t?.messages?.replied||0} replied`,icon:g,color:"yellow",onClick:()=>s("/admin/messages")})]}),e.jsxs(F,{className:"mb-8",children:[e.jsx(C,{title:"Submissions Trend",description:"New talent and sponsors over the last 7 days",isLoading:P,height:280,children:e.jsx(k,{width:"100%",height:"100%",children:e.jsxs(ie,{data:I,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorTalent",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:r.primary,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:r.primary,stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorSponsors",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:r.secondary,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:r.secondary,stopOpacity:0})]})]}),e.jsx(ee,{strokeDasharray:"3 3",stroke:"#eee"}),e.jsx(se,{dataKey:"date",tick:{fontSize:12}}),e.jsx(te,{tick:{fontSize:12}}),e.jsx(A,{}),e.jsx(L,{type:"monotone",dataKey:"talent",name:"Talent",stroke:r.primary,fillOpacity:1,fill:"url(#colorTalent)"}),e.jsx(L,{type:"monotone",dataKey:"sponsors",name:"Sponsors",stroke:r.secondary,fillOpacity:1,fill:"url(#colorSponsors)"})]})})}),e.jsxs(C,{title:"Talent Status Distribution",description:"Current status breakdown",isLoading:U,height:280,children:[e.jsx(k,{width:"100%",height:"100%",children:e.jsxs(ae,{children:[e.jsx(re,{data:p,cx:"50%",cy:"50%",innerRadius:60,outerRadius:90,paddingAngle:5,dataKey:"value",children:p.map((a,i)=>e.jsx(ne,{fill:c[i%c.length]},`cell-${i}`))}),e.jsx(A,{})]})}),e.jsx("div",{className:"flex flex-wrap justify-center gap-3 mt-2",children:p.map((a,i)=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:c[i%c.length]}}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.name,": ",a.value]})]},a.name))})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs(y,{className:"lg:col-span-2",children:[e.jsxs(b,{className:"flex flex-row items-center justify-between pb-4",children:[e.jsxs("div",{children:[e.jsx(v,{children:"Pending Actions"}),e.jsx(N,{children:"Items requiring your attention"})]}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>s("/admin/talent?status=pending"),children:"View All"})]}),e.jsx(w,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(x,{icon:R,title:"Pending Talent Reviews",count:t?.talent?.pending||0,color:"blue",onClick:()=>s("/admin/talent?status=pending")}),e.jsx(x,{icon:h,title:"Open Requests",count:t?.requests?.open||0,color:"purple",onClick:()=>s("/admin/requests")}),e.jsx(x,{icon:g,title:"Unread Messages",count:t?.messages?.unread||0,color:"yellow",onClick:()=>s("/admin/messages?status=unread")})]})})]}),e.jsxs(y,{children:[e.jsxs(b,{className:"pb-4",children:[e.jsx(v,{children:"Recent Activity"}),e.jsx(N,{children:"Latest platform events"})]}),e.jsx(w,{children:e.jsx(_,{className:"h-[300px]",children:e.jsx("div",{className:"space-y-4",children:q?e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((a,i)=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted animate-pulse"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("div",{className:"h-4 w-3/4 bg-muted rounded animate-pulse"}),e.jsx("div",{className:"h-3 w-1/2 bg-muted rounded animate-pulse"})]})]},i))}):j.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(O,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No recent activity"})]}):j.map(a=>e.jsx(ce,{log:a},a.id))})})})]})]})]})}function x({icon:s,title:t,count:n,color:l,onClick:m}){const o={blue:"bg-blue-50 text-blue-600 dark:bg-blue-950/30 dark:text-blue-400",green:"bg-green-50 text-green-600 dark:bg-green-950/30 dark:text-green-400",yellow:"bg-yellow-50 text-yellow-600 dark:bg-yellow-950/30 dark:text-yellow-400",purple:"bg-purple-50 text-purple-600 dark:bg-purple-950/30 dark:text-purple-400",red:"bg-red-50 text-red-600 dark:bg-red-950/30 dark:text-red-400"};return e.jsxs("button",{onClick:m,className:"w-full flex items-center justify-between p-4 rounded-lg border hover:bg-muted/50 transition-colors text-left",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:S("p-2.5 rounded-lg",o[l]),children:e.jsx(s,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n===0?"All caught up!":`${n} item${n===1?"":"s"} pending`})]})]}),n>0&&e.jsx(K,{variant:"secondary",className:"ml-4",children:n})]})}function ce({log:s}){const t=le(s.type),n=de[t],l=oe(s.type);return e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:S("w-8 h-8 rounded-full flex items-center justify-center shrink-0",l),children:e.jsx(n,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(V,{status:s.status,type:s.type}),e.jsx("span",{className:"text-xs text-muted-foreground",children:X(s.created_at)})]})]})]})}export{Ee as default};
